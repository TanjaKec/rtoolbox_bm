[
{
	"uri": "/day2/datawrangling/",
	"title": "Data Wrangling",
	"tags": [],
	"description": "",
	"content": " How do we do it? ü§î This diagram is taken from the R for Data Science book by Garrett Grolemund and Hadley Wickham, which it is a great resource for learning R. There is a whole community built around it and you could join it and start learning together: R4DS online learning community.\nDataset To learn and practise how to organise data we will use a gapminder data set available from the gapminder package in R. This dataset is put into R by Jennifer Bryan from a tank of data sets available from Gapminder.\nGapminder is an independent Swedish foundation that helps to promote sustainable global development by collecting and analysing relevant data and by developing and designing teaching/learning tools. Gapminder was founded in Sweden by Hans Rosling who was a mastermind for distinctive and insightful storytelling about global development using visual animation.\nYou can see Hans in action in this BBC documentary The joy of Stats available on YouTube.\nGapminder Data For each of 142 countries, the package provides values for life expectancy, GDP per capita, and population, every five years, from 1952 to 2007.\nBefore you can take a look at this data set first run the folowing code\n# install necessary packages: install.packages(\u0026quot;dplyr\u0026quot;, repos = \u0026quot;http://cran.us.r-project.org\u0026quot;) install.packages(\u0026quot;ggplot2\u0026quot;, repos = \u0026quot;http://cran.us.r-project.org\u0026quot;) install.packages(\u0026quot;gapminder\u0026quot;, repos = \u0026quot;http://cran.us.r-project.org\u0026quot;)  # have a look at the data head(gapminder::gapminder)  ## # A tibble: 6 x 6 ## country continent year lifeExp pop gdpPercap ## \u0026lt;fct\u0026gt; \u0026lt;fct\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt; ## 1 Afghanistan Asia 1952 28.8 8425333 779. ## 2 Afghanistan Asia 1957 30.3 9240934 821. ## 3 Afghanistan Asia 1962 32.0 10267083 853. ## 4 Afghanistan Asia 1967 34.0 11537966 836. ## 5 Afghanistan Asia 1972 36.1 13079460 740. ## 6 Afghanistan Asia 1977 38.4 14880372 786.  üí°Note that there are 6 columns, each of which we call a variable.\n Description: Excerpt of the Gapminder data on life expectancy, GDP per capita, and population by country.\nThe main data frame gapminder has 1704 rows and 6 variables: - country: factor with 142 levels - continent: factor with 5 levels - year: ranges from 1952 to 2007 in increments of 5 years - lifeExp: life expectancy at birth, in years - pop: population - gdpPercap: GDP per capita\ngapminder::gapminder[1:3,]  ## # A tibble: 3 x 6 ## country continent year lifeExp pop gdpPercap ## \u0026lt;fct\u0026gt; \u0026lt;fct\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt; ## 1 Afghanistan Asia 1952 28.8 8425333 779. ## 2 Afghanistan Asia 1957 30.3 9240934 821. ## 3 Afghanistan Asia 1962 32.0 10267083 853.  1st look at the data using the following functions: dim() \u0026amp; head()\nlibrary(gapminder) dim(gapminder)  ## [1] 1704 6  head(gapminder, n=10)  ## # A tibble: 10 x 6 ## country continent year lifeExp pop gdpPercap ## \u0026lt;fct\u0026gt; \u0026lt;fct\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt; ## 1 Afghanistan Asia 1952 28.8 8425333 779. ## 2 Afghanistan Asia 1957 30.3 9240934 821. ## 3 Afghanistan Asia 1962 32.0 10267083 853. ## 4 Afghanistan Asia 1967 34.0 11537966 836. ## 5 Afghanistan Asia 1972 36.1 13079460 740. ## 6 Afghanistan Asia 1977 38.4 14880372 786. ## 7 Afghanistan Asia 1982 39.9 12881816 978. ## 8 Afghanistan Asia 1987 40.8 13867957 852. ## 9 Afghanistan Asia 1992 41.7 16317921 649. ## 10 Afghanistan Asia 1997 41.8 22227415 635.  Can you tell what each of the two functions does‚ÅâÔ∏è\nDo we have the information about the structure of the data? ü§î We can examine the structure using str() function, but the output could look messy and hard to follow if the data set is big. ü§™\nstr(gapminder)  ## Classes 'tbl_df', 'tbl' and 'data.frame':\t1704 obs. of 6 variables: ## $ country : Factor w/ 142 levels \u0026quot;Afghanistan\u0026quot;,..: 1 1 1 1 1 1 1 1 1 1 ... ## $ continent: Factor w/ 5 levels \u0026quot;Africa\u0026quot;,\u0026quot;Americas\u0026quot;,..: 3 3 3 3 3 3 3 3 3 3 ... ## $ year : int 1952 1957 1962 1967 1972 1977 1982 1987 1992 1997 ... ## $ lifeExp : num 28.8 30.3 32 34 36.1 ... ## $ pop : int 8425333 9240934 10267083 11537966 13079460 14880372 12881816 13867957 16317921 22227415 ... ## $ gdpPercap: num 779 821 853 836 740 ...  The dplyr Package The dplyr provides a ‚Äúgrammar‚Äù (the verbs) for data manipulation and for operating on data frames in a tidy way. The key operator and the essential verbs are:\n%\u0026gt;%: the ‚Äúpipe‚Äù operator used to connect multiple verb actions together into a pipeline.\nselect(): return a subset of the columns of a data frame.\nmutate(): add new variables/columns or transform existing variables.\nfilter(): extract a subset of rows from a data frame based on logical conditions.\narrange(): reorder rows of a data frame according to single or multiple variables.\nsummarise() / summarize(): reduce each group to a single row by calculating aggregate measures.\nWe can have a look at the data and its structure by using the glimpse() function from the dplyr package.\nsuppressPackageStartupMessages(library(dplyr)) glimpse(gapminder)  ## Observations: 1,704 ## Variables: 6 ## $ country \u0026lt;fct\u0026gt; Afghanistan, Afghanistan, Afghanistan, Afghanistan, Af‚Ä¶ ## $ continent \u0026lt;fct\u0026gt; Asia, Asia, Asia, Asia, Asia, Asia, Asia, Asia, Asia, ‚Ä¶ ## $ year \u0026lt;int\u0026gt; 1952, 1957, 1962, 1967, 1972, 1977, 1982, 1987, 1992, ‚Ä¶ ## $ lifeExp \u0026lt;dbl\u0026gt; 28.801, 30.332, 31.997, 34.020, 36.088, 38.438, 39.854‚Ä¶ ## $ pop \u0026lt;int\u0026gt; 8425333, 9240934, 10267083, 11537966, 13079460, 148803‚Ä¶ ## $ gdpPercap \u0026lt;dbl\u0026gt; 779.4453, 820.8530, 853.1007, 836.1971, 739.9811, 786.‚Ä¶  ü§ìüí°: Notice how we can prevent display of the messages that appear when uploading the packages by using, in this case, suppressPackageStartupMessages()!\n Now we have the dplyr package uploaded, let us learn its verbs. üòá\nThe pipeline operater: %\u0026gt;% Left Hand Side (LHS) %\u0026gt;% Right Hand Side (RHS)\nx %\u0026gt;% f(\u0026hellip;, y)\nf(x,y)\nThe \u0026ldquo;pipe\u0026rdquo; passes the result of the *LHS as the 1st operator argument of the function on the RHS.\n 3 %% sum(4)  sum(3, 4)  %\u0026gt;% is very practical for chaining together multiple dplyr functions in a sequence of operations.\nPick variables by their names: select(),  starts_with(\u0026quot;X\u0026quot;) every name that starts with \u0026ldquo;X\u0026rdquo;.\n ends_with(\u0026quot;X\u0026quot;) every name that ends with \u0026ldquo;X\u0026rdquo;.\n contains(\u0026quot;X\u0026quot;) every name that contains \u0026ldquo;X\u0026rdquo;.\n matches(\u0026quot;X\u0026quot;) every name that matches \u0026ldquo;X\u0026rdquo;, where \u0026ldquo;X\u0026rdquo; can be a regular expression.\n num_range(\u0026quot;x\u0026quot;, 1:5) the variables named x01, x02, x03, x04, x05.\n one_of(x) =\u0026gt; every name that appears in x, which should be a character vector.\n  üëâ Practice ‚è∞üíª: Select your variables 1) that ends with letter p\n2) starts with letter co. Try to do this selection using base R.\nüòÉüôå Solutions: gm_pop_gdp \u0026lt;- select(gapminder, ends_with(\u0026quot;p\u0026quot;)) head(gm_pop_gdp, n = 1)  ## # A tibble: 1 x 3 ## lifeExp pop gdpPercap ## \u0026lt;dbl\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt; ## 1 28.8 8425333 779.  gm_cc \u0026lt;- select(gapminder, starts_with(\u0026quot;co\u0026quot;)) head(gm_cc, n = 1)  ## # A tibble: 1 x 2 ## country continent ## \u0026lt;fct\u0026gt; \u0026lt;fct\u0026gt; ## 1 Afghanistan Asia  of course all of this could be done using base R for example:\ngm_cc \u0026lt;- gapminder[c(\u0026quot;country\u0026quot;, \u0026quot;continent\u0026quot;)]  but it\u0026rsquo;s less intuitive and often requires more typing.\nCreate new variables of existing variables: mutate() It would allow you to add to the data frame df a new column, z, which is the multiplication of the columns x and y: mutate(df, z = x * y). If we would like to observe lifeExp measured in months we could create a new column lifeExp_month:\ngapminder2 \u0026lt;- mutate(gapminder, LifeExp_month = lifeExp * 12) head(gapminder2, n = 2)  ## # A tibble: 2 x 7 ## country continent year lifeExp pop gdpPercap LifeExp_month ## \u0026lt;fct\u0026gt; \u0026lt;fct\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt; \u0026lt;dbl\u0026gt; ## 1 Afghanistan Asia 1952 28.8 8425333 779. 346. ## 2 Afghanistan Asia 1957 30.3 9240934 821. 364.  Pick observations by their values: filter() There is a set of logical operators in R that you can use inside filter():\n x \u0026lt; y: TRUE if x is less than y x \u0026lt;= y: TRUE if x is less than or equal to y x == y: TRUE if x equals y x != y: TRUE if x does not equal y x \u0026gt;= y: TRUE if x is greater than or equal to y x \u0026gt; y: TRUE if x is greater than y x %in% c(a, b, c): TRUE if x is in the vector c(a, b, c) is.na(x): Is NA !is.na(x): Is not NA  üëâ Practice ‚è∞üíª: Filter your data Use gapminder2 df to filter:\n1) only European countries and save it as gapmEU\n2) only European countries from 2000 onward and save it as gapmEU21c\n3) rows where the life expectancy is greater than 80\nDon\u0026rsquo;t forget to use == instead of =! and Don\u0026rsquo;t forget the quotes \u0026quot;\u0026quot;\nüòÉüôå Solutions: gapmEU \u0026lt;- filter(gapminder2, continent == \u0026quot;Europe\u0026quot;) head(gapmEU, 2)  ## # A tibble: 2 x 7 ## country continent year lifeExp pop gdpPercap LifeExp_month ## \u0026lt;fct\u0026gt; \u0026lt;fct\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt; \u0026lt;dbl\u0026gt; ## 1 Albania Europe 1952 55.2 1282697 1601. 663. ## 2 Albania Europe 1957 59.3 1476505 1942. 711.  gapmEU21c \u0026lt;- filter(gapminder2, continent == \u0026quot;Europe\u0026quot; \u0026amp; year \u0026gt;= 2000) head(gapmEU21c, 2)  ## # A tibble: 2 x 7 ## country continent year lifeExp pop gdpPercap LifeExp_month ## \u0026lt;fct\u0026gt; \u0026lt;fct\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt; \u0026lt;dbl\u0026gt; ## 1 Albania Europe 2002 75.7 3508512 4604. 908. ## 2 Albania Europe 2007 76.4 3600523 5937. 917.  filter(gapminder2, lifeExp \u0026gt; 80)  Reorder the rows: arrange() is used to reorder rows of a data frame (df) according to one of the variables/columns.\n If you pass arrange() a character variable, R will rearrange the rows in alphabetical order according to values of the variable.\n If you pass a factor variable, R will rearrange the rows according to the order of the levels in your factor (running levels() on the variable reveals this order).\n  üëâ Practice ‚è∞üíª: Arranging your data 1) Arrange countries in gapmEU21c df by life expectancy in ascending and descending order.\n2) Using gapminder df - Find the records with the smallest population\n Find the records with the largest life expectancy.  üòÉüôå Solution 1): gapmEU21c_h2l \u0026lt;- arrange(gapmEU21c, lifeExp) head(gapmEU21c_h2l, 2)  ## # A tibble: 2 x 7 ## country continent year lifeExp pop gdpPercap LifeExp_month ## \u0026lt;fct\u0026gt; \u0026lt;fct\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt; \u0026lt;dbl\u0026gt; ## 1 Turkey Europe 2002 70.8 67308928 6508. 850. ## 2 Romania Europe 2002 71.3 22404337 7885. 856.  gapmEU21c_l2h \u0026lt;- arrange(gapmEU21c, desc(lifeExp)) # note the use of desc() head(gapmEU21c_l2h, 2)  ## # A tibble: 2 x 7 ## country continent year lifeExp pop gdpPercap LifeExp_month ## \u0026lt;fct\u0026gt; \u0026lt;fct\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt; \u0026lt;dbl\u0026gt; ## 1 Iceland Europe 2007 81.8 301931 36181. 981. ## 2 Switzerland Europe 2007 81.7 7554661 37506. 980.  üòÉüôå Solution 2): arrange(gapminder, pop)  ## # A tibble: 1,704 x 6 ## country continent year lifeExp pop gdpPercap ## \u0026lt;fct\u0026gt; \u0026lt;fct\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt; ## 1 Sao Tome and Principe Africa 1952 46.5 60011 880. ## 2 Sao Tome and Principe Africa 1957 48.9 61325 861. ## 3 Djibouti Africa 1952 34.8 63149 2670. ## 4 Sao Tome and Principe Africa 1962 51.9 65345 1072. ## 5 Sao Tome and Principe Africa 1967 54.4 70787 1385. ## 6 Djibouti Africa 1957 37.3 71851 2865. ## 7 Sao Tome and Principe Africa 1972 56.5 76595 1533. ## 8 Sao Tome and Principe Africa 1977 58.6 86796 1738. ## 9 Djibouti Africa 1962 39.7 89898 3021. ## 10 Sao Tome and Principe Africa 1982 60.4 98593 1890. ## # ‚Ä¶ with 1,694 more rows  arrange(gapminder, desc(lifeExp))  ## # A tibble: 1,704 x 6 ## country continent year lifeExp pop gdpPercap ## \u0026lt;fct\u0026gt; \u0026lt;fct\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt; ## 1 Japan Asia 2007 82.6 127467972 31656. ## 2 Hong Kong, China Asia 2007 82.2 6980412 39725. ## 3 Japan Asia 2002 82 127065841 28605. ## 4 Iceland Europe 2007 81.8 301931 36181. ## 5 Switzerland Europe 2007 81.7 7554661 37506. ## 6 Hong Kong, China Asia 2002 81.5 6762476 30209. ## 7 Australia Oceania 2007 81.2 20434176 34435. ## 8 Spain Europe 2007 80.9 40448191 28821. ## 9 Sweden Europe 2007 80.9 9031088 33860. ## 10 Israel Asia 2007 80.7 6426679 25523. ## # ‚Ä¶ with 1,694 more rows  Collapse many values down to a single summary: summarise() The syntax of summarise() is simple and consistent with the other verbs included in the dplyr package.\n uses the same syntax as mutate(), but the resulting dataset consists of a single row instead of an entire new column in the case of mutate().\n builds a new dataset that contains only the summarising statistics.\n     Objective Function Description     basic sum(x) Sum of vector x   centre mean(x) Mean (average) of vector x    median(x) Median of vector x   spread sd(x) Standard deviation of vector x    quantile(x, probs) Quantile of vector x    range(x) Range of vector x    diff(range(x))) Width of the range of vector x    min(x) Min of vector x    max(x) Max of vector x    abs(x) Absolute value of a number x    üëâ Practice ‚è∞üíª: Use summarise(): 1) to print out a summary of gapminder containing two variables: max_lifeExp and max_gdpPercap.\n2) to print out a summary of gapminder containing two variables: mean_lifeExp and mean_gdpPercap.\nüòÉüôå Solution: Summarise your data summarise(gapminder, max_lifeExp = max(lifeExp), max_gdpPercap = max(gdpPercap))  ## # A tibble: 1 x 2 ## max_lifeExp max_gdpPercap ## \u0026lt;dbl\u0026gt; \u0026lt;dbl\u0026gt; ## 1 82.6 113523.  summarise(gapminder, mean_lifeExp = mean(lifeExp), mean_gdpPercap = mean(gdpPercap))  ## # A tibble: 1 x 2 ## mean_lifeExp mean_gdpPercap ## \u0026lt;dbl\u0026gt; \u0026lt;dbl\u0026gt; ## 1 59.5 7215.  Subsetting: group_by() dplyr\u0026rsquo;s group_by() function enables you to group your data. It allows you to create a separate df that splits the original df by a variable.\nThe function summarise() can be combined with group_by().\n   Objective Function Description     Position first() First observation of the group    last() Last observation of the group    nth() n-th observation of the group   Count n() Count the number of rows    n_distinct() Count the number of distinct observations    üëâ Practice ‚è∞üíª: Subset your data 1) Identify how many countries are given in gapminder data for each continent.\nüòÉüôå Solution: gapminder %\u0026gt;% group_by(continent) %\u0026gt;% summarise(n_distinct(country))  ## # A tibble: 5 x 2 ## continent `n_distinct(country)` ## \u0026lt;fct\u0026gt; \u0026lt;int\u0026gt; ## 1 Africa 52 ## 2 Americas 25 ## 3 Asia 33 ## 4 Europe 30 ## 5 Oceania 2  Let\u0026rsquo;s %\u0026gt;% all up! You can try to get into a habit of using a shortcut for the pipe operator üó£üë• Confer with your neighbours: What relationship do you expect to see between population size (pop) and life expectancy (lifeExp)?\nLook what this code produces\ngapminder_pipe \u0026lt;- gapminder %\u0026gt;% filter(continent == \u0026quot;Europe\u0026quot; \u0026amp; year == 2007) %\u0026gt;% mutate(pop_e6 = pop / 1000000) plot(gapminder_pipe$pop_e6, gapminder_pipe$lifeExp, cex = 0.5, col = \u0026quot;red\u0026quot;)  tidyr The tidyr can help you to create tidy data. Tidy data is data where:\n Every column is a variable Every row is an observation Every cell is a single value  The tidyr package embraces the principles of tidy data and provides the standard key functionalities to organise data values within a dataset.\nHadley Wickham the author of the tidyr package talks in his paper Tidy Data about the importance of data cleaning process and structuring datasets to facilitate data analysis.\nReal datasets, that you are most likely to download from https://data.gov.rs/ or any other open source data platform, would often violate the three precepts of tidy data in all kinds of different ways:\n Variables would not have their names and column headers are values. A number of variables are stored in one column A single variable that is stored in several columns Same information stored multiple times as different variables  to name a few.\nTo illustrate this, let us go back onto https://data.gov.rs/ and access Kvalitet Vazduha 2017. In particular, we want to access 2017-NO2.csv data.\n## If you don't have tidyr installed yet, uncomment and run the line below #install.packeges(\u0026quot;tidyr\u0026quot;) library(tidyr) # access 2017-NO2.csv data no2 \u0026lt;- read.csv(\u0026quot;http://data.sepa.gov.rs/dataset/ca463c44-fbfa-4de9-9a75-790995bf2830/resource/74516688-5fb5-47b2-becc-6b6e31a24d80/download/2017-no2.csv\u0026quot;, stringsAsFactors = FALSE, fileEncoding = \u0026quot;latin1\u0026quot;) # have a look at the data glimpse(no2)  ## Observations: 365 ## Variables: 8 ## $ Datum \u0026lt;chr\u0026gt; \u0026quot;01.01.2017\u0026quot;, \u0026quot;02.01.2017\u0026quot;, \u0026quot;03.01.2017\u0026quot;‚Ä¶ ## $ Novi.Sad.SPENS.NO2 \u0026lt;dbl\u0026gt; 22.89, 32.94, 14.86, 22.73, 20.89, 10.47‚Ä¶ ## $ Beograd.Mostar.NO2 \u0026lt;dbl\u0026gt; 28.83, 39.12, 25.20, 28.48, 27.82, 41.91‚Ä¶ ## $ Beograd.Vra√®ar.NO2 \u0026lt;dbl\u0026gt; 182.84, 244.56, 147.49, 159.12, 124.16, ‚Ä¶ ## $ Beograd.Zeleno.brdo.NO2 \u0026lt;dbl\u0026gt; 36.32, 36.68, 27.00, 35.15, 24.92, 8.27,‚Ä¶ ## $ Kragujevac..NO2 \u0026lt;dbl\u0026gt; 38.92, 43.50, 40.17, 45.44, 43.04, 34.55‚Ä¶ ## $ U.ice..NO2 \u0026lt;dbl\u0026gt; 49.84, 50.34, 36.35, 49.07, 33.33, 39.88‚Ä¶ ## $ Ni..IZJZ.Ni...NO2 \u0026lt;dbl\u0026gt; 18.61, 22.87, 15.68, 21.97, 21.68, 12.11‚Ä¶  It shows that this data set has 365 observations and 8 variables. Nonetheless, we need to consider what type of information we have here:\n date NO2 measurement taken: given in a single column -\u0026gt; ‚úÖ tidyüôÇ places where NO2 measurement was taken: given in several columns -\u0026gt; ‚ùé tidyüôÅ NO2 measurements: given in several columns -\u0026gt; ‚ùé tidyüôÅ  Hmmm‚Ä¶ ü§î This doesn‚Äôt look tidy at all üò≥\nThis data is about measurement level of NO2(¬µg/m3) in several different towns/places, which means that NO2 is our main response variable. The way in which this variable is given in this data is certainly not tidy. It defeats the key principles of tidy data: Every column is a variable and furthermore, Every row is NOT an observation.\nIt appears that this data has 8 variables, but we have realised that there are only 3: date, place and no2. To tidy it, we need to stack it by turning columns into rows. We are happy with the variable date and it should remain as a single column, the other 7 columns we want to convert into two variables: place and no2.\nTo make wide format data into tall format we have to turn columns into rows using gather() function.\nWe will create variable place in which we will hold the headers as given in the columns 2:8. The values inside those columns will be saved in the new variable no2.\nnew_no2 \u0026lt;- no2 %\u0026gt;% gather(\u0026quot;place\u0026quot;, \u0026quot;no2\u0026quot;, -Datum, factor_key = TRUE) # stack all columns apart from `Datum` glimpse(new_no2)  ## Observations: 2,555 ## Variables: 3 ## $ Datum \u0026lt;chr\u0026gt; \u0026quot;01.01.2017\u0026quot;, \u0026quot;02.01.2017\u0026quot;, \u0026quot;03.01.2017\u0026quot;, \u0026quot;04.01.2017\u0026quot;, \u0026quot;0‚Ä¶ ## $ place \u0026lt;fct\u0026gt; Novi.Sad.SPENS.NO2, Novi.Sad.SPENS.NO2, Novi.Sad.SPENS.NO2‚Ä¶ ## $ no2 \u0026lt;dbl\u0026gt; 22.89, 32.94, 14.86, 22.73, 20.89, 10.47, 9.58, 15.99, 14.‚Ä¶  Let us see the names of the places\nnew_no2 %\u0026gt;% group_by(place) %\u0026gt;% summarise(n())  ## # A tibble: 7 x 2 ## place `n()` ## \u0026lt;fct\u0026gt; \u0026lt;int\u0026gt; ## 1 Novi.Sad.SPENS.NO2 365 ## 2 Beograd.Mostar.NO2 365 ## 3 Beograd.Vra√®ar.NO2 365 ## 4 Beograd.Zeleno.brdo.NO2 365 ## 5 Kragujevac..NO2 365 ## 6 U.ice..NO2 365 ## 7 Ni..IZJZ.Ni...NO2 365  Those names look very messy. We could use function from stringr package str_sub(). To begin with let\u0026rsquo;s remove .NO2 at the end of each name.\n## If you don't have stringr installed yet, uncomment and run the line below #install.packeges(\u0026quot;stringr\u0026quot;) library(stringr) new_no2$place \u0026lt;- new_no2$place %\u0026gt;% str_sub(end = -5) glimpse(new_no2)  ## Observations: 2,555 ## Variables: 3 ## $ Datum \u0026lt;chr\u0026gt; \u0026quot;01.01.2017\u0026quot;, \u0026quot;02.01.2017\u0026quot;, \u0026quot;03.01.2017\u0026quot;, \u0026quot;04.01.2017\u0026quot;, \u0026quot;0‚Ä¶ ## $ place \u0026lt;chr\u0026gt; \u0026quot;Novi.Sad.SPENS\u0026quot;, \u0026quot;Novi.Sad.SPENS\u0026quot;, \u0026quot;Novi.Sad.SPENS\u0026quot;, \u0026quot;Nov‚Ä¶ ## $ no2 \u0026lt;dbl\u0026gt; 22.89, 32.94, 14.86, 22.73, 20.89, 10.47, 9.58, 15.99, 14.‚Ä¶  new_no2 %\u0026gt;% group_by(place) %\u0026gt;% summarise(n())  ## # A tibble: 7 x 2 ## place `n()` ## \u0026lt;chr\u0026gt; \u0026lt;int\u0026gt; ## 1 Beograd.Mostar 365 ## 2 Beograd.Vra√®ar 365 ## 3 Beograd.Zeleno.brdo 365 ## 4 Kragujevac. 365 ## 5 Ni..IZJZ.Ni.. 365 ## 6 Novi.Sad.SPENS 365 ## 7 U.ice. 365  It still doesn\u0026rsquo;t look right. üòü This could be a tedious job. üò• It is no wonder why many data analysts grumble about time spent on the process of cleaning and preparing the data. It could be a very long and time consuming process, but the more you do it and more experience you gain the easier and less painful it gets.\nPerhaps, you can try to explore other available packages in R that could help you with organising your data into your ideal format. To give you an idea we will show you how it could easily be done when using forcats::fct_recode() function.\n## If you don't have forcats installed yet, uncomment and run the line below #install.packages(\u0026quot;forcats\u0026quot;) library(forcats) new_no2 \u0026lt;- no2 %\u0026gt;% gather(\u0026quot;place\u0026quot;, \u0026quot;no2\u0026quot;, -Datum, factor_key = TRUE) %\u0026gt;% # stack all columns apart from `Datum` mutate(place = fct_recode(place, \u0026quot;NS_Spens\u0026quot; = \u0026quot;Novi.Sad.SPENS.NO2\u0026quot;, \u0026quot;BG_Most\u0026quot; = \u0026quot;Beograd.Mostar.NO2\u0026quot;, \u0026quot;BG_Vracar\u0026quot; = \u0026quot;Beograd.Vra√®ar.NO2\u0026quot;, \u0026quot;BG_ZelenoBrdo\u0026quot; = \u0026quot;Beograd.Zeleno.brdo.NO2\u0026quot;, \u0026quot;KG\u0026quot; = \u0026quot;Kragujevac..NO2\u0026quot;, \u0026quot;NI\u0026quot; = \u0026quot;Ni..IZJZ.Ni...NO2\u0026quot;, \u0026quot;UZ\u0026quot; = \u0026quot;U.ice..NO2\u0026quot;)) glimpse(new_no2)  ## Observations: 2,555 ## Variables: 3 ## $ Datum \u0026lt;chr\u0026gt; \u0026quot;01.01.2017\u0026quot;, \u0026quot;02.01.2017\u0026quot;, \u0026quot;03.01.2017\u0026quot;, \u0026quot;04.01.2017\u0026quot;, \u0026quot;0‚Ä¶ ## $ place \u0026lt;fct\u0026gt; NS_Spens, NS_Spens, NS_Spens, NS_Spens, NS_Spens, NS_Spens‚Ä¶ ## $ no2 \u0026lt;dbl\u0026gt; 22.89, 32.94, 14.86, 22.73, 20.89, 10.47, 9.58, 15.99, 14.‚Ä¶  By now, you should have gained enough knowledge in using R to give you the necessary confidence to start exploring other functions of the tidyr package. You should not stop there, but go beyond and explore the whole of the tidyverse opinionated collection of R packages for data science. üòáüé∂\n To learn more about tidy data in r chgeck Data Tidying section from the famous Data Science with R by Garrett Grolemund\nHave you tried learning data science by posting your questions and discussing it with other people within the R community? üë•üíªüìäüìàüó£ RStudio Community\n YOUR TURN üëá Practise by doing the following set of exercises:\n1) Install and upload the rattle package and see what it does.\n2) Create a new R script file to explore weatherAUS dataset.\ni) select() variable: MinTemp, MaxTemp, Rainfall and Sunshine by pipping the dataset into `dplyr::select() function.\nii) produce a summary using base::summary() function of these numeric values.\niii) within this selection filter only those observations where Rainfall \u0026gt;= 1 and save the results into the computer\u0026rsquo;s memory (ie. save the results as an object).\niv) Try to think of how else you can use other dplyr verbs on this weatherAUS dataset. Write your question first, before embarking on typing the code.\nv) Write a short report on what visualisation you think would be interesting to produce for this weatherAUS dataset and why?\nUseful Links Data Wrangling cheat sheet\nData Transformation with dplyr cheat sheet\n¬© 2019 Tatjana Kecojevic\n"
},
{
	"uri": "/general/whatlearn/",
	"title": "General Overview",
	"tags": [],
	"description": "",
	"content": " We live in a digital world where having access to the information at our fingertips doesn‚Äôt make it easier to communicate‚Ä¶ it makes it harder. In every data bundle there are many concealed narratives and conclusions, some stories will be unremarkable, others will be highly charged, but all remain out of sight without the skills required to view the hidden truths. Revealing unseen tales within data bundles and communicating that information requires curiosity, determination and skill. Applying the basic concepts, tools and related know how of data science procedures is key to deciphering and revealing the headlining facts. Naturally, in order for this to happen the basic concepts and practices of data analysis need to be applied and adopted by those wishing to uncover the stories. Telling stories with data is a skill that‚Äôs becoming ever more important in the digital world of increasing data, and the desire for informed data driven decision making.\nThe most viable software of choice for reporting modern data analysis is R, as data and code is reproducible and therefore useful to others, as all the information collated within the analysis is available. R is the lingua franca of quantitative research and as such is an influential and indispensable feature of any data scrutiny process. Through the use of grammar of graphics in R and Shiny, a web application framework for R, it is possible to develop interactive applications for graphical data visualisation. Presenting findings through interactive and accessible visualisation methods is an effective form of reaching audiences that might not otherwise realise the value of the topic or data at hand.\nThis course will provide an overview of key concepts for creating an effective data science project and will introduce tools and techniques for data wrangling, visualisation and dynamic reproducible reporting using R, a public domain language for data analysis. The R language provides a rich and flexible environment for working with data, especially data to be used for statistical modelling or graphics.\nThe R system has an extensive library of packages that offer state-of-the-art-abilities. Many of the analyses that they offer are not even available in any of the standard packages. R enables you to escape from the restrictive environments and sterile analyses offered by commonly used statistical software packages. It enables easy experimentation and exploration, which improves data analysis. Sharing your data analysis knowledge discovery is necessary in making it useful. R is a tool that enables reporting modern data analyses in a reproducible manner. It makes analysis more useful to others because the data and code that actually conducted the analysis can be made available and easily shared. Accordingly, this course will emphasize packages that will help you do data analysis, visualisation and communication with the wider audience.\nThe course will start by introducing the fundamental concepts of R: basic use of R console through RStudio IDE, inputting and importing data, record keeping and general good practice of R project workflow. It will then progress to basic statistical concepts, which theoretically may be perceived as complex and thereby can be more effectively communicated by using visualisation. Hence, the formal abstract nature of Statistics can be demystified by visualising its application context, which is why the focus is directed on building appropriate visualisation of a given data analysis problem. At the end of the course, after students develop an understanding of their data, they will use R‚Äôs reproducible and interactive approach to knit this into a tight and concise narrative, and of course, present their story by creating reproducible RMarkdown documents and Shiny Web Apps.\nVersion control has become an essential tool for keeping track when working on DS projects, as well as collaborating. RStudio supports working with Git, an open source distributed version control system, which is easy to use when combined with GitHub, a web-based Git repository hosting service. We will introduce you to GitHub and you‚Äôll become acquainted with good practice when incorporating the use of Git into your R project workflow.\nThere is a demand for open and transparent data sources by governments and civic groups as a means to improve the lives of citizens. Together we will investigate the importance of open source data and we will identify where open source data can be readily found accross the Internet. You will work on case studies inspired by real problems and based on open data.\nObjectives:  To learn how to access and prepare data for the analysis\n To introduce the basic principles behind effective data visualisation\n To learn essential explanatory techniques for summarising data\n To produce explanatory data visualisations providing insight into what could be found within the data\n To utilise R‚Äôs library of tools to visualise geospatial problems\n To design reproducible reports by automating the reporting process\n To share the results of analysis as interactive, eye-catching web apps that are friendly to non-programmers.\n To be familiar with R/RStudio‚Äôs data handling facilities that will expand the range of data analysis problems that can be effectively analysed.\n  How the course works The material is structured within 3 daily modules. Each module is a three and a half hour long session split into 2¬Ω hours hands-on interactive student/teacher workshops with the last hour reserved for questions and discussions.\nEach module will be taught by Dr Tatjana Kecojevic and will cover various related topics through appropriate case studies, presentations and readings. The conceptual models come to life when practice becomes reality during the hands-on taught sessions, through the application of R. Students are then expected to use their own time to practice and hone acquired data handling expertise acquired during the taught sessions.\nStudents are expected to participate fully in all of these delivery modes, but in particular are expected to have attempted any pre-set work and come fully prepared to discuss any problems encountered and debate the ideas and any issues raised.\nWe recommend you complete each of the following before the end of each module:\n Reading and hand-outs/exercises Participation in the discussions Exercises covering concepts from tutorials and/or reading   Who can enrol This course is designed for anyone who needs to communicate information to someone using data. It will benefit anyone who has the curiosity and desire to enter the realm of data exploration. We will seek to make sense of the world of data and learn effective and attractive ways to visually analyse and communicate related information. With the knowledge gained on this course, you will be ready to undertake your very first explanatory data analysis.\nData Science is not simply fashionable jargon, but rather a discipline with a set of tools that empower data enriched living, so whatever industry you‚Äôre in, this is relevant to you!\nPrior experience is not required.\nThe course will be delivered in English and Serbian!\n¬© 2019 Tatjana Kecojevic\n"
},
{
	"uri": "/day3/rmarkdown/",
	"title": "RMarkdown",
	"tags": [],
	"description": "",
	"content": " R Markdown can help generate:\n HTML documents Notebooks in which you‚Äôve run code chunks individually PDFs that you can print out to follow along physically with the course This entire R course website  It enables you to:\n save and execute code and display its output create high quality reports that could include LaTeX equations  What is great about R Markdown documents is that they are fully reproducible and support many static and dynamic output formats, to name a few: PDF, HTML, MS Word, Beamer\u0026hellip; You can incorporate narrative text and code of your data analysis to produce an elegantly formatted story telling journey.\nIt is a variant of Markdown that has embedded R code chunks (denoted by three back ticks), to be used with knitr to make it easy to create reproducible web-based reports.\nR Markdown is a plain text file that has the extension .Rmd\nTo use R Markdown you will need to install the package from CRAN and load it with:\ninstall.packages(\u0026quot;rmakdown\u0026quot;, repos = \u0026quot;http://cran.us.r-project.org\u0026quot;) suppressPackageStartupMessages(library(rmarkdown))  üëâ Go to the following GitHub repo to download the material: https://github.com/TanjaKec/RMarkdown_Intro Starting with RMarkdown Task 1: Open the file RMarkdown_Intro.Rmd\n Change the title of the Markdown Document from My First Markdown Document to RMarkdown Introduction.\n Click the \u0026ldquo;Knit\u0026rdquo; button to see the compiled version of your sample code.\n  Congratulations! You‚Äôve just Knitted your first Rmd document!!!! üëçüòÉ Basic Text editing Task 2: Let‚Äôs format this document further by\n Changing the author of the document to your own name\n Rewriting the first sentence of the document to say \u0026ldquo;This is my first R Markdown document.\u0026rdquo;\n Recompiling the document so you can see your changes\n  Adding a link You can turn a word into a link by surrounding it in hard brackets: [ ] and then placing the link behind it in parentheses: ( ), like this:\n[RStudio](www.rstudio.com)\nTask 3: Make GitHub in the following paragraph link to https://github.com/DataTeka\nText formatting To embed formatting instructions into your document using Markdown, you would surround text by:\n one asterisk to make it italic: italic\n two asterisks to make it bold: bold and\n backticks to make it monospaced: monospaced.\n  To make an ordered list you need to place each item on a new line after a number followed by a period followed by a space: 1. order list 2. second item\nüí°! Note that you need to place a blank line between the list and any paragraphs that come before it.\nTask 4:\n Make the following paragraph in your Rmd document look like this:  When analysing data,\u0026hellip; The variables can be one of two broad types:\n1) Attribute variable: has its outcomes described in terms of its characteristics or attributes;\n2) Measured variable: has the resulting outcome expressed in numerical terms.\n Make the word Knit in the following paragraph italic.  Embedding the R code To embed an R code chunk you would use three back ticks:\n```{r} \nchunk of code\n``` \nTask 5: Replace the cars data set with the gapminder data set. Don\u0026rsquo;t forget to load gapminder package using library(gapminder).\nPrevent printing of the R code You can also embed plots by setting echo = FALSE to the code chunk to prevent printing of the R code that generates the plot:\n```{r, echo=FALSE} \nchunk of code\n``` \nTask 6: Replace the base boxplot of mpg vs. cyl by a ggplot\u0026rsquo;s boxplot to examine a relationship between continent and lifeExp (remember to use some of the dplyr functions too!).\nsuppressPackageStartupMessages(library(dplyr)) library(ggplot2) # ggplot boxplot ggplot(gapminder, aes(x = continent, y = lifeExp)) + geom_boxplot(outlier.colour = \u0026quot;hotpink\u0026quot;) + geom_jitter(position = position_jitter(width = 0.1, height = 0), alpha = .2) + labs (title= \u0026quot;Life Exp. vs. Continent\u0026quot;, x = \u0026quot;Continent\u0026quot;, y = \u0026quot;Life Exp.\u0026quot;) + theme(legend.position = \u0026quot;none\u0026quot;, panel.border = element_rect(fill = NA, colour = \u0026quot;black\u0026quot;, size = .75), plot.title=element_text(hjust=0.5))  Adding LaTex equations Finally, if you wish to add mathematical equations to your Markdown document you can easily embed LaTeX math equations into your report.\nTo display equation in its own line it needs to be surrounded by the double dollar symbol\n$$ y = a + bx $$,\nor to embed an equation in line within the text you would use only one dollar symbol: $y = a + bx$.\nTask 7: Display the equation in the Including Mathematical Equations paragraph into its own line.\nCongratulations! You have got the basics to start creating your own fabulous dynamic documents‚Ä¶ !!!! üëçüòÉ You would definitely find the following useful:\n RMarkdown cheatsheet\n The R Markdown Reference Guide\n Book: R Markdown: The Definitive Guide\n Getting started with R Markdown\n R Markdown Quick Tour\n Advanced R Markdown ‚Äì Tutorial::RStudio Conference 2017\n  ¬© 2019 Tatjana Kecojevic\n"
},
{
	"uri": "/day1/whatisr/",
	"title": "What is R?",
	"tags": [],
	"description": "",
	"content": " Before there was R, there was S! ü§† R is a dialect of S language that was developed in 1976 by Rick Becker and John Chambers at the Bell Laboratories.\nRick Becker gave an excellent keynote talk \u0026ldquo;Forty Years of S\u0026rdquo; at UseR!2016 conference:\nRick Becker @ UseR!2016 where he talked about development of S language that gives explanations for many characteristics of R as we know it, including \u0026ldquo;\u0026lt;-\u0026rdquo; assignment operator.\n1993 Bell Labs gave StatSci (later Insightful Corp.) an exclusive license to develop and sell the S language. Insightful sold its implementation of the S language under the product name S-PLUS.\nYou can read more about the history of S, R, and S-PLUS\nThen, R was born üòáüé∂ In the early nineties at the University of Auckland in the Department of Statistics R was created by Ross Ihaka and Robert Gentleman.\nThey used GNU General Public License to make R open source free software.\nRoss Ihaka and Robert Gentleman. R: A language for data analysis and graphics. Journal of Computational and Graphical Statistics, 5(3):299‚Äì314, 1996\nCurrently R is developed by the R Development Core Team, of which John Chambers is a member.\nTo start using R you need to install it! üòÉ\n¬© 2019 Tatjana Kecojevic\n"
},
{
	"uri": "/general/",
	"title": "About the course",
	"tags": [],
	"description": "",
	"content": " About the Course\nThis course is designed to give you an appreciation of R programming as a tool for data exploration. It focuses on packages that will help you do exploratory data analysis, visualisation and communication in a dynamic and reproducible manner. If you would like to:  Discover how to find and access data and prepare it for exploration and visualistion Learn to explore, visualize, and analyse data in a dynamic and reproducible manner Gain experience in data wrangling, exploratory data analysis and data visualisation, and effective communication of results Work on case studies inspired by real problems and based on open data  then this course is for you! üòÄ ¬© 2019 Tatjana Kecojevic\n"
},
{
	"uri": "/day2/visualisation/",
	"title": "Data Visualisation",
	"tags": [],
	"description": "",
	"content": " Most of you, if not all, will be familiar with creating the graphs in Excel. Software such as Excel has a predefined set of menu options for plotting the data that is the focus of the end result: \u0026ldquo;pretty graph\u0026rdquo;. Those types of menus assume data to be in a format ready for plotting, which when you get raw data is hardly the case. You are probably going to have to organise and wrangle your data to make it ready for effective visualisation.\nGrammar of Graphics The grammar of graphics enables a structured way of creating a plot by adding the components as layers, making it look effective and attractive.\nIt enables you to specify building blocks of a plot and to combine them to create the graphical display that you want. There are 8 building blocks:\n data\n aesthetic mapping\n geometric object\n statistical transformations\n scales\n coordinate system\n position adjustments\n faceting\n  Imagine talking about baking a cake and adding a cherry on the top. üéÇüçí This philosophy has been built into the ggplot package by Hadle Wickham for creating elegant and complex plots in R.\nggplot2 Learning how to use the ggplot2 package can be challenging, but the results are highly rewarding and just like R itself, it becomes easier the more you use it.\nUnlike base graphics, ggplot works with dataframes and not individual vectors.\n The best way to master it is by practising. So let us create a first ggplot. üòÉ What we need to do is the following:\n i) Wrangle the data in the format suitable for visualisation.\n ii) \u0026ldquo;Initialise\u0026rdquo; a plot with ggplot():\n  ggplot(dataframe, aes(x = explanatory variable, y = resposne variable))\nThis will draw a blank ggplot, even though the x and y are specified. ggplot doesn‚Äôt assume the plot you meant to be drawn (a scatterplot). You only specify the data set and columns ie. variables to be used. Alos note that aes( ) function is used to specify the x and y axes.\n iii) Add layers with geom_ functions:  geom_point()\nWe will add points using a geom layer called geom_point.\n# load the packages suppressPackageStartupMessages(library(dplyr)) suppressPackageStartupMessages(library(gapminder)) suppressPackageStartupMessages(library(ggplot2)) # wrangle the data (Can you remember what this code do?) gapminder_pipe \u0026lt;- gapminder %\u0026gt;% filter(continent == \u0026quot;Europe\u0026quot; \u0026amp; year == 2007) %\u0026gt;% mutate(pop_e6 = pop / 1000000) # plot the data ggplot(gapminder_pipe, aes(x = pop_e6, y = lifeExp)) + geom_point(col =\u0026quot;red\u0026quot;)  ü§ìüí° Tip: You can use the following code template to make graphs with ggplot2:\n ggplot(data = \u0026lt;DATA\u0026gt;, (mapping = aes(\u0026lt;MAPPINGS\u0026gt;)) + \u0026lt;GEOM_FUNCTION\u0026gt;()  ggplot() gallery Run the following code to see what graphs it will produce.\nggplot(data = gapminder, mapping = aes(x = lifeExp), binwidth = 10) + geom_histogram() # ggplot(data = gapminder, mapping = aes(x = lifeExp)) + geom_density() # ggplot(data = gapminder, mapping = aes(x = continent, color = continent)) + geom_bar() # ggplot(data = gapminder, mapping = aes(x = continent, fill = continent)) + geom_bar()  üó£üë• Confer with your neighbours: Does life expectancy depend upon the population size?\ny = b_0 + b_1 x + e\nRun this code in your console to fit the model pop vs lifeExp.\nPay attention to spelling, capitalization, and parentheses!\nm1 \u0026lt;- lm(gapminder_pipe$lifeExp ~ gapminder_pipe$pop_e6) summary(m1)  Can you answer the question using the output of the fitted model?\nm1 \u0026lt;- lm(gapminder_pipe$lifeExp ~ gapminder_pipe$pop_e6) summary(m1)  ## ## Call: ## lm(formula = gapminder_pipe$lifeExp ~ gapminder_pipe$pop_e6) ## ## Residuals: ## Min 1Q Median 3Q Max ## -6.324 -2.562 1.007 2.245 4.277 ## ## Coefficients: ## Estimate Std. Error t value Pr(\u0026gt;|t|) ## (Intercept) 77.477421 0.721723 107.351 \u0026lt;2e-16 *** ## gapminder_pipe$pop_e6 0.008762 0.023779 0.368 0.715 ## --- ## Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 ## ## Residual standard error: 3.025 on 28 degrees of freedom ## Multiple R-squared: 0.004826,\tAdjusted R-squared: -0.03072 ## F-statistic: 0.1358 on 1 and 28 DF, p-value: 0.7153  üëâ Practice ‚è∞üíª: Use gapminder data. Does the life expectancy depend upon the GDP per capita?\n1) Have a glance at the data. (tip: sample_n(df, n))\n2) Produce a scatterplot: what does it tell you?\n3) Fit a regression model: is there a relationship? How strong is it? Is the relationship linear? What conclusion(s) can you draw?\n4) What are the other questions you could ask; could you provide the answers to them?\nüòÉüôå Solution: code Q1; sample sample_n(gapminder, 30)  ## # A tibble: 30 x 6 ## country continent year lifeExp pop gdpPercap ## \u0026lt;fct\u0026gt; \u0026lt;fct\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt; ## 1 Iraq Asia 1987 65.0 16543189 11644. ## 2 Myanmar Asia 1962 45.1 23634436 388 ## 3 Italy Europe 1957 67.8 49182000 6249. ## 4 Netherlands Europe 2007 79.8 16570613 36798. ## 5 Djibouti Africa 1972 44.4 178848 3694. ## 6 Iraq Asia 1992 59.5 17861905 3746. ## 7 South Africa Africa 1997 60.2 42835005 7479. ## 8 El Salvador Americas 1967 55.9 3232927 4359. ## 9 Burkina Faso Africa 1957 34.9 4713416 617. ## 10 Korea, Rep. Asia 2002 77.0 47969150 19234. ## # ‚Ä¶ with 20 more rows  We will add layers onto this scatterplot: liveExp vs gdpPercap. We want to superimpose regression line of the best fit and non-parametric loess line that depict a possible relationship between the two variables. That means we will have:\n 1st layer: scatterplot 2nd layer: line of the best fit 3rd layer: loess curve  üòÉüôå Solution: code Q2; Plot the data; ggplot(gapminder, aes(x = gdpPercap, y = lifeExp)) + geom_point(alpha = 0.2, shape = 21, fill = \u0026quot;blue\u0026quot;, colour=\u0026quot;black\u0026quot;, size = 5) + # set transparency, shape, colour and size for points geom_smooth(method = \u0026quot;lm\u0026quot;, se = F, col = \u0026quot;maroon3\u0026quot;) + # change the colour of line geom_smooth(method = \u0026quot;loess\u0026quot;, se = F, col = \u0026quot;limegreen\u0026quot;) # change the colour of line  üòÉüôå Solution: code Q3; simple regression model my.model \u0026lt;- lm(gapminder_pipe$lifeExp ~ gapminder_pipe$gdpPercap) summary(my.model)  ## ## Call: ## lm(formula = gapminder_pipe$lifeExp ~ gapminder_pipe$gdpPercap) ## ## Residuals: ## Min 1Q Median 3Q Max ## -2.79839 -1.30472 0.00807 1.33443 2.87766 ## ## Coefficients: ## Estimate Std. Error t value Pr(\u0026gt;|t|) ## (Intercept) 7.227e+01 6.942e-01 104.113 \u0026lt; 2e-16 *** ## gapminder_pipe$gdpPercap 2.146e-04 2.514e-05 8.537 2.8e-09 *** ## --- ## Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 ## ## Residual standard error: 1.598 on 28 degrees of freedom ## Multiple R-squared: 0.7225,\tAdjusted R-squared: 0.7125 ## F-statistic: 72.88 on 1 and 28 DF, p-value: 2.795e-09  Playing with the aesthetic: adding more layers to your ggplot() Whenever possible you should strive to make your graph visually appealing and informative as discussed in the previous section Principles of Visualisation.\nTo change the title and axis labels use layer labs labs(title = ‚Äúyour title‚Äù, subtitle = ‚Äúyour subtitle‚Äù, y = ‚Äúy label‚Äù, x = ‚Äúx label‚Äù, caption = ‚Äúgraph\u0026rsquo;s caption‚Äù)\nggplot(gapminder, aes(x = gdpPercap, y = lifeExp)) + geom_point(alpha = 0.2, shape = 20, col = \u0026quot;steelblue\u0026quot;, size = 5) + geom_smooth(method = \u0026quot;lm\u0026quot;, se = F, col = \u0026quot;maroon3\u0026quot;) + geom_smooth(method = \u0026quot;loess\u0026quot;, se = F, col = \u0026quot;limegreen\u0026quot;) + # give a title an label axes labs(title = \u0026quot;Life Exp. vs. Population Size\u0026quot;, x = \u0026quot;population\u0026quot;, y = \u0026quot;Life Exp.\u0026quot;) + # modify the appearance theme(legend.position = \u0026quot;none\u0026quot;, panel.border = element_rect(fill = NA, colour = \u0026quot;black\u0026quot;, size = .75), plot.title=element_text(hjust=0.5)) + # add the description geom_text(x = 80000, y = 125, label = \u0026quot;regression line\u0026quot;, col = \u0026quot;maroon3\u0026quot;) + geom_text(x = 90000, y = 75, label = \u0026quot;smooth line\u0026quot;, col = \u0026quot;limegreen\u0026quot;)  Note, that we have added text on the plot for the two lines and have edited the plot in terms of legend and its appearance.\nWe could also annotate the plot by using:\nannotate(\u0026quot;text\u0026quot;, x = 80000, y = 125 label = \u0026quot;regression line\u0026quot;, color = \u0026quot;maroon3\u0026quot;)  To learn more about how to modify the appearance of the theme go to ggplot‚Äôs theme page.\nChange the colour of the points to reflect categories of another, third variable. ggplot(gapminder, aes(x = gdpPercap, y = lifeExp)) + # change the colour of the points to reflect continent it belongs to; set transparency, shape, and size for points geom_point(aes(col = continent), alpha = 0.5, shape = 20, size = 3) + geom_smooth(method = \u0026quot;lm\u0026quot;, se = F, col = \u0026quot;maroon3\u0026quot;) + geom_smooth(method = \u0026quot;loess\u0026quot;, se = F, col = \u0026quot;dodgerblue3\u0026quot;) + labs (title= \u0026quot;Life Exp. vs. Population Size\u0026quot;, x = \u0026quot;population\u0026quot;, y = \u0026quot;Life Exp.\u0026quot;) + theme(legend.position = \u0026quot;right\u0026quot;, panel.border = element_rect(fill = NA, colour = \u0026quot;black\u0026quot;, size = .75), plot.title=element_text(hjust=0.5)) + geom_text(x = 80000, y = 125, label = \u0026quot;regression line\u0026quot;, col = \u0026quot;maroon3\u0026quot;) + geom_text(x = 90000, y = 75, label = \u0026quot;smooth line\u0026quot;, col = \u0026quot;dodgerblue3\u0026quot;)  Note that the legend is added automatically. You can remove it by setting the legend.position to none from within a theme() function.\n Adjust the X and Y axis limits and change the X axis texts and its ticks\u0026rsquo; location ggplot(gapminder, aes(x = gdpPercap, y = lifeExp)) + geom_point(aes(col = continent), alpha = 0.5, shape = 20, size = 3) + geom_smooth(method = \u0026quot;lm\u0026quot;, se = F, col = \u0026quot;maroon3\u0026quot;) + geom_smooth(method = \u0026quot;loess\u0026quot;, se = F, col = \u0026quot;dodgerblue3\u0026quot;) + labs (title= \u0026quot;Life Exp. vs. Population Size\u0026quot;, x = \u0026quot;population\u0026quot;, y = \u0026quot;Life Exp.\u0026quot;) + theme(legend.position = \u0026quot;right\u0026quot;, panel.border = element_rect(fill = NA, colour = \u0026quot;black\u0026quot;, size = .75), plot.title=element_text(hjust=0.5)) + geom_text(x = 48000, y = 90, label = \u0026quot;regression line\u0026quot;, col = \u0026quot;maroon3\u0026quot;) + geom_text(x = 70000, y = 75, label = \u0026quot;smooth line\u0026quot;, col = \u0026quot;dodgerblue3\u0026quot;) + # change the limits of the x \u0026amp; y axis xlim(c(0, 90000)) + ylim(c(25, 100))  ## Warning: Removed 5 rows containing non-finite values (stat_smooth). ## Warning: Removed 5 rows containing non-finite values (stat_smooth).  ## Warning: Removed 5 rows containing missing values (geom_point).  ## Warning: Removed 33 rows containing missing values (geom_smooth).  Note that the regression and smooth lines have changed their shapes üò≥‚Ä¶ all those warnings üò¨ What‚Äôs going on?! üò≤\nWhen using xlim() and ylim(), the points outside the specified range are deleted and are not considered while drawing the line using geom_smooth(). This feature might come in handy when you wish to know how the line of best fit would change when some extreme values or outliers are removed.\n Thankfully, there is another way to change the limits of the axis without deleting the points by simply zooming in to the region of interest. This is done using coord_cartesian(). You can try to replace xlim() and ylim() commands in the previous code chunk with the code below to see what would happen.\ncoord_cartesian(xlim = c(0, 90000), ylim = c(25, 100)) # zooming in specified limits of the x \u0026amp; y axis  You can set the breaks on the x axis and label them by using scale_x_continuous(). Similarly, you can do it for the y axis?\nTry to play with changing the colour palette. For more options check Sequential, diverging and qualitative colour scales from colorbrewer.org.\nThese are build-in themes which control all non-data display. You should use theme_bw() to have white background or theme_dark() for dark grey. For more build-in themes click here.\nggplot(gapminder, aes(x = gdpPercap, y = lifeExp)) + geom_point(aes(col = continent), alpha = 0.5, shape = 20, size = 3) + geom_smooth(method = \u0026quot;lm\u0026quot;, se = F, col = \u0026quot;maroon3\u0026quot;) + geom_smooth(method = \u0026quot;loess\u0026quot;, se = F, col = \u0026quot;dodgerblue3\u0026quot;) + labs (title= \u0026quot;Life Exp. vs. Population Size\u0026quot;, x = \u0026quot;population\u0026quot;, y = \u0026quot;Life Exp.\u0026quot;) + theme(legend.position = \u0026quot;right\u0026quot;, panel.border = element_rect(fill = NA, colour = \u0026quot;black\u0026quot;, size = .75), plot.title=element_text(hjust=0.5)) + geom_text(x = 80000, y = 125, label = \u0026quot;regression line\u0026quot;, col = \u0026quot;maroon3\u0026quot;) + geom_text(x = 90000, y = 75, label = \u0026quot;smooth line\u0026quot;, col = \u0026quot;dodgerblue3\u0026quot;) + # change breaks and label them scale_x_continuous(breaks = seq(0, 120000, 20000), labels = c(\u0026quot;0\u0026quot;, \u0026quot;20K\u0026quot;, \u0026quot;40K\u0026quot;, \u0026quot;60K\u0026quot;, \u0026quot;80K\u0026quot;, \u0026quot;10K\u0026quot;, \u0026quot;12K\u0026quot;)) + # change color palette scale_colour_brewer(palette = \u0026quot;Set1\u0026quot;) + # white background theme theme_bw()  There is a ggthemes library of themes that willhelp you create stylish ggplot charts used by different journals like the Wall Street Journal or the Economist. See what other themes you can use by going to this website\n## If you don't have ggthemes installed yet, uncomment and run the line below #install.packeges(\u0026quot;ggthemes\u0026quot;) library(ggthemes) ggplot(gapminder, aes(x = gdpPercap, y = lifeExp)) + geom_point(aes(col = continent), alpha = 0.5, shape = 20, size = 3) + geom_smooth(method = \u0026quot;lm\u0026quot;, se = F, col = \u0026quot;darkred\u0026quot;) + geom_smooth(method = \u0026quot;loess\u0026quot;, se = F, col = \u0026quot;darkgreen\u0026quot;) + labs (title= \u0026quot;Life Exp. vs. Population Size\u0026quot;, x = \u0026quot;population\u0026quot;, y = \u0026quot;Life Exp.\u0026quot;) + theme(legend.position = \u0026quot;right\u0026quot;, panel.border = element_rect(fill = NA, colour = \u0026quot;black\u0026quot;, size = .75), plot.title=element_text(hjust=0.5)) + geom_text(x = 80000, y = 125, label = \u0026quot;regression line\u0026quot;, col = \u0026quot;darkred\u0026quot;) + geom_text(x = 90000, y = 75, label = \u0026quot;smooth line\u0026quot;, col = \u0026quot;darkgreen\u0026quot;) + scale_x_continuous(breaks = seq(0, 120000, 20000), labels = c(\u0026quot;0\u0026quot;, \u0026quot;20K\u0026quot;, \u0026quot;40K\u0026quot;, \u0026quot;60K\u0026quot;, \u0026quot;80K\u0026quot;, \u0026quot;10K\u0026quot;, \u0026quot;12K\u0026quot;)) + # Wall Street Journal theme scale_colour_wsj() + theme_wsj()  You are ready to make publication-ready visualizations in R. üòé You can go further and explore for yourself to see if you can produce BBC style ggplot charts like those used in the BBC\u0026rsquo;s data journalism. Check out the BBC Visual and Data Journalism cookbook for R graphics.\nLay out panels in a grid Sometimes it might be hard to read one panel plot, like the one we have just created in which it is not very easy to see the points of each continent. To make it easier to follow and to understand the information you are trying to depict, it would be more effective to present different categories of the same information in a clear set of multi-panel plots. This is easy to do by applying powerful faceting functions of the ggplot2: facet_wrap() and facet_grid().\nggplot(gapminder, aes(x = gdpPercap, y = lifeExp)) + geom_point(aes(col = continent), alpha = 0.5, shape = 20, size = 3) + geom_smooth(method = \u0026quot;lm\u0026quot;, se = F, col = \u0026quot;darkred\u0026quot;) + geom_smooth(method = \u0026quot;loess\u0026quot;, se = F, col = \u0026quot;black\u0026quot;) + labs (title= \u0026quot;Life Exp. vs. Population Size\u0026quot;, x = \u0026quot;population\u0026quot;, y = \u0026quot;Life Exp.\u0026quot;) + theme(legend.position = \u0026quot;right\u0026quot;, panel.border = element_rect(fill = NA, colour = \u0026quot;black\u0026quot;, size = .75), plot.title=element_text(hjust=0.5)) + scale_x_continuous(breaks = seq(0, 120000, 20000), labels = c(\u0026quot;0\u0026quot;, \u0026quot;20K\u0026quot;, \u0026quot;40K\u0026quot;, \u0026quot;60K\u0026quot;, \u0026quot;80K\u0026quot;, \u0026quot;10K\u0026quot;, \u0026quot;12K\u0026quot;)) + scale_colour_wsj() + theme_wsj() + # forms a matrix of scatterplots for each continet facet_grid(rows = vars(continent))  The main difference between facet_wrap() and facet_grid() is that the former can string together ggplots in different facets using a single variable, while the latter can do it for more than one.\nTry to explore the two functions for yourself and see where it will take you.\n üí™ There is a challenge:  dplyr\u0026rsquo;s group_by() function enables you to group your data. It allows you to create a separate df that splits the original df by a variable.\n boxplot() function produces boxplot(s) of the given (grouped) values.\n  Knowing about group_by() and boxplot() function and using gapminder data, can you compute the median life expectancy for year 2007 by continent and visualise your result?\nüòÉüôå Solution: code Let us look at the median life expectancy for each continent\ngapminder %\u0026gt;% group_by(continent) %\u0026gt;% summarise(lifeExp = median(lifeExp))  ## # A tibble: 5 x 2 ## continent lifeExp ## \u0026lt;fct\u0026gt; \u0026lt;dbl\u0026gt; ## 1 Africa 47.8 ## 2 Americas 67.0 ## 3 Asia 61.8 ## 4 Europe 72.2 ## 5 Oceania 73.7  We are lucky that we live in Serbia, ie. Europe!!! üòÖ\nüòÉüôå Solution: graph Case study: NO2 2017 üòÅ Let\u0026rsquo;s try to compbine everything we have learnt so far and practise using well known to us 2017-NO2.csv data.\nRemember this?\nlibrary(tidyr) library(forcats) no2 \u0026lt;- read.csv(\u0026quot;http://data.sepa.gov.rs/dataset/ca463c44-fbfa-4de9-9a75-790995bf2830/resource/74516688-5fb5-47b2-becc-6b6e31a24d80/download/2017-no2.csv\u0026quot;, stringsAsFactors = FALSE, fileEncoding = \u0026quot;latin1\u0026quot;) new_no2 \u0026lt;- no2 %\u0026gt;% gather(\u0026quot;place\u0026quot;, \u0026quot;no2\u0026quot;, -Datum, factor_key = TRUE) %\u0026gt;% # stack all columns apart from `Datum` mutate(place = fct_recode(place, \u0026quot;NS_Spens\u0026quot; = \u0026quot;Novi.Sad.SPENS.NO2\u0026quot;, \u0026quot;BG_Most\u0026quot; = \u0026quot;Beograd.Mostar.NO2\u0026quot;, \u0026quot;BG_Vracar\u0026quot; = \u0026quot;Beograd.Vra√®ar.NO2\u0026quot;, \u0026quot;BG_ZelenoBrdo\u0026quot; = \u0026quot;Beograd.Zeleno.brdo.NO2\u0026quot;, \u0026quot;KG\u0026quot; = \u0026quot;Kragujevac..NO2\u0026quot;, \u0026quot;NI\u0026quot; = \u0026quot;Ni..IZJZ.Ni...NO2\u0026quot;, \u0026quot;UZ\u0026quot; = \u0026quot;U.ice..NO2\u0026quot;)) glimpse(new_no2)  ## Observations: 2,555 ## Variables: 3 ## $ Datum \u0026lt;chr\u0026gt; \u0026quot;01.01.2017\u0026quot;, \u0026quot;02.01.2017\u0026quot;, \u0026quot;03.01.2017\u0026quot;, \u0026quot;04.01.2017\u0026quot;, \u0026quot;0‚Ä¶ ## $ place \u0026lt;fct\u0026gt; NS_Spens, NS_Spens, NS_Spens, NS_Spens, NS_Spens, NS_Spens‚Ä¶ ## $ no2 \u0026lt;dbl\u0026gt; 22.89, 32.94, 14.86, 22.73, 20.89, 10.47, 9.58, 15.99, 14.‚Ä¶  new_no2 %\u0026gt;% group_by(place) %\u0026gt;% summarise(mean_no2 = mean(!is.na(no2))) %\u0026gt;% # !is.na(): is not NA; omits the missing values ggplot(aes(x = place, y = mean_no2, fill = place)) + # fill: colours each bar differently geom_bar(stat = \u0026quot;identity\u0026quot;) + xlab(\u0026quot;Place\u0026quot;) + scale_fill_brewer(palette = \u0026quot;Dark2\u0026quot;) + # colour scheme \u0026quot;Dark2\u0026quot; theme(legend.position=\u0026quot;bottom\u0026quot;, axis.text.x = element_blank(), axis.ticks.x = element_blank()) #  YOUR TURN üëá Practise by doing the following set of exercises:\n1) Chose a data set from https://data.gov.rs that is interesting to you. Import the dataset into R and examine what kinds of variables are there. What plots would you recommend using to help people get to know the dataset?\n2) Go back to NO2 2017 case study:\ni) What are the questions you can ask based on the available information within the dataset?\nii) What plots would you recommend to use to help in answering those questions?\niii) Create appropriate visualisations for i) \u0026amp; ii)\nuseful links: tidyverse, visualization, and manipulation basics\nIntroduction to R graphics with ggplot2\ngglopt cheat sheet\nfrom Data to Viz\nAn example from the Financial Times\nBBC Visual and Data Journalism cookbook for R graphics\nggplot as a creativity engine\n¬© 2019 Tatjana Kecojevic\n"
},
{
	"uri": "/day1/installr/",
	"title": "Install R/RStudio",
	"tags": [],
	"description": "",
	"content": " Install R To begin our journey to data science in R we need to install and make sure we can run it.\nWe will start by installing R first and then RStudio. The analogy we can use here is that R is an airplane and R Studio is its airport.\n R homepage - http://www.r-project.org CRAN Mirrors - http://cran.r-project.org  Run the installation\nYour R Counsole should look something like this:\nInstall RStudio RStudio is available in open source and commercial editions and runs on the desktop (Windows, Mac, and Linux).\nRStudio Desktop - http://www.rstudio.com\nRStudio is an integrated development environment (IDE) for R. It includes a console, syntax-highlighting editor that supports direct code execution, as well as tools for plotting, history, debugging and work-space management. You can check its features by visiting RSTudio website.\nWe recomend you check regularly for R/Rstudio updates.\n ¬© 2019 Tatjana Kecojevic\n"
},
{
	"uri": "/general/instructor/",
	"title": "Meet the Instructor",
	"tags": [],
	"description": "",
	"content": "The instructor is Dr Tatjana Kecojeviƒá who is a longtime R user with a doctorate in Statistics from the University of Manchester. She spent many years working in the U.K. university sector as a senior lecturer and has published an extensive number of articles and papers in the field of quantile regression. Tatjana is the founder and co-organizer of R-Ladies Manchester, Belgrade and Novi Sad Chapters, leader of the R Forwards team and a Women in DS (WiDS) ambassador. She is currently the founder and director of SisterAnalyst.org, an organisation aiming to empower women from a diverse range of backgrounds through data literacy. Unsurprisingly, Tatjana is an enthusiastic R user and in addition to her involvement supporting women in STEM related activities, she is dedicated to creating an inclusive culture by developing initiatives supporting all underrepresented groups within the DS community.\n¬© 2019 Tatjana Kecojevic\n"
},
{
	"uri": "/day3/shiny/",
	"title": "Shiny",
	"tags": [],
	"description": "",
	"content": " Shiny: Creating Web Apps What is Shiny App? Shiny is a package from RStudio that can be used to build interactive web apps with R.\nYou can host standalone apps on a webpage or embed them in R Markdown documents or build [dashboards](http://rstudio.github.io/shinydashboard/. You can also extend your Shiny apps with CSS themes, htmlwidgets, and JavaScript actions.\nShiny combines the computational power of R with the interactivity of the modern web.\nShiny apps are easy to write. No web development skills are required.\nBuilding a Shiny App Step by Step From here on we will follow the steps given in Xaringan presentation available from üëâ here You can download the GitHub repo created for this tutorial which contains the xaringan presentation slides and the app used in the presentation from: https://github.com/TanjaKec/LearnShiny\n üí™ There is a challenge: Do you remember our dplyr challenge using group_by function to compute the median life expectancy for year 2007 by continent for gapminder data that we had to visualise?\nCan you create a Shiny app for this visualisation?\nHave a look at this üëâüòé\nuseful links:\nRstudio Shiny tutorial\nLook for inspiration at rstudio shiny gallery\nGetting Started with Shiny by CODING CLUB https://ourcodingclub.github.io/2017/03/07/shiny.html\nFollow Dean\u0026rsquo;s blog: https://deanattali.com\nAn example: Cancer Research UK Cambridge Institute\nGo further: Shiny Dashboard\nHappy R Programming! üì¢ ¬© 2019 Tatjana Kecojevic\n"
},
{
	"uri": "/day1/",
	"title": "Module 1",
	"tags": [],
	"description": "",
	"content": " Module 1 RStudio IDE; R language; Data classification and summary statistics; Introduction to Visualization Principles In this module you will set up the working environment and pass the first big hurdle of importing data and you will learn how to do it in the proper way with a command in R. You will learn how to use RStudio IDE for R from its installation to RStudio customisation and files navigation. You will learn good habits and practice of workflow in an R project. Once you get comfortable with the RStudio working environment you will move on to mastering the key features of R language and you will be introduced to fundamental principles behind effective data visualisation. What you will learn:  Basic use of R/RStudio console Good habits for workflow Inputting and importing different data types R environment: record keeping Data classification Descriptive summary statistics Basic principles of effective data visualisation  ¬© 2019 Tatjana Kecojevic\n"
},
{
	"uri": "/general/syllabus/",
	"title": "Indicative Syllabus",
	"tags": [],
	"description": "",
	"content": " Day 1 RStudio IDE; R language; Data classification and summary statistics; Introduction to Visualization Principles\nIn this module you will set up the working environment and pass the first big hurdle of importing data and you will learn how to do it in the proper way with a command in R. You will learn how to use RStudio IDE for R from its installation to RStudio customisation and files navigation. You will learn good habits and practice of workflow in an R project. Once you get comfortable with the RStudio working environment you will move on to mastering the key features of R language and you will be introduced to fundamental principles behind effective data visualisation.\nWhat you will learn:\n Basic use of R/RStudio console Good habits for workflow Inputting and importing different data types R environment: record keeping Data classification Descriptive summary statistics Basic principles of effective data visualisation  Day 2 Data Wrangling and Visualising Data\nIn this module you will learn some of the fundamental techniques for data exploration and transformation through the use of the dplyr package. This tidy verse package helps make your exploration intuitive to write and easy to read. You will learn dplyr‚Äôs key verbs for data manipulation that will help you uncover and shape the information within the data that is easy to turn into informative plots. Through the use of grammar of graphics plotting concepts implemented in the ggplot2 package, you will be able create meaningful exploratory plots. You will develop understanding about the way in which you should be able to think about necessary data transformations and summaries that can lead to an informative visualisation. You will learn how to create static maps and interactive maps with geolocated data by using the most popular packages in the R GIS community: simple features and leaflet.\nWhat you will learn:\n dplyr‚Äôs key data manipulation verbs: select, mutate, filter, arrange and summarise/summarize to aggregate data by groups to chain data manipulation operations using the pipe operator to specify ggplot2 building blocks and combine them to create graphical display about the philosophy that guides ggplot2: grammatical elements (layers) and aesthetic mappings. visualising data with maps  Day 3 Automated Reporting and Introduction to Shiny\nIn this module you will learn how to turn your analyses into high quality documents and presentations with R Markdown. You will be designing reproducible reports by automating the reporting process, learning how to take a modern approach to telling your data story. With the knowledge from this lesson you will be able to create reports straight from your R code allowing you to document your analysis and its results as an HTML, pdf, slideshow or Microsoft Word document. After you gain fundamental knowledge of markdown and knitr, you will learn to create interactive web-graphics using Shiny R package.\nWhat you will learn:\n Authoring R Markdown Reports Embedding R Code knitr to compile dynamic R code LaTex to incorporate mathematical expressions create dynamic graphics using Shiny‚Äòs reactive features build and deploy Shiny app  ¬© 2019 Tatjana Kecojevic\n"
},
{
	"uri": "/day2/spatialda/",
	"title": "Spatial Data Analysis",
	"tags": [],
	"description": "",
	"content": "       R has a range of packages which provide functionality for handling spatial data and performing complex spatial analysis operations. Spatial data analysis is no longer reserved just for experts with expensive hardware and software. R has impressive geographic capabilities which anyone with the desire for exploration of geospatial data can use.\nBefore we get into geospatial mapping in R, let us introduce some basic ideas about spatial data.\nSpatial data comprises of:\n coordinates of the object the coordinates relate to a physical location on Earth: coordinate reference system (CRS)  There are two types of CRS:\nGeographical   specific locations on the surface is defined by three dimensional model of the Earth. longitude and latitude  Projected   A conversion of the three-dimensional grid onto a two-dimensional plane.  According to the storing technique, spatial data is one of two types:\nRaster data: composed of grid cells identified by row and column. The whole geographic area is divided into groups of individual cells, which represent an image (satellite images)\n Vector data are composed of points, polylines, and polygons. For example hospitals, houses etc. are represented by points, while rivers, roads,etc., are represented by polylines. Villages and towns are represented by polygons.\n  When doing spatial analysis you will also deal with attribute data, which contain the relevant information about the spatial data. The analysis will be based on attribute data attached to geospatial data. Such data could be:\n nominal ordinal interval data ratio data,  ie. attribute or measured type of data.\nStatic Maps: Shape File\nR has impressive geographic capabilities and can handle different kinds of spatial data file formats including geojson and KML. We will illustrate the use of the ESRI Shapefile format, which stores nontopological geometry and attribute information for the spatial features in a data set. A shapefile consists minimally of a main file, an index file, and a dBASE table.\n .shp - lists shape and vertices .shx - has index with offsets .dbf - relationship file between geometry and attributes (data)  To import a ESRI shapefile into R correctly, all three files must be present in the directory and named the same (except for the file extension).\nLet us start by reading a shape file of Serbian districts‚Äô boundaries avaliable from GADM maps and data.\nFirst, download the files we will need from the following GitHub repository: https://github.com/TanjaKec/gadm36_SRB_shp. Make sure you save the file into your R-Project working directory before you ask R to execute the following\n## If you don\u0026#39;t have sf installed yet, uncomment and run the line below #install.packeges(\u0026quot;sf\u0026quot;) library(ggplot2) library(sf) #pointed to the shape file serbia_location \u0026lt;- \u0026quot;gadm36_SRB_1.shp\u0026quot; #used the st_read() function to import it serbia_districts \u0026lt;- st_read(serbia_location) # take a look at the file View(serbia_districts) # plot the disstricts ggplot(serbia_districts) + geom_sf() This looks good üòÉ Next, we want to add some data to it and do some ‚Äòcolouring‚Äô. We will incorporate information about the Serbian polulation in 2017 given ‚ÄúSerbian_Pop.csv‚Äù file.\npopulation \u0026lt;- read.csv(\u0026quot;Serbian_Pop.csv\u0026quot;) View(population) library(dplyr) serbia_pop \u0026lt;- left_join(serbia_districts, population, by=c(\u0026quot;NAME_1\u0026quot; = \u0026quot;District\u0026quot;)) View(serbia_pop) ncol(serbia_districts) ncol(population) ncol(serbia_pop) names(serbia_pop) ggplot(serbia_pop) + geom_sf(aes(fill=total_pop)) + scale_fill_distiller(direction = 1, name = \u0026quot;Population\u0026quot;) + labs(title=\u0026quot;Population of Serbia for 2017\u0026quot;, caption=\u0026quot;Source: Statisticki Zavod SR\u0026quot;) Sometimes you might want to present regions in the plot as a set of multi-panel plots. Remember, you can use facet facility of ggplot library to do so.\nggplot(serbia_pop) + geom_sf(aes(fill = total_pop)) + scale_fill_distiller(direction = 1, name = \u0026quot;Population\u0026quot;) + labs(title=\u0026quot;Population of Serbia for 2017\u0026quot;, caption=\u0026quot;Source: Statisticki Zavod SR\u0026quot;) + facet_wrap(~NAME_1) Interactive Maps: leaflet\nLeaflet is one of the most popular open-source JavaScript libraries for interactive maps that was integrated into R, by a team of people from RStudio. We will illustrate how easy it is to plot a location map using the leaflet package, but you can learn more about this package from Leaflet for R website.\n## If you don\u0026#39;t have leaflet installed yet, uncomment and run the line below #install.packeges(\u0026quot;leaflet\u0026quot;) library(leaflet) # Initialize and assign us as the leaflet object us \u0026lt;- leaflet() %\u0026gt;% # add tiles to the leaflet object addTiles() %\u0026gt;% # setting the centre of the map and the zoom level setView(lng = 20.41215, lat = 45.93362, zoom = 15) %\u0026gt;% # add a popup marker addMarkers(lng = 20.4223, lat = 45.9320, popup = \u0026quot;\u0026lt;b\u0026gt;Ciao!\u0026lt;/b\u0026gt;\u0026lt;br\u0026gt;\u0026lt;a href=\u0026#39;https://www.mokrinhouse.com/\u0026#39;\u0026gt;Mokrin House! üòÄ\u0026lt;/a\u0026gt;\u0026quot;) us  {\"x\":{\"options\":{\"crs\":{\"crsClass\":\"L.CRS.EPSG3857\",\"code\":null,\"proj4def\":null,\"projectedBounds\":null,\"options\":{}}},\"calls\":[{\"method\":\"addTiles\",\"args\":[\"//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",null,null,{\"minZoom\":0,\"maxZoom\":18,\"tileSize\":256,\"subdomains\":\"abc\",\"errorTileUrl\":\"\",\"tms\":false,\"noWrap\":false,\"zoomOffset\":0,\"zoomReverse\":false,\"opacity\":1,\"zIndex\":1,\"detectRetina\":false,\"attribution\":\"\u0026copy; OpenStreetMap contributors, CC-BY-SA\"}]},{\"method\":\"addMarkers\",\"args\":[45.932,20.4223,null,null,null,{\"interactive\":true,\"draggable\":false,\"keyboard\":true,\"title\":\"\",\"alt\":\"\",\"zIndexOffset\":0,\"opacity\":1,\"riseOnHover\":false,\"riseOffset\":250},\"Ciao!\nMokrin House! üòÄ\",null,null,null,null,{\"interactive\":false,\"permanent\":false,\"direction\":\"auto\",\"opacity\":1,\"offset\":[0,0],\"textsize\":\"10px\",\"textOnly\":false,\"className\":\"\",\"sticky\":true},null]}],\"setView\":[[45.93362,20.41215],15,[]],\"limits\":{\"lat\":[45.932,45.932],\"lng\":[20.4223,20.4223]}},\"evals\":[],\"jsHooks\":[]} Here is an interesting website which introduces all kind of possibilities when creating maps with the ‚Äòleaflet‚Äô. You should check it out and explore further for yourself.\nFrom its original application as a statistical programming language, R has come a long way and has become very powerful in supporting spatial analysis. All R packages include vignettes with explanations of the functions‚Äô syntaxes and often very helpful mini-tutorials that illustrate the practical uses of the functions around related problems. CRAN Task View for Analysis of Spatial Data provides a list of available libraries in R for geographical mapping that are commonly used when undertaking spatial analysis and mapping projects in R.\n YOUR TURN üëá\nPractise by doing the following set of exercises:\nRead a shape file of Serbian districts‚Äô boundaries avaliable from GADM maps and data and plot population per square kilometre available form ‚ÄòSerbian_Pop.csv‚Äô used in the exercise.\n Create a map pointing out your favourite hang-out place using the leaflet package.\n  useful links:\nR for the analysis of spatial or spatio-temporal data (blog)\nGeocomputation with R: a book on geographic data analysis, visualisation and modelling.\nGADM maps and data\nCreating Interactive Spatial Maps in R Using Leaflet\nThematic Mapping with tmap\n¬© 2019 Tatjana Kecojevic\n"
},
{
	"uri": "/day2/",
	"title": "Module 2",
	"tags": [],
	"description": "",
	"content": " Module 2 Data Wrangling and Visualising Data In this module you will learn some of the fundamental techniques for data exploration and transformation through the use of the dplyr package. This tidy verse package helps make your exploration intuitive to write and easy to read. You will learn dplyr‚Äôs key verbs for data manipulation that will help you uncover and shape the information within the data that is easy to turn into informative plots. Through the use of grammar of graphics plotting concepts implemented in the ggplot2 package, you will be able create meaningful exploratory plots. You will develop understanding about the way in which you should be able to think about necessary data transformations and summaries that can lead to an informative visualisation. You will learn how to create static maps and interactive maps with geolocated data by using the most popular packages in the R GIS community: simple features and leaflet. What you will learn:  dplyr‚Äôs key data manipulation verbs: select, mutate, filter, arrange and summarise/summarize to aggregate data by groups to chain data manipulation operations using the pipe operator to specify ggplot2 building blocks and combine them to create graphical display about the philosophy that guides ggplot2: grammatical elements (layers) and aesthetic mappings. visualising data with maps  ¬© 2019 Tatjana Kecojevic\n"
},
{
	"uri": "/day1/rstudioide/",
	"title": "RStudio IDE",
	"tags": [],
	"description": "",
	"content": " RStudio\u0026rsquo;s layout When you open RStudio for the first time it will be split into three sections. Each section has its own tab with shortcuts for the relevant options available from the main RStudio menu.\n The tall red section on the left is the Console and that‚Äôs where you can type in R code to execute. This code is also called commands or functions.\n In the top right section, there‚Äôs the Environment tab where you can see the data you are currently working on. At first this section is empty because you have not loaded any data yet.\n In the bottom right section there are tabs to flip through the Files and folder structure of your computer (like in Finder or Explorer), Help information etc.\n  ü§ìüí°: You might find it useful bookmarking the link for RStudio IDE Cheet Sheet!\n ¬© 2019 Tatjana Kecojevic\n"
},
{
	"uri": "/day3/",
	"title": "Module 3",
	"tags": [],
	"description": "",
	"content": " Module 3 Automated Reporting and Introduction to Shiny In this module you will learn how to turn your analyses into high quality documents and presentations with R Markdown. You will be designing reproducible reports by automating the reporting process and learning how to take a modern approach to telling your data story. With the knowledge from this lesson you will be able to create reports straight from your R code allowing you to document your analysis and its results as an HTML, pdf, slideshow or Microsoft Word document. After you gain fundamental knowledge of markdown and knitr, you will learn to create interactive web-graphics using Shiny R package. What you will learn:  Authoring R Markdown Reports Embedding R Code knitr to compile dynamic R code LaTex to incorporate mathematical expressions create dynamic graphics using Shiny‚Äòs reactive features build and deploy Shiny app  ¬© 2019 Tatjana Kecojevic\n"
},
{
	"uri": "/day1/user/",
	"title": "How to use R?",
	"tags": [],
	"description": "",
	"content": " The RStudio window has multiple panes. RStudio IDE Cheet Sheet:\nTop Left - Code Editor: for creating scripts to run in pieces or as a whole (like this document!);\nBottom Left - R Console: you can type R commands and see output;\nTop Right - Environment: lists the objects that you create, such as data sets;\nBottom Right - Help: find out information about functions and packages. This same pane will have tabs for showing plots that you make, view apps and documents, show files in the folder, and packages used.\nR is a scripting language, which means that it is just like writing an essay, or a math proof. We write a script to do specific tasks, that we can run again and again, or give to someone else to run.\nYou should take note of the following facts:\n R is case-sensitive language which executes instructions directly; Commands are entered at prompt \u0026gt; Commands are separate statements which could be put the in a same line if separated by a semi-colon ; Code statements can be commented by using a # tag. You can comment in continuation of the command line or in a separate line.  üí° The best way to learn is by doing. Therefore, I would like you not to copy paste the commands showing in the black boxes, but to type it in your R console. It would be even better to type it as an R script, so that you can keep a history of it and return to it if you wish to do so.\n Let\u0026rsquo;s start using R!  Turn on your computer (if you haven\u0026rsquo;t already) Open RStudio Create a project for your work. On the very right side of the window is a small blue R, and a drop-down menu. Select New project, then New directory, navigate to the desktop, and name the project My_First_R. This will create a folder with this name on the desktop. This will be your workspace for this project. üòá  Setting up your working directory If you want to read or write files on your computer from and to a specific location you will need to set a working directory in R. To set the working directory in R to a specific folder on your computer you will use the following:\n# On a pc, you would set working directory like this setwd(\u0026quot;C:/Documents/MyR_Project\u0026quot;) # On a mac, you would set working directory like this setwd(\u0026quot;~/documents/MyR_Project\u0026quot;)  ü§ìüí°: Make sure you fully adopt the correct syntax in terms of slashes and quotation marks.\n Note that the current working directory is displayed by RStudio within the title region of the Console. You can also setup your working directory by:\n selecting the options available from RStudio\u0026rsquo;s main menu  Use the Tools | Change Working Dir\u0026hellip; menu (Session | Set Working Directory on a mac).\n selecting the option from within the Files pane  Use the More | Set As Working Directory menu\nHowever, you should always start a fresh project (File | New Project\u0026hellip;) that would automatically set up your working directory without having to point to it in your script file. You should read Project-oriented workflow üíªüî• article by Jenny Bryan to convince yourself that this would be a good habit you should adopt.\nR Packages \u0026ldquo;In R, the fundamental unit of shareable code is the package.\u0026rdquo; Hadley Wickham, R packages\nR packages are collections of functions code, data sets, documentation and tests developed by the community, that are mostly made available on the Comprehensive R Archive Network, or CRAN, the public clearing house for R packages. These packages are developed by experts in their fields and currently the CRAN package repository features over 14,000 of them. Many of the analyses that they offer are not even available in any of the standard data analysis software packages, which is one of the reasons that R is so successful.\nWhen you run R you will authomatically upload the package:base, which is the system library, i.e. the package where all standard functions are defined. The rest of the so called base packages contain the basic statistical routines. Assuming that you are connected to the internet, you can install a package using install.packages(). From the RStudio menu you can do it by sellecting Tools | Install Packages\u0026hellip; and typing the name of the desired package in the dialogue window.\nOnce installed, the package will appear in the list of available packages in your Packages pane. To use it you have to load it to the system‚Äôs search path by simply typing the name of the package as an argument of the library() function, or by checking the box next to its name from the Packages pane.\nüí°: Note that you can call the dialog window to install a package from Packages pane! Have you spotted the Install icon yet?\n Calculate in R To begin with, we can use R as a calculator. üòÅ\nIn your console type in 2 + 2. Note that you don‚Äôt have to type the equals sign and that the answer has [1] in front. The [1] indicates that there is only one number in the answer. If the answer contains more than one number it uses numbering like this to indicate where in the ‚Äògroup‚Äô of numbers each one is.\nYou see?! R is like a big calculator! üò≤\nArithmetic and Logical Operators R‚Äôs binary and logical operators will look very familiar to those who have some experience with programming.\nArithmetic Operators Logical Operators Try doing other math operations, like subtraction, multiplication, division, or square root and power operations. For example, try the following:\n2 + 5 3 - 2 18 / 6 4 * 7 (5 - 3)^2 / 4 9^(1/2) * 4  Reproducibility: Save your scripts The code you type and want to be executed can be saved in scripts and R Markdown files. Scripts ending with .R file extension and R Markdown files, which mixes both R code and Markdown code, end with .Rmd.\nü§ìüí°: The code that you write just for quick exploration can be written in the console. Code we want to reuse and show off later should be saved as a script.\n To create a new script go through the menu File | New File | R Script or through the green plus button on the top left.\nAny code we type in here can be run and executed in the console. Hitting the Run button at the top of the script window will run the line of code on which the cursor is sitting.\nTo run multiple lines of code, highlight them and click Run.\nüí°: Get into a habit of saving your scripts after you create them. Try to save them before running your code in case you write code that makes R crash which sometimes happens. üò£ \u0026amp;@#$!?#%\n https://www.rstudio.com/products/rstudio/features/\nR Objects R provides a number of specialised data structures we will refer to as objects. To refer to an object we use a symbol. You can assign any object using the assignment operator \u0026lt;-, which is a composite made up from ‚Äòless than‚Äô and ‚Äòminus‚Äô, with no space between them! Thus, we can create scalar constants, which we refer to as variables, and perform mathematical operations over them.\nx \u0026lt;- 5 y \u0026lt;- 6  You can use objects in calculation in exactly the same way as you have already seen numbers being used earlier:\nx + y  and you can store the results of the calculation done with the objects in another object:\nz \u0026lt;- x * y z  ü§ìüí° BUT, remember!!! Operator \u0026lt;- is a composite made up from ‚Äòless than‚Äô and ‚Äòminus‚Äô, with no space between them!!!!\n Try to type the following\nx\u0026lt; -5 y\u0026lt; -6  and see what happens.\nAfter you‚Äôve created some objects in R you can get a list of them using ls() function:\nls()  RStudio provides a very comfortable working environment and enables you to monitor your list of objects in the Environment pane window in the top right corner.\nBuilt-In Functions R is not like other conventional statistical packages like SAS, Minitab, SPSS, to name a few. It is more of a programming language designed for conducting data analyses. It comes with a vast number of ready-made blocks of code that will enable you to manipulate data, perform intricate mathematical calculations with data, carry out an array of statistical analysis ranging from simple to complex to extremely complex and it will facilitate the creation of fantastic graphs. These pre-made blocks of code are known as functions.\nR has all the standard mathematical functions that you might ever need: sin, cos, tan, asin, atan, log, log10, exp, abs, sqrt, factorial‚Ä¶ To use them, all you need to do is to type the function and put the name of the object (argument) you would like to use the function for in brackets.\nYou should try a few üòÉ\nsqrt(144) log10(8) log10(100) log(100) exp(1) pi sin(pi/2) abs(-7) factorial(3) exp(x) log(y, 2)  You can use expression as argument of a function:\nz \u0026lt;- x * y trunc(x^2 + z / y) log((100 * x - y^2) / z)  You can have nested functions and you can use functions in creating new objects:\nround(exp(x), 2) p \u0026lt;- abs(floor(log((100*x - y^2) / exp(z)))) p  ü§ìüí° To obtain a description of a function you need to type a question mark, ?, in front of the name of the function. You might find this particularly useful when you start applying more complicated functions, as help will often provide you not only with the detailed description of the function‚Äôs input/output arguments, but practical illustrative examples on how the function can be used and applied. You should try to ask R for help for lm() function (can you tell what it is used for?)\n Vectors When analysing data you are more likely to be working with lots of numbers/variables. It would be much more convenient to keep all of those numbers/variables as an object. Variables can be of a different type: logical, integer, double, string are some examples. Variables with one or more values of the same type are vectors. Hence, a variable with a single value (known to us as a scalar) is a vector of length 1. We can assign to vectors in many different ways:\n generated by R using the colon symbol (:) as a sequence generated operator or by using built in function rep() for replicating the given number for a given number of times.\nx \u0026lt;- 1:10 x  ## [1] 1 2 3 4 5 6 7 8 9 10  x \u0026lt;- rep(1,10) x  ## [1] 1 1 1 1 1 1 1 1 1 1  generated by the user by using concatenation function c that allows you to enter one number at a time\nx \u0026lt;- c(2, 6, 4, 2, 3, 7, 1, 5, 9, 8) x  ## [1] 2 6 4 2 3 7 1 5 9 8  created as a sequence of numbers. For example to generate a sequence of numbers from 1 to 10, with increments of 0.2 type\nseq(1,10,0.2)  ## [1] 1.0 1.2 1.4 1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6 ## [15] 3.8 4.0 4.2 4.4 4.6 4.8 5.0 5.2 5.4 5.6 5.8 6.0 6.2 6.4 ## [29] 6.6 6.8 7.0 7.2 7.4 7.6 7.8 8.0 8.2 8.4 8.6 8.8 9.0 9.2 ## [43] 9.4 9.6 9.8 10.0   üí°: R can easily perform arithmetic with vectors as it does with scalars. Thus, just as we can use those operators over the scalars we can use them when dealing with the vectors and/or a combination of both.\n x \u0026lt;- rep(1,10) y \u0026lt;- 1:10 x  ## [1] 1 1 1 1 1 1 1 1 1 1  y  ## [1] 1 2 3 4 5 6 7 8 9 10  c(x, y)  ## [1] 1 1 1 1 1 1 1 1 1 1 1 2 3 4 5 6 7 8 9 10  x + y  ## [1] 2 3 4 5 6 7 8 9 10 11  x + 2 * y  ## [1] 3 5 7 9 11 13 15 17 19 21  x^2 / y  ## [1] 1.0000000 0.5000000 0.3333333 0.2500000 0.2000000 0.1666667 0.1428571 ## [8] 0.1250000 0.1111111 0.1000000  z \u0026lt;- (x+y)/2 z  ## [1] 1.0 1.5 2.0 2.5 3.0 3.5 4.0 4.5 5.0 5.5  z \u0026lt;- c(z, rep(1, 3), c(100, 200, 300))+1 z  ## [1] 2.0 2.5 3.0 3.5 4.0 4.5 5.0 5.5 6.0 6.5 2.0 ## [12] 2.0 2.0 101.0 201.0 301.0  p \u0026lt;- 2.5 z*p  ## [1] 5.00 6.25 7.50 8.75 10.00 11.25 12.50 13.75 15.00 16.25 ## [11] 5.00 5.00 5.00 252.50 502.50 752.50  Accessing Vector‚Äôs Elements To access a specific element of a vector you would use index inside a single square bracket [] operator. The following shows how to obtain a vector member. The vector index is 1-based, thus use the index position 4 to access the fourth element.\nx \u0026lt;- c(9, 3, 7, 2, 9, 2, 1, 5, 4, 6) x  ## [1] 9 3 7 2 9 2 1 5 4 6  x[4]  ## [1] 2  üí°: In R you can evaluate functions over the entire vectors which helps to avoid looping.\n y \u0026lt;- c(4, 1, 0, 8, 1, x) max(y)  ## [1] 9  range(y)  ## [1] 0 9  mean(y)  ## [1] 4.133333  var(y)  ## [1] 9.409524  sort(y)  ## [1] 0 1 1 1 2 2 3 4 4 5 6 7 8 9 9  cumsum(y)  ## [1] 4 5 5 13 14 23 26 33 35 44 46 47 52 56 62  üí°: Note that missing values in R are represented by the symbol NA (not available) or NaN (not a number) for undefined mathematical operations.\n Here, NA would be shown if an index is out-of-range.\nz \u0026lt;- c(5, 8, 2) z[10]  ## [1] NA  You can also obtain a desirable selection of the elements of a vector by specifying a query within the index brackets []:\ny \u0026lt;- c(9, 3, 7, 2, 9, 2, 1, 5, 4, 6) y[y \u0026gt; 5]  ## [1] 9 7 9 6  y[y \u0026gt; 10]  ## numeric(0)  y[y != 2]  ## [1] 9 3 7 9 1 5 4 6  Matrices When data is arranged in two dimensions rather than one we have matrices. In R function matrix() creates matrices:\nma1 \u0026lt;- matrix(c(1, 0, -20, 0, 1, -15, 1, -1, 0), nrow = 3, ncol = 3, byrow = TRUE) ma1  ## [,1] [,2] [,3] ## [1,] 1 0 -20 ## [2,] 0 1 -15 ## [3,] 1 -1 0  dim(ma1)  ## [1] 3 3  The individual numbers in a matrix are called the elements of the matrix. Each element is uniquely defined by its particular row number and column number. To determine the dimensions of a matrix use function dim().\nAn element at the i-th row, j-th column of a matrix can be accessed by indexing inside square bracket operator [i, j]. The entire i-th row or entire j-th column of a matrix can be extracted as shown in the code below.\nma1 \u0026lt;- matrix(c(4, 10, 130, 0, 8, -7, 9, 11, -2, 7, -5, 4), nrow = 3, ncol = 4) ma1  ## [,1] [,2] [,3] [,4] ## [1,] 4 0 9 7 ## [2,] 10 8 11 -5 ## [3,] 130 -7 -2 4  ma1[2, 3]  ## [1] 11  ma1[1, ]  ## [1] 4 0 9 7  ma1[ , 4]  ## [1] 7 -5 4  Standard scalar algebra, which deals with operations on single numbers, has a set of well established rules for handling manipulations involving addition, subtraction, multiplication and division. In a broadly similar fashion, a set of rules has been developed to enable us to manipulate matrices. However, introducing those rules is beyond the scope of this course, but they are nicely covered on the www.statisticshowto.com website.\nYOUR TURN üëá Practise by doing the following set of exercises:\n1) Create vectors called x1 and x2, where vector x1 consists of numbers: 1, 4, 7, 9, 11, 12, 13, 15 and 18 and vector x2 of numbers: 1, 1, 1, 2, 2, 2, 3, 3, 3.\n2) Subtract x2 from x1.\n3) Create a new vector called x3 by combining vectors x1 and x2.\n4) Calculate mean and variance of x3.\n5) Calculate medians for the three vectors.\n6) Create a matrix called m1 with the following elements: matrix(c(1, 5, 9, 2, 6, 10, 3, 7, 11, 4, 8, 12), nrow = 4, ncol = 3, byrow = TRUE)\n7) Use a subscript to find the 2-nd number in vector x1 and x2 and element in the 2-nd raw and 3-rd column in matrix m1.\n8) Add the 5-th number in vector x1 to the element in matrix m1 which is in 1-st raw and 1-st column.\n9) Calculate the mean of all numbers in x3 that are less than 13.\n¬© 2019 Tatjana Kecojevic\n"
},
{
	"uri": "/day1/statsconcepts/",
	"title": "Basic Stats Concepts",
	"tags": [],
	"description": "",
	"content": " In this section you will be introduced to a set of concepts that enable data to be explored with the objective\n of summarising and understanding the main features of the variables contained within the data and to investigate the nature of any linkages between the variables that may exist  The starting point is to understand what data is.\n What is the population? Why do we use samples?  Can you provide a formal definition of the population and the sample? üòÅ\nThe population is the set of all people/objects of interest in the study being undertaken.\nIn statistical terms the whole data set is called the population. This represents ‚ÄúPerfect Information‚Äù, however in practice it is often impossible to enumerate the whole population. The analyst therefore takes a sample drawn from the population and uses this information to make judgements (inferences) about the population.\nClearly if the results of any analysis are based on a sample drawn from the population, then if the sample is going to have any validity, then the sample should be chosen in a way that is fair and reflects the structure of the population.\nThe process of sampling to obtain a representative sample is a large area of statistical study. The simplest model of a representative sample is a \u0026ldquo;random sample\u0026rdquo;:\nA sample chosen in such a way that each item in the population has an equal chance of being included in the sample.\nAs soon as sample data is used, the information contained within the sample is ‚ÄúImperfect‚Äù and depends on the particular sample chosen. The key problem is to use this sample data to draw valid conclusions about the population with the knowledge of and taking into account the \u0026lsquo;error due to sampling\u0026rsquo;.\nThe importance of working with representative samples should be seriously considered; a good way to appreciate this importance is to see the consequences of using unrepresentative samples. A book by Darrell Huff called How to Lie with Statistics, published by Penguin contains several anecdotes of unrepresentative samples and the consequences of treating them as representative.\nData Analysis Using Sample Data Usually the data will have been collected in response to some perceived problem, in the hope of being able to glean some pointers from this data that will be helpful in the analysis of the problem. Data is commonly presented to the data analyst in this way with a request to analyse the data.\nBefore attempting to analyse any data, the analyst should:\ni) Make sure that the problem under investigation is clearly understood, and that the objectives of the investigation have been clearly specified.\nii) Before any analysis is considered the analyst should make sure that the individual variables making up the data set are clearly understood.\nThe analyst must understand the data before attempting any analysis.\nIn the summary you should ask yourself:\ni) Do I understand the problem under investigation and are the objectives of the investigation clear? The only way to obtain this information is to ask questions, and keep asking questions until satisfactory answers have been obtained.\nii) Do I understand exactly what each variable is measuring/recording?\nDescribing Variables A starting point is to examine the characteristics of each individual variable in the data set.\nThe way to proceed depends upon the type of variable being examined.\nClassification of variable types\nThe variables can be one of two broad types:\n Attribute variables: are variables that have their outcomes described in terms of their characteristics or attributes.  gender days in a week    A common way of handling attribute data is to give it a numerical code. Hence, we often refer to them as coded variables.\n Measured variables: are variables that have their outcomes taken from a numerical scale; the resulting outcome is expressed in numerical terms.\n weight age   There are two types of measured variables, a measured variable that is measured on some continuous scale of measurement, e.g. a person‚Äôs height. This type of measured variable is called a continuous variable. The other type of measured variable is a discrete variable. This results from counting; for example \u0026lsquo;the number of passengers on a given flight\u0026rsquo;.\nThe Concept of Statistical Distribution The concept of statistical distribution is central to statistical analysis.\nThis concept relates to the population and conceptually assumes that we have perfect information, the exact composition of the population is known.\nThe ideas and concepts for examining population data provide a framework for the way of examining data obtained from a sample. The Data Analyst classifies the variables as either attribute or measured and examines the statistical distribution of the particular sample variable from the sample data.\nFor an attribute variable the number of occurrences of each attribute is obtained, and for a measured variable the sample descriptive statistics describing the centre, width and symmetry of the distribution are calculated.\nattribute: measured: What does the distribution show? For an attribute variable it is very simple. We observe the frequency of occurrence of each level of the attribute variable as shown in the barplot above.\nFor a measured variable the area under the curve from one value to another measures the relative proportion of the population having the outcome value in that range.\nA statistical distribution for a measured variable can be summarised using three key descriptions:\n the centre of the distribution; the width of the distribution; the symmetry of the distribution  The common measures of the centre of a distribution are the Mean (arithmetic average) and the Median. The median value of the variable is defined to be the particular value of the variable such that half the data values are less than the median value and half are greater.\nThe common measures of the width of a distribution are the Standard Deviation and the Inter-Quartile Range. The Standard Deviation is the square root of the average squared deviation from the mean. Ultimately the standard deviation is a relative measure of spread (width), the larger the standard deviation the wider the distribution. The inter-quartile range is the range over which the middle 50% of the data values varies.\nBy analogy with the median it is possible to define the quartiles:\n Q1 is the value of the variable that divides the distribution 25% to the left and 75% to the right. Q2 is the value of the variable that divides the distribution 50% to the left and 50% to the right. This is the median by definition. Q3 is the value of the variable that divides the distribution 75% to the left and 25% to the right. The inter-quartile range is the value Q3 - Q1.  The diagram below shows this pictorially:\nü§ìüí° Conventionally the mean and standard deviation are given together as one pair of measures of location and spread, and the median and inter-quartile range as another pair of measures.\nThere are a number of measures of symmetry; the simplest way to measure symmetry is to compare the mean and the median. For a perfectly symmetric distribution the mean and the median will be exactly the same. This idea leads to the definition of Pearson\u0026rsquo;s coefficient of Skewness as:\nPearson's coefficient of Skewness = 3(mean - median) / standard deviation\nAn alternative measure of Skewness is the Quartile Measure of Skewness defined as:\nQuartile Measure of Skewness = [(Q1 - Q3) - (Q2 - Q1)]/(Q3 - Q1)\nImportant Key Points:  What is Data? Variables Two types of variable:\n an attribute variable a measured variable  The concept of Statistical Distribution:\n As applied to an attribute variable As applied to a measured variable  Descriptive Statistics for a measured variable:\n Measures of Centre  Mean, Median  Measures of Width:  Standard Deviation Inter-Quartile Range    The descriptive statistics provide a numerical description of the key parameters of the distribution of a measured sample variable.\nInvestigating the relationship between variables One of the key steps required of the Data Analyst is to investigate the relationship between variables. This requires a further classification of the variables contained within the data, as either a response variable or an explanatory variable.\nA response variable is a variable that measures either directly or indirectly the objectives of the analysis.\nAn explanatory variable is a variable that may influence the response variable.\nBivariate Relationships In general there are four different combinations of type of Response Variable and type of Explanatory Variable. These four combinations are shown below:\nThe starting point for any investigation of the connections between a response variable and an explanatory variable starts with examining the variables, and defining the response variable, or response variables, and the explanatory variables.\nü§ìüí°: In large empirical investigations there may be a number of objectives and a number of response variables.\nThe method for investigating the connections between a response variable and an explanatory variable depends on the type of variables. The methodology is different for combination as shown in the box above, and applying an inappropriate method causes problems. üí°‚ö°Ô∏èüò©\nDA Methodology The first step is to have a clear idea of what is meant by a connection between the response variable and the explanatory variable. This will provide a framework for defining a Data-Analysis process to explore the connection between the two variables, and will utilise the ideas previously developed.\nThe next step is to use some simple sample descriptive statistics to have a first look at the nature of the link between the variables. This simple approach may allow the analyst to conclude that on the basis of the sample information there is strong evidence to support a link, or there is no evidence of a link, or that the simple approach is inconclusive and further more sophisticated data analysis is required. This step is called the Initial Data Analysis and sometimes abbreviated to IDA.\nIf the Initial Data Analysis suggests that Further Data Analysis (FDA) is required, then this step seeks one of two conclusions:\ni) The sample evidence is consistent with there being no link between the response variable and the explanatory variable.\nor\nii) The sample evidence is consistent with there being a link between the response variable and the explanatory variable.\nThe outcome of the analysis is one of the two alternatives given above. If the outcome is that there is no evidence of a connection, then no further action is required by the analyst since the analysis is now complete.\nIf however the outcome of the analysis is that there is evidence of a connection, then the nature of the connection between the two variables needs to be described.\nü§ìüí° The Data-Analysis Methodology described above seeks to find the answer to the following key question:\nOn the basis of the sample data is there evidence of a connection between the response variable and the explanatory variable?\nThe outcome is one of two conclusions\ni) No evidence of a relationship\nii) Yes there is evidence of a relationship, in which case the link needs to be described.\nThis process can be represented diagrammatically as:\nFor each of the four data analysis situations given, the data analyst needs to know what constitutes the Initial Data Analysis (I.D.A.) and how to undertake and interpret the I.D.A. If Further Data Analysis is required the analyst needs to know how to undertake and interpret the Further Data Analysis.\nMeasured Vs Attribute(2-levels) There is a relationship between a measured response and an attribute explanatory variable if the average value of the response is dependent on the level of the attribute explanatory variable.\nGiven a measured response and an attribute explanatory variable with two levels, \u0026ldquo;red\u0026rdquo; \u0026amp; \u0026ldquo;blue\u0026rdquo;. If the statistical distribution of the response variable for attribute level \u0026ldquo;red\u0026rdquo; and attribute level \u0026ldquo;blue\u0026rdquo; are exactly the same then the level of the attribute variable has no influence on the value response, there is no relationship.\nThis can be illustrated as below:\nMeasured Vs Measured The first step is to have a clear idea of what is meant by a connection between a measured response variable and a measured explanatory variable. Imagine a population under study consisting of a very large number of population members, and on each population member two measurements are made, the value of Y the response variable and the value of X the explanatory variable. For the whole population a graph of Y against X could be plotted conceptually.\nIf the graph shows a perfect line, then there is quite clearly a link between Y and X. If the value of X is known, the exact value of Y can be read off the graph. This is an unlikely scenario in the data-analysis context, because this kind of relationship is a deterministic relationship. Deterministic means that if the value of X is known then the value of Y can be precisely determined from the relationship between Y and X. What is more likely to happen is that other variables may also have an influence on Y.\nIf the nature of the link between Y and X is under investigation then this could be represented as:\nY = f(X) + effect of all other variables [effect of all other variables is commonly abbreviated to e]\nConsidered the model:\nY = f(X) + e [e is the effect of all other variables]\nThe influence on the response variable Y can be thought of as being made up of two components:\ni) the component of Y that is explained by changes in the value of X, [the part due to changes in X through f(X)]\nii) the component of Y that is explained by changes in the other factors. [the part not explained by changes in X]\nOr in more abbreviated forms the \u0026lsquo;Variation in Y Explained by changes X\u0026rsquo; or \u0026lsquo;Explained Variation\u0026rsquo; and the \u0026lsquo;Variation in Y not explained by changes in X\u0026rsquo; or the \u0026lsquo;Unexplained Variation\u0026rsquo;.\nIn conclusion, the Total Variation in Y is made up of the two components:\n the \u0026lsquo;Changes in Y Explained by changes in X\u0026rsquo; and\n the \u0026lsquo;Changes in Y not explained by changes in X\u0026rsquo;  Which may be written as:\n`'The Total Variation in Y' = 'Explained Variation' + 'Unexplained Variation'`  ü§ìüí° The discussion started with the following idea:\nY = f(X) + e\nAnd to quantify the strength of the link the influence on Y was broken down into two components:\n'The Total Variation in Y' = 'Explained Variation' + 'Unexplained Variation'  This presents two issues: A: Can a model of the link be made? B. Can \u0026lsquo;The Total Variation in Y\u0026rsquo;, \u0026lsquo;Explained Variation\u0026rsquo; and the \u0026lsquo;Unexplained Variation\u0026rsquo; be measured?\nWhat do these quantities tell us?\nMaybe we can observe a proportion of the \u0026lsquo;Explained Variation in Y\u0026rsquo; over the \u0026lsquo;Total Variation in Y\u0026rsquo;. This ratio is always on the scale 0 to 1, but by convention is usually expressed as a percentage so is regarded as on the scale 0 to 100%. It is called \u0026lsquo;R Squared\u0026rsquo; and interpretation of this ratio is as follows:\nR_sq: 0% (no link) \u0026lt;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash; 50% (Statistical Link) \u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026gt; 100% (Perfect Link)\nThe definition and interpretation of R_sq is a very important tool in the data analyst\u0026rsquo;s tool kit for tracking connections between a measured response variable and a measured explanatory variable.\nWe can put those ideas into our DA Methodology frameworks as shown below.\nü§ìüí° Note that you will hardly ever be in the situation in which R_sq would be so close to zero that would make you conclude that on the basis of the sample evidence used in IDA it is possible to conclude that there is no relationship between the two variables. If R_sq value is very small (for example around 2%) this would need to be further tested to conclude if it is statistically significant based on the sample evidence by applying FDA.\nFurther Data Analysis If the \u0026lsquo;Initial Data Analysis\u0026lsquo; is inconclusive then \u0026lsquo;Further Data Analysis\u0026lsquo; is required.\nThe \u0026lsquo;Further Data Analysis\u0026rsquo; is a procedure that enables a decision to be made, based on the sample evidence, as to one of two outcomes:\n- There is no relationship - There is a relationship\nThese statistical procedures are called hypothesis tests, which essentially provide a decision rule for choosing between one of the two outcomes: \u0026ldquo;There is no relationship\u0026rdquo; or \u0026ldquo;There is a relationship\u0026rdquo; based on the sample evidence.\nAll hypothesis tests are carried out in four stages:\n Stage 1: Specifying the hypotheses.\n Stage 2: Defining the test parameters and the decision rule.\n Stage 3: Examining the sample evidence.\n Stage 4: The conclusions.\n  Statistical Models used in FDA  Measured Response v Attribute Explanatory Variable with exactly two levels:\n t-test  Measured Response v Attribute Explanatory Variable with more than two levels:\n One-Way ANOVA   Measured Response v Measured Explanatory Variable\n Simple Regression Model   Measured Response v Measured Explanatory Variables\n Multifactor Regression Model  Attribute Response v Attribute Explanatory Variable\n Chi-Square Test of Independence   YOUR TURN üëá Make sure you can answer the following questions:\n1) What are the underlying ideas that enable a relationship between two variables to be investigated?\n2) What is the purpose of summary statistics?\n3) What is the data analysis methodology for exploring the relationship between:\ni) a measured response variable and an attribute explanatory variable?\ni) a measured response variable and a measured explanatory variable?\n¬© 2019 Tatjana Kecojevic\n"
},
{
	"uri": "/day1/datatypes/",
	"title": "Data Types",
	"tags": [],
	"description": "",
	"content": " The examples we have used in the \u0026lsquo;How to Use R\u0026rsquo; section are all dealing with numbers (quantitative numerical data). Those of you familiar with programming will know that numerical objects can be classified as real, integer, double or complex. To check if an object is numeric and what type it is, you can use the mode() and class() functions respectively.\nLet us go back into our R project and type the following into the open script file and run the code.üòÉ\nx \u0026lt;- 1:10 mode(x)  ## [1] \u0026quot;numeric\u0026quot;  class(x)  ## [1] \u0026quot;integer\u0026quot;  In R to enter strings of characters as objects you need to enter them using quote marks around them. By default it expects all inputs to be numeric and unless you use quote marks around the strings you wish to enter, it will consider them as numbers and subsequently will return an error message.\nx \u0026lt;- c(\u0026quot;UK\u0026quot;, \u0026quot;Spain\u0026quot;, \u0026quot;Serbia\u0026quot;, \u0026quot;France\u0026quot;, \u0026quot;Germany\u0026quot;, \u0026quot;Italy\u0026quot;) mode(x)  ## [1] \u0026quot;character\u0026quot;  It is common in statistical data to have attributes also known as categorical variables. In R such variables should be specified as factors. Attribute variable has a set of levels indicating possible outcomes. Hence, to deal with x as an attribute variable with five levels we need to make it a factor in R.\nx \u0026lt;- c(\u0026quot;UK\u0026quot;, \u0026quot;Spain\u0026quot;, \u0026quot;Serbia\u0026quot;, \u0026quot;France\u0026quot;, \u0026quot;Germany\u0026quot;, \u0026quot;Italy\u0026quot;) x \u0026lt;- factor(x) x  ## [1] UK Spain Serbia France Germany Italy ## Levels: France Germany Italy Serbia Spain UK  üí°: Note that R codes the factor levels in their alphabetical order. However, attribute variables are usually coded and you would usually enter them as such.\n quality \u0026lt;- factor(c(3, 3, 4, 2, 2, 4, 0, 1)) levels(quality)  ## [1] \u0026quot;0\u0026quot; \u0026quot;1\u0026quot; \u0026quot;2\u0026quot; \u0026quot;3\u0026quot; \u0026quot;4\u0026quot;  quality  ## [1] 3 3 4 2 2 4 0 1 ## Levels: 0 1 2 3 4  You might need to deal from time to time with logical data type. This is when something is recorded as TRUE or FALSE. It is most likely that you would use this data type when checking what type of data the variable is that you are dealing with. For example\nx \u0026lt;- c(\u0026quot;UK\u0026quot;, \u0026quot;Spain\u0026quot;, \u0026quot;Serbia\u0026quot;, \u0026quot;France\u0026quot;, \u0026quot;Germany\u0026quot;, \u0026quot;Italy\u0026quot;) is.numeric(x)  ## [1] FALSE  is.factor(x)  ## [1] FALSE  Data Frames Statistical data usually consists of several vectors of equal length and of various types that resemble a table. Those vectors are interconnected across so that data in the same position comes from the same experimental unit, ie. observation. R uses data frame for storing this kind of data table and it is regarded as primary data structure.\nLet us consider a study of share prices of companies from three different business sectors. As part of the study a random sample (n=15) of companies was selected and the following data was collected:\nshare_price \u0026lt;- c(880, 862, 850, 840, 838, 799, 783, 777, 767, 746, 692, 689, 683, 661, 658) profit \u0026lt;- c(161.3, 170.5, 140.7, 115.7, 107.9, 135.2, 142.7, 114.9, 110.4, 98.9, 90.2, 80.6, 85.4, 91.7, 137.8) sector \u0026lt;- factor(c(3, 3, 3, 3, 3, 2, 2, 2, 2, 2, 1, 1, 1, + 1, 1)) # 1:IT, 2:Finance, 3:Pharmaceutical # share_price  ## [1] 880 862 850 840 838 799 783 777 767 746 692 689 683 661 658  profit  ## [1] 161.3 170.5 140.7 115.7 107.9 135.2 142.7 114.9 110.4 98.9 90.2 ## [12] 80.6 85.4 91.7 137.8  sector  ## [1] 3 3 3 3 3 2 2 2 2 2 1 1 1 1 1 ## Levels: 1 2 3  Rather than keeping this data as a set of individual vectors in R, it would be better to keep whole data as a single object, i.e. data frame.\nshare.data \u0026lt;- data.frame(share_price, profit, sector) share.data  Individual vectors from the data frame can be accessed using $ symbol:\nshare.data$sector  Now, as we have mastered the basics let us learn how to access existing data from R.\n¬© 2019 Tatjana Kecojevic\n"
},
{
	"uri": "/day1/importexport/",
	"title": "Import Data to R",
	"tags": [],
	"description": "",
	"content": " It‚Äôs the first big hurdle to dealing with data in R.\nYou are most likely to have looked at, organised and examined your data files in Excel.\nOpening data in R is fairly simply, but organising it for analysis might take some thought and consideration. You\u0026rsquo;ll guess that it is possible to use the File | Import Dataset menu option in RStudio to import your data (to learn more see Importing Data with RStudio), however we‚Äôre going to do it the proper way with a command.\nR can import all types of data:\n (Tab, Blank space) Delimited Text CSV files Excel files JSON SAS STATA MiniTab SPSS\u0026hellip;  In this section we will show you how to access most commonly used data types. Once you start playing with the data and wrangling it in the way it suits you for your analytical manipulations you might find it interesting to explore the options for writing data. Here, we are not going to show you how to do it, but rather focus on basic read data functionality in R.\nthe R base The simplest data form is a text file. Text files can be read by any computer operating system and by almost all different kind of statistical programs. Saving data as a text file makes your data highly accessible. If you have a text data file you wish to use, you can easily import it with the R base functions read.table()\nThis reads a file in table format and creates a data frame from it\n# Read tabular data into R df_txt \u0026lt;- read.table(file_name.txt, header = FALSE)  There are many packages that let R import all types of data, and we will start by focusing on CSV files as they are the most frequent type.\nComma separated files are the most common way to save spreadsheets that don‚Äôt require a licenced, usually not free program to open. Importing CSV is part of base R and you can use read.csv() function to do so.\nread.csv() Let us go to https://data.gov.rs/ Serbian open data portal. In particular, let us try to access Kvalitet vazduha 2017: pm2.5_2017.csv and import this data to R.\nWe are not going to download it onto our local computers, but rather we will import it to R directly from the web using the link provided.\ndf_csv \u0026lt;- read.csv(\u0026quot;http://data.sepa.gov.rs/dataset/ca463c44-fbfa-4de9-9a75-790995bf2830/resource/62983880-6fcd-4c65-b57c-fd4de5c367c8/download/pm2.5_2017.csv\u0026quot;, stringsAsFactors = FALSE) head(df_csv, 10)  ## Datum Nis_IZJZ.Nis ## 1 1.1.2017 132.04583 ## 2 2.1.2017 124.95417 ## 3 3.1.2017 79.92500 ## 4 4.1.2017 107.22500 ## 5 5.1.2017 42.14583 ## 6 6.1.2017 18.12500 ## 7 7.1.2017 25.14167 ## 8 8.1.2017 67.86667 ## 9 9.1.2017 41.41667 ## 10 10.1.2017 55.75417  The other way is to download it and to save it to your working directory.\nLet us download \u0026ldquo;Kvalitet vazduha 2017-SO2: 2017-SO2.csv\u0026rdquo; Make sure you save the file into your R-Project working directory before you ask R to execute the following\ndf_csv \u0026lt;- read.csv(\u0026quot;2017-so2.csv\u0026quot;, stringsAsFactors = FALSE, fileEncoding = \u0026quot;latin1\u0026quot;)  Run the above code again, but remove stringsAsFactors argument from the read.csv function or set it to TRUE. Can you tell the difference between now and before? Why do you think we had to use fileEncoding argument?\n What do you think about this dataset? ü§î\nUsing readr::read_csv() readr is a package that reads rectangular data more quickly than base R read.cdv(). Another difference from the read.csv() function is that it assumes characters are strings and not factors by default.\nJust so you can see how easy it is to use other packages for importing data into R, the code below illustrates the use of read_csv().\n## If you don't have readr installed yet, uncomment and run the line below # install.packages(\u0026quot;readr\u0026quot;) library(readr) df_csv \u0026lt;- read_csv(\u0026quot;air_quality_by_station.csv\u0026quot;) df_csv  Check the readr::read_delim() function for more efficient delimited data file reading.\n Importing Excel files with readxl Importing Excel data files is not straightforward as it might contain multiple sheets. We will focus on using the readxl package as it is the most efficient so far.\nTo access the data from an Excel sheet you can‚Äôt just copy and paste the URL for the file. You have to download the file first.\n Let us download an Excel data file from data.gov.rs about traffic accidents –ü–æ–¥–∞—Ü–∏ –æ —Å–∞–æ–±—Ä–∞—õ–∞—ò–Ω–∏–º –Ω–µ–∑–≥–æ–¥–∞–º–∞ –¥–æ 31.08.2019. –≥–æ–¥–∏–Ω–µ –∑–∞ —Ç–µ—Ä–∏—Ç–æ—Ä–∏—ò—É —Å–≤–∏—Ö –ü–û–õ–ò–¶–ò–à–°–ö–ò–• –£–ü–†–ê–í–ê –∏ –û–ü–®–¢–ò–ù–ê.\nIf you are unable to open the file in Excel to examine how many sheets the file has, try to read the file in R accessing the first one by specifying it in the read_excel() function as required. As previously, make sure you save the file into your R-Project working directory before you ask R to execute the following:\n## If you don't have readxl installed yet, uncomment the line below and run it #install.packages(\u0026quot;readxl\u0026quot;) library(readxl) df_xl \u0026lt;- read_excel(\u0026quot;nez-opendata-20199-20190925.xlsx\u0026quot;, sheet = 1)  What do you think?\nPeople like to make their Excel spreadsheets look \u0026lsquo;pretty\u0026rsquo; with \u0026lsquo;fancy\u0026rsquo; formatting, which could create difficulty when reading them in R.\n Explore the arguments of the read_excel() function, such as the skip argument through which you can specify a minimum number of rows to skip before reading anything.\nImporting data using jsonlite When accessing JSON file in R using the jsonlite package you need to point to the file by providing the local path if the file is downloaded or by the URL from where it could be accessed.\n## If you don't have readxl installed yet, uncomment the line below and run it #install.packages(\u0026quot;jsonlite\u0026quot;) library(jsonlite) my_url \u0026lt;-\u0026quot;https://data.gov.rs/sr/datasets/r/41c2fe91-4ea1-4a64-b33c-183665ea6ab3\u0026quot; polen \u0026lt;- fromJSON(my_url)  Check the structure of the polen! üò∞\nstr(polen)  ## List of 4 ## $ count : int 26132 ## $ next : chr \u0026quot;http://polen.sepa.gov.rs/api/opendata/pollens/?page=2\u0026quot; ## $ previous: NULL ## $ results :'data.frame':\t500 obs. of 4 variables: ## ..$ id : int [1:500] 539 805 1078 1351 1624 1897 2170 2686 2965 3238 ... ## ..$ location : int [1:500] 12 3 4 20 5 10 14 13 17 9 ... ## ..$ date : chr [1:500] \u0026quot;2016-02-01\u0026quot; \u0026quot;2016-02-01\u0026quot; \u0026quot;2016-02-01\u0026quot; \u0026quot;2016-02-01\u0026quot; ... ## ..$ concentrations:List of 500 ## .. ..$ : int [1:4] 3002 3003 3004 3005 ## .. ..$ : int [1:3] 4649 4650 4651 ## .. ..$ : int [1:3] 6126 6127 6128 ## .. ..$ : int(0) ## .. ..$ : int(0) ## .. ..$ : int [1:2] 10767 10768 ## .. ..$ : int [1:3] 12370 12371 12372 ## .. ..$ : int [1:2] 15518 15519 ## .. ..$ : int [1:4] 17422 17423 17424 17425 ## .. ..$ : int [1:2] 19339 19340 ## .. ..$ : int [1:4] 21104 21105 21106 21107 ## .. ..$ : int [1:3] 24123 24124 24125 ## .. ..$ : int [1:2] 26010 26011 ## .. ..$ : int 29460 ## .. ..$ : int [1:2] 1480 1481 ## .. ..$ : int [1:4] 3006 3007 3008 3009 ## .. ..$ : int 4652 ## .. ..$ : int [1:2] 6129 6130 ## .. ..$ : int(0) ## .. ..$ : int(0) ## .. ..$ : int [1:4] 10769 10770 10771 10772 ## .. ..$ : int [1:3] 12373 12374 12375 ## .. ..$ : int [1:5] 15520 15521 15522 15523 15524 ## .. ..$ : int [1:5] 17426 17427 17428 17429 17430 ## .. ..$ : int [1:3] 19341 19342 19343 ## .. ..$ : int [1:3] 21108 21109 21110 ## .. ..$ : int [1:3] 24126 24127 24128 ## .. ..$ : int [1:3] 26012 26013 26014 ## .. ..$ : int [1:3] 29461 29462 29463 ## .. ..$ : int [1:5] 1482 1483 1484 1485 1486 ## .. ..$ : int [1:3] 3010 3011 3012 ## .. ..$ : int [1:3] 4653 4654 4655 ## .. ..$ : int [1:2] 6131 6132 ## .. ..$ : int(0) ## .. ..$ : int(0) ## .. ..$ : int [1:3] 10773 10774 10775 ## .. ..$ : int [1:3] 12376 12377 12378 ## .. ..$ : int [1:3] 15525 15526 15527 ## .. ..$ : int [1:4] 17431 17432 17433 17434 ## .. ..$ : int [1:3] 19344 19345 19346 ## .. ..$ : int [1:5] 21111 21112 21113 21114 21115 ## .. ..$ : int [1:6] 24129 24130 24131 24132 24133 24134 ## .. ..$ : int [1:4] 26015 26016 26017 26018 ## .. ..$ : int [1:3] 29464 29465 29466 ## .. ..$ : int [1:3] 1487 1488 1489 ## .. ..$ : int 3013 ## .. ..$ : int [1:3] 4656 4657 4658 ## .. ..$ : int [1:3] 6133 6134 6135 ## .. ..$ : int(0) ## .. ..$ : int 9357 ## .. ..$ : int [1:5] 10776 10777 10778 10779 10780 ## .. ..$ : int [1:3] 12379 12380 12381 ## .. ..$ : int [1:3] 15528 15529 15530 ## .. ..$ : int [1:2] 17435 17436 ## .. ..$ : int [1:3] 19347 19348 19349 ## .. ..$ : int [1:2] 21116 21117 ## .. ..$ : int [1:3] 24135 24136 24137 ## .. ..$ : int [1:3] 26019 26020 26021 ## .. ..$ : int [1:3] 29467 29468 29469 ## .. ..$ : int [1:3] 1490 1491 1492 ## .. ..$ : int 3014 ## .. ..$ : int [1:2] 4659 4660 ## .. ..$ : int [1:3] 6136 6137 6138 ## .. ..$ : int(0) ## .. ..$ : int 9358 ## .. ..$ : int [1:3] 10781 10782 10783 ## .. ..$ : int [1:3] 12382 12383 12384 ## .. ..$ : int 15531 ## .. ..$ : int [1:3] 17437 17438 17439 ## .. ..$ : int [1:2] 19350 19351 ## .. ..$ : int [1:5] 21118 21119 21120 21121 21122 ## .. ..$ : int [1:3] 24138 24139 24140 ## .. ..$ : int [1:3] 26022 26023 26024 ## .. ..$ : int [1:4] 29470 29471 29472 29473 ## .. ..$ : int [1:3] 1493 1494 1495 ## .. ..$ : int [1:2] 3015 3016 ## .. ..$ : int 4661 ## .. ..$ : int [1:3] 6139 6140 6141 ## .. ..$ : int 7747 ## .. ..$ : int 9359 ## .. ..$ : int [1:3] 10784 10785 10786 ## .. ..$ : int [1:3] 12385 12386 12387 ## .. ..$ : int [1:3] 15532 15533 15534 ## .. ..$ : int [1:3] 17440 17441 17442 ## .. ..$ : int [1:3] 19352 19353 19354 ## .. ..$ : int [1:3] 21123 21124 21125 ## .. ..$ : int [1:4] 24141 24142 24143 24144 ## .. ..$ : int [1:3] 26025 26026 26027 ## .. ..$ : int [1:3] 29474 29475 29476 ## .. ..$ : int [1:5] 1496 1497 1498 1499 1500 ## .. ..$ : int [1:2] 3017 3018 ## .. ..$ : int 4662 ## .. ..$ : int [1:3] 6142 6143 6144 ## .. ..$ : int(0) ## .. ..$ : int [1:2] 9360 9361 ## .. ..$ : int [1:3] 10787 10788 10789 ## .. ..$ : int 12388 ## .. ..$ : int [1:5] 15535 15536 15537 15538 15539 ## .. ..$ : int [1:3] 17443 17444 17445 ## .. .. [list output truncated]  names(polen)  ## [1] \u0026quot;count\u0026quot; \u0026quot;next\u0026quot; \u0026quot;previous\u0026quot; \u0026quot;results\u0026quot;  Note that the polen$results is a data frame with a list concentrations inside as its element.\nOuch! üò≥ JSON files are not very neat üò± They are more than often nested, chained -\u0026gt; you‚Äôve got it: Very Messy! üò´ So, we will leave it there. üò¨ If you do need to learn more about reading JSON files in R you can explore the functionality of the jsonlite package further by reading Getting started with JSON and jsonlite. Blog post Working with JSON data in very simple way by Kan Nishida provides a great example of how this data format can be used in R.\nOther data formats To speed up the reading process of txt, csv data files you can use the data.table::fread() function. You should only pass to the function the name of the data file you want to import, and fread() will try to work out the appropriate data structure. Check out this blog post Getting Data From An Online Source for some more ideas.\nYou can use R with appropriate packages to access other data formats. The haven package provides functions for importing SAS, SPSS and Stata file formats or you can use the foreign package for MiniTab portable worksheet data files. Try to look through the help section of the packages you\u0026rsquo;ve been introduced to and discover other options.\nYOUR TURN üëá 1) See if you can find data from https://data.gov.rs/ about a topic you‚Äôre interested in.\n2) Have a look at this data set: saobracaj. Think about the questions you can answer based on this data.\n¬© 2019 Tatjana Kecojevic\n"
},
{
	"uri": "/day1/principlesvisualisation/",
	"title": "Introduction to Visualisation Principles",
	"tags": [],
	"description": "",
	"content": " Designed to enable: exploration, discovery, communication Graphical methods are commonly used for exploratory data analysis. Boxplots, scatterplot matrices, nonparametric smoothers and tree diagrams are just some of the most used graphical tools for data exploration. This part of the course will provide practical recommendations for choosing the best chart or graph type for creating good and clear graphics that will serve the purpose of communicating the key information\n to the intended audience and for publication to help readers answer the questions your graphic is showing to understand it easily without getting bewildered\n  Graphical Forms::Encoding Good and clear graphics rely most of all on reliable data. Thus, the first principle of an effective visualisation is that it represents reliable information. The type of information that needs to be communicated and displayed will direct the choice of the most appropriate type of data encoding to make relevant patterns become noticeable. It is therefore important to understand the problem you wish to communicate and the type of the data you need for its communication from the statistical perspective, ie. is it measured, categorical (ordinal or nominal), time (temporal dimension) or geographical location (spatial dimensions) in case of spatiotemporal data?\n\nVisual encoding of a data set depends on the number and characteristics of the available attributes ie. variables and on the analytical problem in question. Alberto Cairo in his blog The Functional Art provides an effective list of the graphic forms used to encode data depending on the function of the display. The figure shows ranking of the elementary perception task according to how well they can be perceived based on the ground breaking work of Cleveland and McGill published in the paper of JASA while working in the famous AT\u0026amp;T Bell Labs. The above figure illustrates the order in which graphical forms could be placed based on the accuracy of the conclusions which readers can draw about the given data from them. If, for example, the goal of the graphic is to facilitate precise comparisons, Alberto in his book The Functional Art provides an effective illustration of superiorities between possible choices of the graphical forms that could be used.\nThere is not a specific methodology that is develop for choosing the most appropriate ways of encoding data. You never know if a visual form will work until you give it a try. It mostly depends on what your the attributes are that you using in order to reveal that special something from the data. However, there are some useful guidelines made by a few authors which I would recommend you to check:\n The Data Visualisation Catalogue by Severino Ribecca Chart Chooser by Depict Data Studio and Visual Vocabulary by by the Financial Times Visual Journalism Team  as a starting bench mark when creating a graph.\nOften, the graphical display of the information created for answering a specific question will invite further exploration, which is why it is important to present them in a clear and truthful manner. We should not forget that the sole purpose of data analysis, thus visualisation, is to inform and to improve knowledge. So yes, we should consider very carefully the aesthetic appeal and design of the graph we create that could effectively engage with the audience, but should do so by focusing above all on the accuracy, depth and clarity of the information it is conveying.\nIdentify encoding Let us play the game ‚ÄòIdentify encoding!‚Äô. Converse with each other and make a list of graphical forms and the type of encodings used in each of the following visualisation:\n1) Visualisation: DESI\n2) Visualisation: DESI Report 2019 - Human Capital\n3) Visualisation: DESI Report 2019 - Human Capital\n4) Click on Visualisation: Gapminder Bubble Chart\n\n5) Click on Visualisation: Gapminder World Population\n\n6) Click on Visualisation: Periodic Table\n\nClick on this Visualisation too: A Periodic Table of visualisation methods\n7) Click on Visualisation: Clinton Email Network\n\nThe Complexity: effective visual design The most important thing to remember when creating a graph is to present data clearly and truthfully. The choice of the scale on the chart should show the differences in the data and communicate the range of values accurately. Any statistical summary displayed on the chart should be presented clearly with the source of information and statistics used to calculate the more complex figures.\nHere are some most obvious issues you need to pay attention to when designing an effective graph:\n1) Choose a scale for your charts that strikes a balance between demonstrating trends clearly and conveying the scale of the original dataset. The chart does not need to begin at 0 in order to establish a meaningful baseline if another logical starting point exists. Dual-Scaled Axes in Graphs\nThe choice of scale should allow for better accuracy that the reader can draw about the information displayed on the chart.\nHave a look at What to consider when creating a line chart blog post by Lisa Charlotte Rost, where you will also find links to some more interesting posts on this topic.\n 2) Emphasise what\u0026rsquo;s important: Identify the key information you are trying to communicate and think of the most effective format to do so, as graphs can help you to express complex data in a simple format. Displaying an important item in a different colour is an easy way to draw attention to a point-making value.\nSometimes it might be effective to pull the key information from a chart into separate graphs and to present them in paralell.\nKeep in mind that the information from the visual display should not be confusing.\n 3) Declutter the chart ‚Äì keep it simple as effective visualisations allow the data to tell the story. Graphs would not look better by piling on the information and bombarding us with fancy ‚Äòviz‚Äô skills. Effective data visualisation is a delicate balancing act between form and function. Keep the focus on the important points by reducing unnecessary visual stimuli.\nIntegrate text with the graphs only if necessary to help better convey information displayed through the graph.\nIn this presentation Alberto Cairo illustrates the importance of a good choice of the format used to visually explain the main story: \u0026ldquo;How Music Preferences Have Changed in Two Decades\u0026rdquo;.\nWhen creating a data visualisation, think about the specific information that you want your data to convey, or the outcome that you want to achieve. Keep it simple and remove any unnecessary elements that could convolute your central point. Bombarding an audience with too much data will likely leave them doubtful and confused.\n Going beyond the obvious When creating a graphical display, focus on best practices and explore your own personal style. Build a foundation of exploring and summarising a set of numbers and identifying the key feature within the data that will help you in presenting your visual data story.\nDual Axis Charts There is a belief that charts with two different y-axes make it hard for most people to read and to make the right conclusions about two data sets. Having a secondary y-axis often creates confusion as it is not clear which data to read against which axis. The main danger of dual axis charts is that they‚Äôre not intuitive. There are many people who are opposing them as they often create confusion and assume correlation when there is none. Stephen Few however, has written a well-argued paper in which he carefully presents issues one needs to take into consideration when wanting to use them. You need to judge for yourself if you are going to be a fan or not of dual y-axis charts. It should certainly depend on your judgment of its suitability for conveying your graphical story telling as with any other graphical format.\nInteractive Charts Interactivity allows the viewer to engage with data in ways impossible by static graphs. One of the key benefits of interactive data visualisations is their flexibility in allowing further manipulation and exploration of the data used. By enabling concentrated focus using the ‚Äòzoom in‚Äô facility, it makes discovery of the seemingly small facts in a big story easy and engaging, as users are invited to pose additional questions and come up with new findings. Interactive graphical story telling is a rich and powerful tool for displaying data features as it enables viewers to dive into the data story as much or as little as they wish, depending on their level of interest.\n\nGraphical Displays in R: where to start? R is a great tool for data visualisation not just for people who want to develop understanding about their data using graphs, but anyone who needs to produce high-quality and effective graphics to enhance their reports, web pages, or other documents.\nTake a look at The R Graph Gallery that provides an extensive collection of charts made in R together with the code.\nThere are several clasic books on drawing graphics in R, such as:\n ggplot2 [Wickham, 2009] Lattice [Sarkar, 2008] and R Graphics [Murrell, 2011].  If you would like to get more serious and systematic in your learning about graphical data analysis with R, a book by Antony Unwin, Graphical Data Analysis with R, is a great place to start. The R code for every graphic and analysis in the book is available from the book\u0026rsquo;s website.\nData Visualisation with R by Rob Kabacoff is another good book about graphical displays in R. It gives a systematic overview for creating graphical displays in R starting with a brief introduction to R, followed by a comprehensive list of graphical forms commonly used in statistical modelling, geospatial mapping and finishing with interactive plots.\nBack in 2012 there was a very engaging academic discussion between Andrew Gelman, Anthony Unwin, Stephen Few, Paul Murrell, Hadley Wickham and Robert Kosara about visualisation and infographics. Robert compiles all the discussion posts in this blog post that makes riveting reading.\nPractise! Gaining experience in interpreting graphics and drawing your own data displays is the most effective way of becoming a data wiz.\n YOUR TURN üëá 1) Go to the portals with open data (global: gapminder, national: office of national statistics, or local) and see if you can find data that is interesting for you to explore. Write down what interesting features you are expecting to see and suggest types of the visualistions that could be used to illustrate them.\n¬© 2019 Tatjana Kecojevic\n"
},
{
	"uri": "/categories/",
	"title": "Categories",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "/post/2015-07-23-r-rmarkdown/",
	"title": "Hello R Markdown",
	"tags": ["R Markdown", "plot", "regression"],
	"description": "",
	"content": " R Markdown This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see http://rmarkdown.rstudio.com.\nYou can embed an R code chunk like this:\nsummary(cars) ## speed dist ## Min. : 4.0 Min. : 2.00 ## 1st Qu.:12.0 1st Qu.: 26.00 ## Median :15.0 Median : 36.00 ## Mean :15.4 Mean : 42.98 ## 3rd Qu.:19.0 3rd Qu.: 56.00 ## Max. :25.0 Max. :120.00 fit \u0026lt;- lm(dist ~ speed, data = cars) fit ## ## Call: ## lm(formula = dist ~ speed, data = cars) ## ## Coefficients: ## (Intercept) speed ## -17.579 3.932  Including Plots You can also embed plots. See Figure 1 for example:\npar(mar = c(0, 1, 0, 1)) pie( c(280, 60, 20), c(\u0026#39;Sky\u0026#39;, \u0026#39;Sunny side of pyramid\u0026#39;, \u0026#39;Shady side of pyramid\u0026#39;), col = c(\u0026#39;#0292D8\u0026#39;, \u0026#39;#F7EA39\u0026#39;, \u0026#39;#C4B632\u0026#39;), init.angle = -50, border = NA )  Figure 1: A fancy pie chart.   "
},
{
	"uri": "/",
	"title": "Learn Theme for Hugo",
	"tags": [],
	"description": "",
	"content": " Hugo learn theme Hugo-theme-learn is a theme for Hugo, a fast and modern static website engine written in Go. Where Hugo is often used for blogs, this multilingual-ready theme is fully designed for documentation.\nThis theme is a partial porting of the Learn theme of Grav, a modern flat-file CMS written in PHP.\nLearn theme works with a page tree structure to organize content : All contents are pages, which belong to other pages. [read more about this]()\n Main features  [Automatic Search]() [Multilingual mode]() Unlimited menu levels Automatic next/prev buttons to navigate through menu entries [Image resizing, shadow\u0026hellip;]() [Attachments files]() [List child pages]() [Mermaid diagram]() (flowchart, sequence, gantt) [Customizable look and feel and themes variants]() [Buttons](), [Tip/Note/Info/Warning boxes](), [Expand]()  Contribute to this documentation Feel free to update this content, just click the Edit this page link displayed on top right of each page, and pullrequest it\nYour modification will be deployed automatically when merged.\n Documentation website This current documentation has been statically generated with Hugo with a simple command : hugo -t hugo-theme-learn \u0026ndash; source code is available here at GitHub\nAutomatically published and hosted thanks to Netlify. Read more about Automated HUGO deployments with Netlify\n "
},
{
	"uri": "/tags/plot/",
	"title": "plot",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "/post/",
	"title": "Posts",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "/categories/r/",
	"title": "R",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "/tags/r-markdown/",
	"title": "R Markdown",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "/tags/regression/",
	"title": "regression",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "/tags/",
	"title": "Tags",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "/day2/spatialda/images/mokrin/",
	"title": "",
	"tags": [],
	"description": "",
	"content": "  (function() { // If window.HTMLWidgets is already defined, then use it; otherwise create a // new object. This allows preceding code to set options that affect the // initialization process (though none currently exist). window.HTMLWidgets = window.HTMLWidgets || {}; // See if we're running in a viewer pane. If not, we're in a web browser. var viewerMode = window.HTMLWidgets.viewerMode = /\\bviewer_pane=1\\b/.test(window.location); // See if we're running in Shiny mode. If not, it's a static document. // Note that static widgets can appear in both Shiny and static modes, but // obviously, Shiny widgets can only appear in Shiny apps/documents. var shinyMode = window.HTMLWidgets.shinyMode = typeof(window.Shiny) !== \"undefined\" \u0026\u0026 !!window.Shiny.outputBindings; // We can't count on jQuery being available, so we implement our own // version if necessary. function querySelectorAll(scope, selector) { if (typeof(jQuery) !== \"undefined\" \u0026\u0026 scope instanceof jQuery) { return scope.find(selector); } if (scope.querySelectorAll) { return scope.querySelectorAll(selector); } } function asArray(value) { if (value === null) return []; if ($.isArray(value)) return value; return [value]; } // Implement jQuery's extend function extend(target /*, ... */) { if (arguments.length == 1) { return target; } for (var i = 1; i \").addClass(errClass); errorSpan.text(err.message); $el.after(errorSpan); } } else if (display === \"block\") { // If block, add an error just after the el, set visibility:none on the // el, and position the error to be on top of the el. // Mark it with a unique ID and CSS class so we can remove it later. $el.css(\"visibility\", \"hidden\"); if (err.message !== \"\") { var errorDiv = $(\"\").addClass(errClass).css(\"position\", \"absolute\") .css(\"top\", el.offsetTop) .css(\"left\", el.offsetLeft) // setting width can push out the page size, forcing otherwise // unnecessary scrollbars to appear and making it impossible for // the element to shrink; so use max-width instead .css(\"maxWidth\", el.offsetWidth) .css(\"height\", el.offsetHeight); errorDiv.text(err.message); $el.after(errorDiv); // Really dumb way to keep the size/position of the error in sync with // the parent element as the window is resized or whatever. var intId = setInterval(function() { if (!errorDiv[0].parentElement) { clearInterval(intId); return; } errorDiv .css(\"top\", el.offsetTop) .css(\"left\", el.offsetLeft) .css(\"maxWidth\", el.offsetWidth) .css(\"height\", el.offsetHeight); }, 500); } } }, clearError: function(el) { var $el = $(el); var display = $el.data(\"restore-display-mode\"); $el.data(\"restore-display-mode\", null); if (display === \"inline\" || display === \"inline-block\") { if (display) $el.css(\"display\", display); $(el.nextSibling).filter(\".htmlwidgets-error\").remove(); } else if (display === \"block\"){ $el.css(\"visibility\", \"inherit\"); $(el.nextSibling).filter(\".htmlwidgets-error\").remove(); } }, sizing: {} }; // Called by widget bindings to register a new type of widget. The definition // object can contain the following properties: // - name (required) - A string indicating the binding name, which will be // used by default as the CSS classname to look for. // - initialize (optional) - A function(el) that will be called once per // widget element; if a value is returned, it will be passed as the third // value to renderValue. // - renderValue (required) - A function(el, data, initValue) that will be // called with data. Static contexts will cause this to be called once per // element; Shiny apps will cause this to be called multiple times per // element, as the data changes. window.HTMLWidgets.widget = function(definition) { if (!definition.name) { throw new Error(\"Widget must have a name\"); } if (!definition.type) { throw new Error(\"Widget must have a type\"); } // Currently we only support output widgets if (definition.type !== \"output\") { throw new Error(\"Unrecognized widget type '\" + definition.type + \"'\"); } // TODO: Verify that .name is a valid CSS classname // Support new-style instance-bound definitions. Old-style class-bound // definitions have one widget \"object\" per widget per type/class of // widget; the renderValue and resize methods on such widget objects // take el and instance arguments, because the widget object can't // store them. New-style instance-bound definitions have one widget // object per widget instance; the definition that's passed in doesn't // provide renderValue or resize methods at all, just the single method // factory(el, width, height) // which returns an object that has renderValue(x) and resize(w, h). // This enables a far more natural programming style for the widget // author, who can store per-instance state using either OO-style // instance fields or functional-style closure variables (I guess this // is in contrast to what can only be called C-style pseudo-OO which is // what we required before). if (definition.factory) { definition = createLegacyDefinitionAdapter(definition); } if (!definition.renderValue) { throw new Error(\"Widget must have a renderValue function\"); } // For static rendering (non-Shiny), use a simple widget registration // scheme. We also use this scheme for Shiny apps/documents that also // contain static widgets. window.HTMLWidgets.widgets = window.HTMLWidgets.widgets || []; // Merge defaults into the definition; don't mutate the original definition. var staticBinding = extend({}, defaults, definition); overrideMethod(staticBinding, \"find\", function(superfunc) { return function(scope) { var results = superfunc(scope); // Filter out Shiny outputs, we only want the static kind return filterByClass(results, \"html-widget-output\", false); }; }); window.HTMLWidgets.widgets.push(staticBinding); if (shinyMode) { // Shiny is running. Register the definition with an output binding. // The definition itself will not be the output binding, instead // we will make an output binding object that delegates to the // definition. This is because we foolishly used the same method // name (renderValue) for htmlwidgets definition and Shiny bindings // but they actually have quite different semantics (the Shiny // bindings receive data that includes lots of metadata that it // strips off before calling htmlwidgets renderValue). We can't // just ignore the difference because in some widgets it's helpful // to call this.renderValue() from inside of resize(), and if // we're not delegating, then that call will go to the Shiny // version instead of the htmlwidgets version. // Merge defaults with definition, without mutating either. var bindingDef = extend({}, defaults, definition); // This object will be our actual Shiny binding. var shinyBinding = new Shiny.OutputBinding(); // With a few exceptions, we'll want to simply use the bindingDef's // version of methods if they are available, otherwise fall back to // Shiny's defaults. NOTE: If Shiny's output bindings gain additional // methods in the future, and we want them to be overrideable by // HTMLWidget binding definitions, then we'll need to add them to this // list. delegateMethod(shinyBinding, bindingDef, \"getId\"); delegateMethod(shinyBinding, bindingDef, \"onValueChange\"); delegateMethod(shinyBinding, bindingDef, \"onValueError\"); delegateMethod(shinyBinding, bindingDef, \"renderError\"); delegateMethod(shinyBinding, bindingDef, \"clearError\"); delegateMethod(shinyBinding, bindingDef, \"showProgress\"); // The find, renderValue, and resize are handled differently, because we // want to actually decorate the behavior of the bindingDef methods. shinyBinding.find = function(scope) { var results = bindingDef.find(scope); // Only return elements that are Shiny outputs, not static ones var dynamicResults = results.filter(\".html-widget-output\"); // It's possible that whatever caused Shiny to think there might be // new dynamic outputs, also caused there to be new static outputs. // Since there might be lots of different htmlwidgets bindings, we // schedule execution for later--no need to staticRender multiple // times. if (results.length !== dynamicResults.length) scheduleStaticRender(); return dynamicResults; }; // Wrap renderValue to handle initialization, which unfortunately isn't // supported natively by Shiny at the time of this writing. shinyBinding.renderValue = function(el, data) { Shiny.renderDependencies(data.deps); // Resolve strings marked as javascript literals to objects if (!(data.evals instanceof Array)) data.evals = [data.evals]; for (var i = 0; data.evals \u0026\u0026 i = 3; } /* / Shiny 1.4 bumped jQuery from 1.x to 3.x which means jQuery's / on-ready handler (i.e., $(fn)) is now asyncronous (i.e., it now / really means $(setTimeout(fn)). / https://jquery.com/upgrade-guide/3.0/#breaking-change-document-ready-handlers-are-now-asynchronous / / Since Shiny uses $() to schedule initShiny, shiny=1.4 calls initShiny / one tick later than it did before, which means staticRender() is / called renderValue() earlier than (advanced) widget authors might be expecting. / https://github.com/rstudio/shiny/issues/2630 / / For a concrete example, leaflet has some methods (e.g., updateBounds) / which reference Shiny methods registered in initShiny (e.g., setInputValue). / Since leaflet is privy to this life-cycle, it knows to use setTimeout() to / delay execution of those methods (until Shiny methods are ready) / https://github.com/rstudio/leaflet/blob/18ec981/javascript/src/index.js#L266-L268 / / Ideally widget authors wouldn't need to use this setTimeout() hack that / leaflet uses to call Shiny methods on a staticRender(). In the long run, / the logic initShiny should be broken up so that method registration happens / right away, but binding happens later. */ function maybeStaticRenderLater() { if (shinyMode \u0026\u0026 has_jQuery3()) { window.jQuery(window.HTMLWidgets.staticRender); } else { window.HTMLWidgets.staticRender(); } } if (document.addEventListener) { document.addEventListener(\"DOMContentLoaded\", function() { document.removeEventListener(\"DOMContentLoaded\", arguments.callee, false); maybeStaticRenderLater(); }, false); } else if (document.attachEvent) { document.attachEvent(\"onreadystatechange\", function() { if (document.readyState === \"complete\") { document.detachEvent(\"onreadystatechange\", arguments.callee); maybeStaticRenderLater(); } }); } window.HTMLWidgets.getAttachmentUrl = function(depname, key) { // If no key, default to the first item if (typeof(key) === \"undefined\") key = 1; var link = document.getElementById(depname + \"-\" + key + \"-attachment\"); if (!link) { throw new Error(\"Attachment \" + depname + \"/\" + key + \" not found in document\"); } return link.getAttribute(\"href\"); }; window.HTMLWidgets.dataframeToD3 = function(df) { var names = []; var length; for (var name in df) { if (df.hasOwnProperty(name)) names.push(name); if (typeof(df[name]) !== \"object\" || typeof(df[name].length) === \"undefined\") { throw new Error(\"All fields must be arrays\"); } else if (typeof(length) !== \"undefined\" \u0026\u0026 length !== df[name].length) { throw new Error(\"All fields must be arrays of the same length\"); } length = df[name].length; } var results = []; var item; for (var row = 0; row /*! jQuery v1.12.4 | (c) jQuery Foundation | jquery.org/license */ !function(a,b){\"object\"==typeof module\u0026\u0026\"object\"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error(\"jQuery requires a window with a document\");return b(a)}:b(a)}(\"undefined\"!=typeof window?window:this,function(a,b){var c=[],d=a.document,e=c.slice,f=c.concat,g=c.push,h=c.indexOf,i={},j=i.toString,k=i.hasOwnProperty,l={},m=\"1.12.4\",n=function(a,b){return new n.fn.init(a,b)},o=/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g,p=/^-ms-/,q=/-([\\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:\"\",length:0,toArray:function(){return e.call(this)},get:function(a){return null!=a?0a?this[a+this.length]:this[a]:e.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a){return n.each(this,a)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(e.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0a?b:0);return this.pushStack(c=0\u0026\u0026bc?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:g,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for(\"boolean\"==typeof g\u0026\u0026(j=g,g=arguments[h]||{},h++),\"object\"==typeof g||n.isFunction(g)||(g={}),h===i\u0026\u0026(g=this,h--);ih;h++)if(null!=(e=arguments[h]))for(d in e)a=g[d],c=e[d],g!==c\u0026\u0026(j\u0026\u0026c\u0026\u0026(n.isPlainObject(c)||(b=n.isArray(c)))?(b?(b=!1,f=a\u0026\u0026n.isArray(a)?a:[]):f=a\u0026\u0026n.isPlainObject(a)?a:{},g[d]=n.extend(j,f,c)):void 0!==c\u0026\u0026(g[d]=c));return g},n.extend({expando:\"jQuery\"+(m+Math.random()).replace(/\\D/g,\"\"),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return\"function\"===n.type(a)},isArray:Array.isArray||function(a){return\"array\"===n.type(a)},isWindow:function(a){return null!=a\u0026\u0026a==a.window},isNumeric:function(a){var b=a\u0026\u0026a.toString();return!n.isArray(a)\u0026\u0026b-parseFloat(b)+1=0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},isPlainObject:function(a){var b;if(!a||\"object\"!==n.type(a)||a.nodeType||n.isWindow(a))return!1;try{if(a.constructor\u0026\u0026!k.call(a,\"constructor\")\u0026\u0026!k.call(a.constructor.prototype,\"isPrototypeOf\"))return!1}catch(c){return!1}if(!l.ownFirst)for(b in a)return k.call(a,b);for(b in a);return void 0===b||k.call(a,b)},type:function(a){return null==a?a+\"\":\"object\"==typeof a||\"function\"==typeof a?i[j.call(a)]||\"object\":typeof a},globalEval:function(b){b\u0026\u0026n.trim(b)\u0026\u0026(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(p,\"ms-\").replace(q,r)},nodeName:function(a,b){return a.nodeName\u0026\u0026a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b){var c,d=0;if(s(a)){for(c=a.length;cd;d++)if(b.call(a[d],d,a[d])===!1)break}else for(d in a)if(b.call(a[d],d,a[d])===!1)break;return a},trim:function(a){return null==a?\"\":(a+\"\").replace(o,\"\")},makeArray:function(a,b){var c=b||[];return null!=a\u0026\u0026(s(Object(a))?n.merge(c,\"string\"==typeof a?[a]:a):g.call(c,a)),c},inArray:function(a,b,c){var d;if(b){if(h)return h.call(b,a,c);for(d=b.length,c=c?0c?Math.max(0,d+c):c:0;dc;c++)if(c in b\u0026\u0026b[c]===a)return c}return-1},merge:function(a,b){var c=+b.length,d=0,e=a.length;while(cd)a[e++]=b[d++];if(c!==c)while(void 0!==b[d])a[e++]=b[d++];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;gf;f++)d=!b(a[f],f),d!==h\u0026\u0026e.push(a[f]);return e},map:function(a,b,c){var d,e,g=0,h=[];if(s(a))for(d=a.length;dg;g++)e=b(a[g],g,c),null!=e\u0026\u0026h.push(e);else for(g in a)e=b(a[g],g,c),null!=e\u0026\u0026h.push(e);return f.apply([],h)},guid:1,proxy:function(a,b){var c,d,f;return\"string\"==typeof b\u0026\u0026(f=a[b],b=a,a=f),n.isFunction(a)?(c=e.call(arguments,2),d=function(){return a.apply(b||this,c.concat(e.call(arguments)))},d.guid=a.guid=a.guid||n.guid++,d):void 0},now:function(){return+new Date},support:l}),\"function\"==typeof Symbol\u0026\u0026(n.fn[Symbol.iterator]=c[Symbol.iterator]),n.each(\"Boolean Number String Function Array Date RegExp Object Error Symbol\".split(\" \"),function(a,b){i[\"[object \"+b+\"]\"]=b.toLowerCase()});function s(a){var b=!!a\u0026\u0026\"length\"in a\u0026\u0026a.length,c=n.type(a);return\"function\"===c||n.isWindow(a)?!1:\"array\"===c||0===b||\"number\"==typeof b\u0026\u0026b0\u0026\u0026b-1 in a}var t=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=\"sizzle\"+1*new Date,v=a.document,w=0,x=0,y=ga(),z=ga(),A=ga(),B=function(a,b){return a===b\u0026\u0026(l=!0),0},C=1c;c++)if(a[c]===b)return c;return-1},K=\"checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped\",L=\"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",M=\"(?:\\\\\\\\.|[\\\\w-]|[^\\\\x00-\\\\xa0])+\",N=\"\\\\[\"+L+\"*(\"+M+\")(?:\"+L+\"*([*^$|!~]?=)\"+L+\"*(?:'((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\"|(\"+M+\"))|)\"+L+\"*\\\\]\",O=\":(\"+M+\")(?:\\\\((('((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\")|((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\"+N+\")*)|.*)\\\\)|)\",P=new RegExp(L+\"+\",\"g\"),Q=new RegExp(\"^\"+L+\"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\"+L+\"+$\",\"g\"),R=new RegExp(\"^\"+L+\"*,\"+L+\"*\"),S=new RegExp(\"^\"+L+\"*([+~]|\"+L+\")\"+L+\"*\"),T=new RegExp(\"=\"+L+\"*([^\\\\]'\\\"]*?)\"+L+\"*\\\\]\",\"g\"),U=new RegExp(O),V=new RegExp(\"^\"+M+\"$\"),W={ID:new RegExp(\"^#(\"+M+\")\"),CLASS:new RegExp(\"^\\\\.(\"+M+\")\"),TAG:new RegExp(\"^(\"+M+\"|[*])\"),ATTR:new RegExp(\"^\"+N),PSEUDO:new RegExp(\"^\"+O),CHILD:new RegExp(\"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\"+L+\"*(even|odd|(([+-]|)(\\\\d*)n|)\"+L+\"*(?:([+-]|)\"+L+\"*(\\\\d+)|))\"+L+\"*\\\\)|)\",\"i\"),bool:new RegExp(\"^(?:\"+K+\")$\",\"i\"),needsContext:new RegExp(\"^\"+L+\"*[+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\"+L+\"*((?:-\\\\d)?\\\\d*)\"+L+\"*\\\\)|)(?=[^-]|$)\",\"i\")},X=/^(?:input|select|textarea|button)$/i,Y=/^h\\d$/i,Z=/^[^{]+\\{\\s*\\[native \\w/,$=/^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,_=/[+~]/,aa=/'|\\\\/g,ba=new RegExp(\"\\\\\\\\([\\\\da-f]{1,6}\"+L+\"?|(\"+L+\")|.)\",\"ig\"),ca=function(a,b,c){var d=\"0x\"+b-65536;return d!==d||c?b:0d?String.fromCharCode(d+65536):String.fromCharCode(d10|55296,1023\u0026d|56320)},da=function(){m()};try{H.apply(E=I.call(v.childNodes),v.childNodes),E[v.childNodes.length].nodeType}catch(ea){H={apply:E.length?function(a,b){G.apply(a,I.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function fa(a,b,d,e){var f,h,j,k,l,o,r,s,w=b\u0026\u0026b.ownerDocument,x=b?b.nodeType:9;if(d=d||[],\"string\"!=typeof a||!a||1!==x\u0026\u00269!==x\u0026\u002611!==x)return d;if(!e\u0026\u0026((b?b.ownerDocument||b:v)!==n\u0026\u0026m(b),b=b||n,p)){if(11!==x\u0026\u0026(o=$.exec(a)))if(f=o[1]){if(9===x){if(!(j=b.getElementById(f)))return d;if(j.id===f)return d.push(j),d}else if(w\u0026\u0026(j=w.getElementById(f))\u0026\u0026t(b,j)\u0026\u0026j.id===f)return d.push(j),d}else{if(o[2])return H.apply(d,b.getElementsByTagName(a)),d;if((f=o[3])\u0026\u0026c.getElementsByClassName\u0026\u0026b.getElementsByClassName)return H.apply(d,b.getElementsByClassName(f)),d}if(c.qsa\u0026\u0026!A[a+\" \"]\u0026\u0026(!q||!q.test(a))){if(1!==x)w=b,s=a;else if(\"object\"!==b.nodeName.toLowerCase()){(k=b.getAttribute(\"id\"))?k=k.replace(aa,\"\\\\$\u0026\"):b.setAttribute(\"id\",k=u),r=g(a),h=r.length,l=V.test(k)?\"#\"+k:\"[id='\"+k+\"']\";while(h--)r[h]=l+\" \"+qa(r[h]);s=r.join(\",\"),w=_.test(a)\u0026\u0026oa(b.parentNode)||b}if(s)try{return H.apply(d,w.querySelectorAll(s)),d}catch(y){}finally{k===u\u0026\u0026b.removeAttribute(\"id\")}}}return i(a.replace(Q,\"$1\"),b,d,e)}function ga(){var a=[];function b(c,e){return a.push(c+\" \")d.cacheLength\u0026\u0026delete b[a.shift()],b[c+\" \"]=e}return b}function ha(a){return a[u]=!0,a}function ia(a){var b=n.createElement(\"div\");try{return!!a(b)}catch(c){return!1}finally{b.parentNode\u0026\u0026b.parentNode.removeChild(b),b=null}}function ja(a,b){var c=a.split(\"|\"),e=c.length;while(e--)d.attrHandle[c[e]]=b}function ka(a,b){var c=b\u0026\u0026a,d=c\u0026\u00261===a.nodeType\u0026\u00261===b.nodeType\u0026\u0026(~b.sourceIndex||C)-(~a.sourceIndex||C);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function la(a){return function(b){var c=b.nodeName.toLowerCase();return\"input\"===c\u0026\u0026b.type===a}}function ma(a){return function(b){var c=b.nodeName.toLowerCase();return(\"input\"===c||\"button\"===c)\u0026\u0026b.type===a}}function na(a){return ha(function(b){return b=+b,ha(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]\u0026\u0026(c[e]=!(d[e]=c[e]))})})}function oa(a){return a\u0026\u0026\"undefined\"!=typeof a.getElementsByTagName\u0026\u0026a}c=fa.support={},f=fa.isXML=function(a){var b=a\u0026\u0026(a.ownerDocument||a).documentElement;return b?\"HTML\"!==b.nodeName:!1},m=fa.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n\u0026\u00269===g.nodeType\u0026\u0026g.documentElement?(n=g,o=n.documentElement,p=!f(n),(e=n.defaultView)\u0026\u0026e.top!==e\u0026\u0026(e.addEventListener?e.addEventListener(\"unload\",da,!1):e.attachEvent\u0026\u0026e.attachEvent(\"onunload\",da)),c.attributes=ia(function(a){return a.className=\"i\",!a.getAttribute(\"className\")}),c.getElementsByTagName=ia(function(a){return a.appendChild(n.createComment(\"\")),!a.getElementsByTagName(\"*\").length}),c.getElementsByClassName=Z.test(n.getElementsByClassName),c.getById=ia(function(a){return o.appendChild(a).id=u,!n.getElementsByName||!n.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if(\"undefined\"!=typeof b.getElementById\u0026\u0026p){var c=b.getElementById(a);return c?[c]:[]}},d.filter.ID=function(a){var b=a.replace(ba,ca);return function(a){return a.getAttribute(\"id\")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(ba,ca);return function(a){var c=\"undefined\"!=typeof a.getAttributeNode\u0026\u0026a.getAttributeNode(\"id\");return c\u0026\u0026c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return\"undefined\"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if(\"*\"===a){while(c=f[e++])1===c.nodeType\u0026\u0026d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName\u0026\u0026function(a,b){return\"undefined\"!=typeof b.getElementsByClassName\u0026\u0026p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=Z.test(n.querySelectorAll))\u0026\u0026(ia(function(a){o.appendChild(a).innerHTML=\"\",a.querySelectorAll(\"[msallowcapture^='']\").length\u0026\u0026q.push(\"[*^$]=\"+L+\"*(?:''|\\\"\\\")\"),a.querySelectorAll(\"[selected]\").length||q.push(\"\\\\[\"+L+\"*(?:value|\"+K+\")\"),a.querySelectorAll(\"[id~=\"+u+\"-]\").length||q.push(\"~=\"),a.querySelectorAll(\":checked\").length||q.push(\":checked\"),a.querySelectorAll(\"a#\"+u+\"+*\").length||q.push(\".#.+[+~]\")}),ia(function(a){var b=n.createElement(\"input\");b.setAttribute(\"type\",\"hidden\"),a.appendChild(b).setAttribute(\"name\",\"D\"),a.querySelectorAll(\"[name=d]\").length\u0026\u0026q.push(\"name\"+L+\"*[*^$|!~]?=\"),a.querySelectorAll(\":enabled\").length||q.push(\":enabled\",\":disabled\"),a.querySelectorAll(\"*,:x\"),q.push(\",.*:\")})),(c.matchesSelector=Z.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))\u0026\u0026ia(function(a){c.disconnectedMatch=s.call(a,\"div\"),s.call(a,\"[s!='']:x\"),r.push(\"!=\",O)}),q=q.length\u0026\u0026new RegExp(q.join(\"|\")),r=r.length\u0026\u0026new RegExp(r.join(\"|\")),b=Z.test(o.compareDocumentPosition),t=b||Z.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b\u0026\u0026b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition\u0026\u002616\u0026a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1\u0026d||!c.sortDetached\u0026\u0026b.compareDocumentPosition(a)===d?a===n||a.ownerDocument===v\u0026\u0026t(v,a)?-1:b===n||b.ownerDocument===v\u0026\u0026t(v,b)?1:k?J(k,a)-J(k,b):0:4\u0026d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,g=[a],h=[b];if(!e||!f)return a===n?-1:b===n?1:e?-1:f?1:k?J(k,a)-J(k,b):0;if(e===f)return ka(a,b);c=a;while(c=c.parentNode)g.unshift(c);c=b;while(c=c.parentNode)h.unshift(c);while(g[d]===h[d])d++;return d?ka(g[d],h[d]):g[d]===v?-1:h[d]===v?1:0},n):n},fa.matches=function(a,b){return fa(a,null,null,b)},fa.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n\u0026\u0026m(a),b=b.replace(T,\"='$1']\"),c.matchesSelector\u0026\u0026p\u0026\u0026!A[b+\" \"]\u0026\u0026(!r||!r.test(b))\u0026\u0026(!q||!q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document\u0026\u002611!==a.document.nodeType)return d}catch(e){}return fa(b,n,null,[a]).length0},fa.contains=function(a,b){return(a.ownerDocument||a)!==n\u0026\u0026m(a),t(a,b)},fa.attr=function(a,b){(a.ownerDocument||a)!==n\u0026\u0026m(a);var e=d.attrHandle[b.toLowerCase()],f=e\u0026\u0026D.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))\u0026\u0026f.specified?f.value:null},fa.error=function(a){throw new Error(\"Syntax error, unrecognized expression: \"+a)},fa.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable\u0026\u0026a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]\u0026\u0026(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=fa.getText=function(a){var b,c=\"\",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if(\"string\"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=fa.selectors={cacheLength:50,createPseudo:ha,match:W,attrHandle:{},find:{},relative:{\"\":{dir:\"parentNode\",first:!0},\" \":{dir:\"parentNode\"},\"+\":{dir:\"previousSibling\",first:!0},\"~\":{dir:\"previousSibling\"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ba,ca),a[3]=(a[3]||a[4]||a[5]||\"\").replace(ba,ca),\"~=\"===a[2]\u0026\u0026(a[3]=\" \"+a[3]+\" \"),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),\"nth\"===a[1].slice(0,3)?(a[3]||fa.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*(\"even\"===a[3]||\"odd\"===a[3])),a[5]=+(a[7]+a[8]||\"odd\"===a[3])):a[3]\u0026\u0026fa.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]\u0026\u0026a[2];return W.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||\"\":c\u0026\u0026U.test(c)\u0026\u0026(b=g(c,!0))\u0026\u0026(b=c.indexOf(\")\",c.length-b)-c.length)\u0026\u0026(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ba,ca).toLowerCase();return\"*\"===a?function(){return!0}:function(a){return a.nodeName\u0026\u0026a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+\" \"];return b||(b=new RegExp(\"(^|\"+L+\")\"+a+\"(\"+L+\"|$)\"))\u0026\u0026y(a,function(a){return b.test(\"string\"==typeof a.className\u0026\u0026a.className||\"undefined\"!=typeof a.getAttribute\u0026\u0026a.getAttribute(\"class\")||\"\")})},ATTR:function(a,b,c){return function(d){var e=fa.attr(d,a);return null==e?\"!=\"===b:b?(e+=\"\",\"=\"===b?e===c:\"!=\"===b?e!==c:\"^=\"===b?c\u0026\u00260===e.indexOf(c):\"*=\"===b?c\u0026\u0026e.indexOf(c)-1:\"$=\"===b?c\u0026\u0026e.slice(-c.length)===c:\"~=\"===b?(\" \"+e.replace(P,\" \")+\" \").indexOf(c)-1:\"|=\"===b?e===c||e.slice(0,c.length+1)===c+\"-\":!1):!0}},CHILD:function(a,b,c,d,e){var f=\"nth\"!==a.slice(0,3),g=\"last\"!==a.slice(-4),h=\"of-type\"===b;return 1===d\u0026\u00260===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?\"nextSibling\":\"previousSibling\",q=b.parentNode,r=h\u0026\u0026b.nodeName.toLowerCase(),s=!i\u0026\u0026!h,t=!1;if(q){if(f){while(p){m=b;while(m=m[p])if(h?m.nodeName.toLowerCase()===r:1===m.nodeType)return!1;o=p=\"only\"===a\u0026\u0026!o\u0026\u0026\"nextSibling\"}return!0}if(o=[g?q.firstChild:q.lastChild],g\u0026\u0026s){m=q,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w\u0026\u0026j[1],t=n\u0026\u0026j[2],m=n\u0026\u0026q.childNodes[n];while(m=++n\u0026\u0026m\u0026\u0026m[p]||(t=n=0)||o.pop())if(1===m.nodeType\u0026\u0026++t\u0026\u0026m===b){k[a]=[w,n,t];break}}else if(s\u0026\u0026(m=b,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w\u0026\u0026j[1],t=n),t===!1)while(m=++n\u0026\u0026m\u0026\u0026m[p]||(t=n=0)||o.pop())if((h?m.nodeName.toLowerCase()===r:1===m.nodeType)\u0026\u0026++t\u0026\u0026(s\u0026\u0026(l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),k[a]=[w,t]),m===b))break;return t-=e,t===d||t%d===0\u0026\u0026t/d=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||fa.error(\"unsupported pseudo: \"+a);return e[u]?e(b):e.length1?(c=[a,a,\"\",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ha(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=J(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ha(function(a){var b=[],c=[],d=h(a.replace(Q,\"$1\"));return d[u]?ha(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])\u0026\u0026(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ha(function(a){return function(b){return fa(a,b).length0}}),contains:ha(function(a){return a=a.replace(ba,ca),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)-1}}),lang:ha(function(a){return V.test(a||\"\")||fa.error(\"unsupported lang: \"+a),a=a.replace(ba,ca).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute(\"xml:lang\")||b.getAttribute(\"lang\"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+\"-\");while((b=b.parentNode)\u0026\u00261===b.nodeType);return!1}}),target:function(b){var c=a.location\u0026\u0026a.location.hash;return c\u0026\u0026c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement\u0026\u0026(!n.hasFocus||n.hasFocus())\u0026\u0026!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return\"input\"===b\u0026\u0026!!a.checked||\"option\"===b\u0026\u0026!!a.selected},selected:function(a){return a.parentNode\u0026\u0026a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeTypec?c+b:c]}),even:na(function(a,b){for(var c=0;bc;c+=2)a.push(c);return a}),odd:na(function(a,b){for(var c=1;bc;c+=2)a.push(c);return a}),lt:na(function(a,b,c){for(var d=0c?c+b:c;--d=0;)a.push(d);return a}),gt:na(function(a,b,c){for(var d=0c?c+b:c;++db;b++)d+=a[b].value;return d}function ra(a,b,c){var d=b.dir,e=c\u0026\u0026\"parentNode\"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j,k=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)\u0026\u0026a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(j=b[u]||(b[u]={}),i=j[b.uniqueID]||(j[b.uniqueID]={}),(h=i[d])\u0026\u0026h[0]===w\u0026\u0026h[1]===f)return k[2]=h[2];if(i[d]=k,k[2]=a(b,c,g))return!0}}}function sa(a){return a.length1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function ta(a,b,c){for(var d=0,e=b.length;ed;d++)fa(a,b[d],c);return c}function ua(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;ih;h++)(f=a[h])\u0026\u0026(c\u0026\u0026!c(f,d,e)||(g.push(f),j\u0026\u0026b.push(h)));return g}function va(a,b,c,d,e,f){return d\u0026\u0026!d[u]\u0026\u0026(d=va(d)),e\u0026\u0026!e[u]\u0026\u0026(e=va(e,f)),ha(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||ta(b||\"*\",h.nodeType?[h]:h,[]),q=!a||!f\u0026\u0026b?p:ua(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c\u0026\u0026c(q,r,h,i),d){j=ua(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])\u0026\u0026(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])\u0026\u0026j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])\u0026\u0026(j=e?J(f,l):m[k])-1\u0026\u0026(f[j]=!(g[j]=l))}}else r=ua(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):H.apply(g,r)})}function wa(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[\" \"],i=g?1:0,k=ra(function(a){return a===b},h,!0),l=ra(function(a){return J(b,a)-1},h,!0),m=[function(a,c,d){var e=!g\u0026\u0026(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];fi;i++)if(c=d.relative[a[i].type])m=[ra(sa(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;fe;e++)if(d.relative[a[e].type])break;return va(i1\u0026\u0026sa(m),i1\u0026\u0026qa(a.slice(0,i-1).concat({value:\" \"===a[i-2].type?\"*\":\"\"})).replace(Q,\"$1\"),c,ei\u0026\u0026wa(a.slice(i,e)),fe\u0026\u0026wa(a=a.slice(e)),fe\u0026\u0026qa(a))}m.push(c)}return sa(m)}function xa(a,b){var c=b.length0,e=a.length0,f=function(f,g,h,i,k){var l,o,q,r=0,s=\"0\",t=f\u0026\u0026[],u=[],v=j,x=f||e\u0026\u0026d.find.TAG(\"*\",k),y=w+=null==v?1:Math.random()||.1,z=x.length;for(k\u0026\u0026(j=g===n||g||k);s!==z\u0026\u0026null!=(l=x[s]);s++){if(e\u0026\u0026l){o=0,g||l.ownerDocument===n||(m(l),h=!p);while(q=a[o++])if(q(l,g||n,h)){i.push(l);break}k\u0026\u0026(w=y)}c\u0026\u0026((l=!q\u0026\u0026l)\u0026\u0026r--,f\u0026\u0026t.push(l))}if(r+=s,c\u0026\u0026s!==r){o=0;while(q=b[o++])q(t,u,g,h);if(f){if(r0)while(s--)t[s]||u[s]||(u[s]=F.call(i));u=ua(u)}H.apply(i,u),k\u0026\u0026!f\u0026\u0026u.length0\u0026\u0026r+b.length1\u0026\u0026fa.uniqueSort(i)}return k\u0026\u0026(w=y,j=v),t};return c?ha(f):f}return h=fa.compile=function(a,b){var c,d=[],e=[],f=A[a+\" \"];if(!f){b||(b=g(a)),c=b.length;while(c--)f=wa(b[c]),f[u]?d.push(f):e.push(f);f=A(a,xa(e,d)),f.selector=a}return f},i=fa.select=function(a,b,e,f){var i,j,k,l,m,n=\"function\"==typeof a\u0026\u0026a,o=!f\u0026\u0026g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length2\u0026\u0026\"ID\"===(k=j[0]).type\u0026\u0026c.getById\u0026\u00269===b.nodeType\u0026\u0026p\u0026\u0026d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(ba,ca),b)||[])[0],!b)return e;n\u0026\u0026(b=b.parentNode),a=a.slice(j.shift().value.length)}i=W.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])\u0026\u0026(f=m(k.matches[0].replace(ba,ca),_.test(j[0].type)\u0026\u0026oa(b.parentNode)||b))){if(j.splice(i,1),a=f.length\u0026\u0026qa(j),!a)return H.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,!b||_.test(a)\u0026\u0026oa(b.parentNode)||b),e},c.sortStable=u.split(\"\").sort(B).join(\"\")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ia(function(a){return 1\u0026a.compareDocumentPosition(n.createElement(\"div\"))}),ia(function(a){return a.innerHTML=\"\",\"#\"===a.firstChild.getAttribute(\"href\")})||ja(\"type|href|height|width\",function(a,b,c){return c?void 0:a.getAttribute(b,\"type\"===b.toLowerCase()?1:2)}),c.attributes\u0026\u0026ia(function(a){return a.innerHTML=\"\",a.firstChild.setAttribute(\"value\",\"\"),\"\"===a.firstChild.getAttribute(\"value\")})||ja(\"value\",function(a,b,c){return c||\"input\"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ia(function(a){return null==a.getAttribute(\"disabled\")})||ja(K,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))\u0026\u0026d.specified?d.value:null}),fa}(a);n.find=t,n.expr=t.selectors,n.expr[\":\"]=n.expr.pseudos,n.uniqueSort=n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])\u0026\u00269!==a.nodeType)if(1===a.nodeType){if(e\u0026\u0026n(a).is(c))break;d.push(a)}return d},v=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType\u0026\u0026a!==b\u0026\u0026c.push(a);return c},w=n.expr.match.needsContext,x=/^(?:|)$/,y=/^.[^:#\\[\\.,]*$/;function z(a,b,c){if(n.isFunction(b))return n.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return n.grep(a,function(a){return a===b!==c});if(\"string\"==typeof b){if(y.test(b))return n.filter(b,a,c);b=n.filter(b,a)}return n.grep(a,function(a){return n.inArray(a,b)-1!==c})}n.filter=function(a,b,c){var d=b[0];return c\u0026\u0026(a=\":not(\"+a+\")\"),1===b.length\u0026\u00261===d.nodeType?n.find.matchesSelector(d,a)?[d]:[]:n.find.matches(a,n.grep(b,function(a){return 1===a.nodeType}))},n.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if(\"string\"!=typeof a)return this.pushStack(n(a).filter(function(){for(b=0;eb;b++)if(n.contains(d[b],this))return!0}));for(b=0;eb;b++)n.find(a,d[b],c);return c=this.pushStack(e1?n.unique(c):c),c.selector=this.selector?this.selector+\" \"+a:a,c},filter:function(a){return this.pushStack(z(this,a||[],!1))},not:function(a){return this.pushStack(z(this,a||[],!0))},is:function(a){return!!z(this,\"string\"==typeof a\u0026\u0026w.test(a)?n(a):a||[],!1).length}});var A,B=/^(?:\\s*()[^]*|#([\\w-]*))$/,C=n.fn.init=function(a,b,c){var e,f;if(!a)return this;if(c=c||A,\"string\"==typeof a){if(e=\"\"===a.charAt(a.length-1)\u0026\u0026a.length=3?[null,a,null]:B.exec(a),!e||!e[1]\u0026\u0026b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(e[1]){if(b=b instanceof n?b[0]:b,n.merge(this,n.parseHTML(e[1],b\u0026\u0026b.nodeType?b.ownerDocument||b:d,!0)),x.test(e[1])\u0026\u0026n.isPlainObject(b))for(e in b)n.isFunction(this[e])?this[e](b[e]):this.attr(e,b[e]);return this}if(f=d.getElementById(e[2]),f\u0026\u0026f.parentNode){if(f.id!==e[2])return A.find(a);this.length=1,this[0]=f}return this.context=d,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):n.isFunction(a)?\"undefined\"!=typeof c.ready?c.ready(a):a(n):(void 0!==a.selector\u0026\u0026(this.selector=a.selector,this.context=a.context),n.makeArray(a,this))};C.prototype=n.fn,A=n(d);var D=/^(?:parents|prev(?:Until|All))/,E={children:!0,contents:!0,next:!0,prev:!0};n.fn.extend({has:function(a){var b,c=n(a,this),d=c.length;return this.filter(function(){for(b=0;db;b++)if(n.contains(this,c[b]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=w.test(a)||\"string\"!=typeof a?n(a,b||this.context):0;ed;d++)for(c=this[d];c\u0026\u0026c!==b;c=c.parentNode)if(c.nodeType-1:1===c.nodeType\u0026\u0026n.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length1?n.uniqueSort(f):f)},index:function(a){return a?\"string\"==typeof a?n.inArray(this[0],n(a)):n.inArray(a.jquery?a[0]:a,this):this[0]\u0026\u0026this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(n.uniqueSort(n.merge(this.get(),n(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function F(a,b){do a=a[b];while(a\u0026\u00261!==a.nodeType);return a}n.each({parent:function(a){var b=a.parentNode;return b\u0026\u002611!==b.nodeType?b:null},parents:function(a){return u(a,\"parentNode\")},parentsUntil:function(a,b,c){return u(a,\"parentNode\",c)},next:function(a){return F(a,\"nextSibling\")},prev:function(a){return F(a,\"previousSibling\")},nextAll:function(a){return u(a,\"nextSibling\")},prevAll:function(a){return u(a,\"previousSibling\")},nextUntil:function(a,b,c){return u(a,\"nextSibling\",c)},prevUntil:function(a,b,c){return u(a,\"previousSibling\",c)},siblings:function(a){return v((a.parentNode||{}).firstChild,a)},children:function(a){return v(a.firstChild)},contents:function(a){return n.nodeName(a,\"iframe\")?a.contentDocument||a.contentWindow.document:n.merge([],a.childNodes)}},function(a,b){n.fn[a]=function(c,d){var e=n.map(this,b,c);return\"Until\"!==a.slice(-5)\u0026\u0026(d=c),d\u0026\u0026\"string\"==typeof d\u0026\u0026(e=n.filter(d,e)),this.length1\u0026\u0026(E[a]||(e=n.uniqueSort(e)),D.test(a)\u0026\u0026(e=e.reverse())),this.pushStack(e)}});var G=/\\S+/g;function H(a){var b={};return n.each(a.match(G)||[],function(a,c){b[c]=!0}),b}n.Callbacks=function(a){a=\"string\"==typeof a?H(a):n.extend({},a);var b,c,d,e,f=[],g=[],h=-1,i=function(){for(e=a.once,d=b=!0;g.length;h=-1){c=g.shift();while(++h-1)f.splice(c,1),h=c\u0026\u0026h--}),this},has:function(a){return a?n.inArray(a,f)-1:f.length0},empty:function(){return f\u0026\u0026(f=[]),this},disable:function(){return e=g=[],f=c=\"\",this},disabled:function(){return!f},lock:function(){return e=!0,c||j.disable(),this},locked:function(){return!!e},fireWith:function(a,c){return e||(c=c||[],c=[a,c.slice?c.slice():c],g.push(c),b||i()),this},fire:function(){return j.fireWith(this,arguments),this},fired:function(){return!!d}};return j},n.extend({Deferred:function(a){var b=[[\"resolve\",\"done\",n.Callbacks(\"once memory\"),\"resolved\"],[\"reject\",\"fail\",n.Callbacks(\"once memory\"),\"rejected\"],[\"notify\",\"progress\",n.Callbacks(\"memory\")]],c=\"pending\",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return n.Deferred(function(c){n.each(b,function(b,f){var g=n.isFunction(a[b])\u0026\u0026a[b];e[f[1]](function(){var a=g\u0026\u0026g.apply(this,arguments);a\u0026\u0026n.isFunction(a.promise)?a.promise().progress(c.notify).done(c.resolve).fail(c.reject):c[f[0]+\"With\"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?n.extend(a,d):d}},e={};return d.pipe=d.then,n.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h\u0026\u0026g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+\"With\"](this===e?d:this,arguments),this},e[f[0]+\"With\"]=g.fireWith}),d.promise(e),a\u0026\u0026a.call(e,e),e},when:function(a){var b=0,c=e.call(arguments),d=c.length,f=1!==d||a\u0026\u0026n.isFunction(a.promise)?d:0,g=1===f?a:n.Deferred(),h=function(a,b,c){return function(d){b[a]=this,c[a]=arguments.length1?e.call(arguments):d,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(d1)for(i=new Array(d),j=new Array(d),k=new Array(d);db;b++)c[b]\u0026\u0026n.isFunction(c[b].promise)?c[b].promise().progress(h(b,j,i)).done(h(b,k,c)).fail(g.reject):--f;return f||g.resolveWith(k,c),g.promise()}});var I;n.fn.ready=function(a){return n.ready.promise().done(a),this},n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){(a===!0?--n.readyWait:n.isReady)||(n.isReady=!0,a!==!0\u0026\u0026--n.readyWait0||(I.resolveWith(d,[n]),n.fn.triggerHandler\u0026\u0026(n(d).triggerHandler(\"ready\"),n(d).off(\"ready\"))))}});function J(){d.addEventListener?(d.removeEventListener(\"DOMContentLoaded\",K),a.removeEventListener(\"load\",K)):(d.detachEvent(\"onreadystatechange\",K),a.detachEvent(\"onload\",K))}function K(){(d.addEventListener||\"load\"===a.event.type||\"complete\"===d.readyState)\u0026\u0026(J(),n.ready())}n.ready.promise=function(b){if(!I)if(I=n.Deferred(),\"complete\"===d.readyState||\"loading\"!==d.readyState\u0026\u0026!d.documentElement.doScroll)a.setTimeout(n.ready);else if(d.addEventListener)d.addEventListener(\"DOMContentLoaded\",K),a.addEventListener(\"load\",K);else{d.attachEvent(\"onreadystatechange\",K),a.attachEvent(\"onload\",K);var c=!1;try{c=null==a.frameElement\u0026\u0026d.documentElement}catch(e){}c\u0026\u0026c.doScroll\u0026\u0026!function f(){if(!n.isReady){try{c.doScroll(\"left\")}catch(b){return a.setTimeout(f,50)}J(),n.ready()}}()}return I.promise(b)},n.ready.promise();var L;for(L in n(l))break;l.ownFirst=\"0\"===L,l.inlineBlockNeedsLayout=!1,n(function(){var a,b,c,e;c=d.getElementsByTagName(\"body\")[0],c\u0026\u0026c.style\u0026\u0026(b=d.createElement(\"div\"),e=d.createElement(\"div\"),e.style.cssText=\"position:absolute;border:0;width:0;height:0;top:0;left:-9999px\",c.appendChild(e).appendChild(b),\"undefined\"!=typeof b.style.zoom\u0026\u0026(b.style.cssText=\"display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1\",l.inlineBlockNeedsLayout=a=3===b.offsetWidth,a\u0026\u0026(c.style.zoom=1)),c.removeChild(e))}),function(){var a=d.createElement(\"div\");l.deleteExpando=!0;try{delete a.test}catch(b){l.deleteExpando=!1}a=null}();var M=function(a){var b=n.noData[(a.nodeName+\" \").toLowerCase()],c=+a.nodeType||1;return 1!==c\u0026\u00269!==c?!1:!b||b!==!0\u0026\u0026a.getAttribute(\"classid\")===b},N=/^(?:\\{[\\w\\W]*\\}|\\[[\\w\\W]*\\])$/,O=/([A-Z])/g;function P(a,b,c){if(void 0===c\u0026\u00261===a.nodeType){var d=\"data-\"+b.replace(O,\"-$1\").toLowerCase();if(c=a.getAttribute(d),\"string\"==typeof c){try{c=\"true\"===c?!0:\"false\"===c?!1:\"null\"===c?null:+c+\"\"===c?+c:N.test(c)?n.parseJSON(c):c}catch(e){}n.data(a,b,c)}else c=void 0; }return c}function Q(a){var b;for(b in a)if((\"data\"!==b||!n.isEmptyObject(a[b]))\u0026\u0026\"toJSON\"!==b)return!1;return!0}function R(a,b,d,e){if(M(a)){var f,g,h=n.expando,i=a.nodeType,j=i?n.cache:a,k=i?a[h]:a[h]\u0026\u0026h;if(k\u0026\u0026j[k]\u0026\u0026(e||j[k].data)||void 0!==d||\"string\"!=typeof b)return k||(k=i?a[h]=c.pop()||n.guid++:h),j[k]||(j[k]=i?{}:{toJSON:n.noop}),\"object\"!=typeof b\u0026\u0026\"function\"!=typeof b||(e?j[k]=n.extend(j[k],b):j[k].data=n.extend(j[k].data,b)),g=j[k],e||(g.data||(g.data={}),g=g.data),void 0!==d\u0026\u0026(g[n.camelCase(b)]=d),\"string\"==typeof b?(f=g[b],null==f\u0026\u0026(f=g[n.camelCase(b)])):f=g,f}}function S(a,b,c){if(M(a)){var d,e,f=a.nodeType,g=f?n.cache:a,h=f?a[n.expando]:n.expando;if(g[h]){if(b\u0026\u0026(d=c?g[h]:g[h].data)){n.isArray(b)?b=b.concat(n.map(b,n.camelCase)):b in d?b=[b]:(b=n.camelCase(b),b=b in d?[b]:b.split(\" \")),e=b.length;while(e--)delete d[b[e]];if(c?!Q(d):!n.isEmptyObject(d))return}(c||(delete g[h].data,Q(g[h])))\u0026\u0026(f?n.cleanData([a],!0):l.deleteExpando||g!=g.window?delete g[h]:g[h]=void 0)}}}n.extend({cache:{},noData:{\"applet \":!0,\"embed \":!0,\"object \":\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\"},hasData:function(a){return a=a.nodeType?n.cache[a[n.expando]]:a[n.expando],!!a\u0026\u0026!Q(a)},data:function(a,b,c){return R(a,b,c)},removeData:function(a,b){return S(a,b)},_data:function(a,b,c){return R(a,b,c,!0)},_removeData:function(a,b){return S(a,b,!0)}}),n.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f\u0026\u0026f.attributes;if(void 0===a){if(this.length\u0026\u0026(e=n.data(f),1===f.nodeType\u0026\u0026!n._data(f,\"parsedAttrs\"))){c=g.length;while(c--)g[c]\u0026\u0026(d=g[c].name,0===d.indexOf(\"data-\")\u0026\u0026(d=n.camelCase(d.slice(5)),P(f,d,e[d])));n._data(f,\"parsedAttrs\",!0)}return e}return\"object\"==typeof a?this.each(function(){n.data(this,a)}):arguments.length1?this.each(function(){n.data(this,a,b)}):f?P(f,a,n.data(f,a)):void 0},removeData:function(a){return this.each(function(){n.removeData(this,a)})}}),n.extend({queue:function(a,b,c){var d;return a?(b=(b||\"fx\")+\"queue\",d=n._data(a,b),c\u0026\u0026(!d||n.isArray(c)?d=n._data(a,b,n.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||\"fx\";var c=n.queue(a,b),d=c.length,e=c.shift(),f=n._queueHooks(a,b),g=function(){n.dequeue(a,b)};\"inprogress\"===e\u0026\u0026(e=c.shift(),d--),e\u0026\u0026(\"fx\"===b\u0026\u0026c.unshift(\"inprogress\"),delete f.stop,e.call(a,g,f)),!d\u0026\u0026f\u0026\u0026f.empty.fire()},_queueHooks:function(a,b){var c=b+\"queueHooks\";return n._data(a,c)||n._data(a,c,{empty:n.Callbacks(\"once memory\").add(function(){n._removeData(a,b+\"queue\"),n._removeData(a,c)})})}}),n.fn.extend({queue:function(a,b){var c=2;return\"string\"!=typeof a\u0026\u0026(b=a,a=\"fx\",c--),arguments.lengthh;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},Z=/^(?:checkbox|radio)$/i,$=/a\",l.leadingWhitespace=3===a.firstChild.nodeType,l.tbody=!a.getElementsByTagName(\"tbody\").length,l.htmlSerialize=!!a.getElementsByTagName(\"link\").length,l.html5Clone=\"\"!==d.createElement(\"nav\").cloneNode(!0).outerHTML,c.type=\"checkbox\",c.checked=!0,b.appendChild(c),l.appendChecked=c.checked,a.innerHTML=\"x\",l.noCloneChecked=!!a.cloneNode(!0).lastChild.defaultValue,b.appendChild(a),c=d.createElement(\"input\"),c.setAttribute(\"type\",\"radio\"),c.setAttribute(\"checked\",\"checked\"),c.setAttribute(\"name\",\"t\"),a.appendChild(c),l.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,l.noCloneEvent=!!a.addEventListener,a[n.expando]=1,l.attributes=!a.getAttribute(n.expando)}();var da={option:[1,\"\",\"\"],legend:[1,\"\",\"\"],area:[1,\"\",\"\"],param:[1,\"\",\"\"],thead:[1,\"\",\"\"],tr:[2,\"\",\"\"],col:[2,\"\",\"\"],td:[3,\"\",\"\"],_default:l.htmlSerialize?[0,\"\",\"\"]:[1,\"X\",\"\"]};da.optgroup=da.option,da.tbody=da.tfoot=da.colgroup=da.caption=da.thead,da.th=da.td;function ea(a,b){var c,d,e=0,f=\"undefined\"!=typeof a.getElementsByTagName?a.getElementsByTagName(b||\"*\"):\"undefined\"!=typeof a.querySelectorAll?a.querySelectorAll(b||\"*\"):void 0;if(!f)for(f=[],c=a.childNodes||a;null!=(d=c[e]);e++)!b||n.nodeName(d,b)?f.push(d):n.merge(f,ea(d,b));return void 0===b||b\u0026\u0026n.nodeName(a,b)?n.merge([a],f):f}function fa(a,b){for(var c,d=0;null!=(c=a[d]);d++)n._data(c,\"globalEval\",!b||n._data(b[d],\"globalEval\"))}var ga=/r;r++)if(g=a[r],g||0===g)if(\"object\"===n.type(g))n.merge(q,g.nodeType?[g]:g);else if(ga.test(g)){i=i||p.appendChild(b.createElement(\"div\")),j=($.exec(g)||[\"\",\"\"])[1].toLowerCase(),m=da[j]||da._default,i.innerHTML=m[1]+n.htmlPrefilter(g)+m[2],f=m[0];while(f--)i=i.lastChild;if(!l.leadingWhitespace\u0026\u0026aa.test(g)\u0026\u0026q.push(b.createTextNode(aa.exec(g)[0])),!l.tbody){g=\"table\"!==j||ha.test(g)?\"\"!==m[1]||ha.test(g)?0:i:i.firstChild,f=g\u0026\u0026g.childNodes.length;while(f--)n.nodeName(k=g.childNodes[f],\"tbody\")\u0026\u0026!k.childNodes.length\u0026\u0026g.removeChild(k)}n.merge(q,i.childNodes),i.textContent=\"\";while(i.firstChild)i.removeChild(i.firstChild);i=p.lastChild}else q.push(b.createTextNode(g));i\u0026\u0026p.removeChild(i),l.appendChecked||n.grep(ea(q,\"input\"),ia),r=0;while(g=q[r++])if(d\u0026\u0026n.inArray(g,d)-1)e\u0026\u0026e.push(g);else if(h=n.contains(g.ownerDocument,g),i=ea(p.appendChild(g),\"script\"),h\u0026\u0026fa(i),c){f=0;while(g=i[f++])_.test(g.type||\"\")\u0026\u0026c.push(g)}return i=null,p}!function(){var b,c,e=d.createElement(\"div\");for(b in{submit:!0,change:!0,focusin:!0})c=\"on\"+b,(l[b]=c in a)||(e.setAttribute(c,\"t\"),l[b]=e.attributes[c].expando===!1);e=null}();var ka=/^(?:input|select|textarea)$/i,la=/^key/,ma=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,na=/^(?:focusinfocus|focusoutblur)$/,oa=/^([^.]*)(?:\\.(.+)|)/;function pa(){return!0}function qa(){return!1}function ra(){try{return d.activeElement}catch(a){}}function sa(a,b,c,d,e,f){var g,h;if(\"object\"==typeof b){\"string\"!=typeof c\u0026\u0026(d=d||c,c=void 0);for(h in b)sa(a,h,c,d,b[h],f);return a}if(null==d\u0026\u0026null==e?(e=c,d=c=void 0):null==e\u0026\u0026(\"string\"==typeof c?(e=d,d=void 0):(e=d,d=c,c=void 0)),e===!1)e=qa;else if(!e)return a;return 1===f\u0026\u0026(g=e,e=function(a){return n().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=n.guid++)),a.each(function(){n.event.add(this,b,e,d,c)})}n.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=n._data(a);if(r){c.handler\u0026\u0026(i=c,c=i.handler,e=i.selector),c.guid||(c.guid=n.guid++),(g=r.events)||(g=r.events={}),(k=r.handle)||(k=r.handle=function(a){return\"undefined\"==typeof n||a\u0026\u0026n.event.triggered===a.type?void 0:n.event.dispatch.apply(k.elem,arguments)},k.elem=a),b=(b||\"\").match(G)||[\"\"],h=b.length;while(h--)f=oa.exec(b[h])||[],o=q=f[1],p=(f[2]||\"\").split(\".\").sort(),o\u0026\u0026(j=n.event.special[o]||{},o=(e?j.delegateType:j.bindType)||o,j=n.event.special[o]||{},l=n.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e\u0026\u0026n.expr.match.needsContext.test(e),namespace:p.join(\".\")},i),(m=g[o])||(m=g[o]=[],m.delegateCount=0,j.setup\u0026\u0026j.setup.call(a,d,p,k)!==!1||(a.addEventListener?a.addEventListener(o,k,!1):a.attachEvent\u0026\u0026a.attachEvent(\"on\"+o,k))),j.add\u0026\u0026(j.add.call(a,l),l.handler.guid||(l.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,l):m.push(l),n.event.global[o]=!0);a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=n.hasData(a)\u0026\u0026n._data(a);if(r\u0026\u0026(k=r.events)){b=(b||\"\").match(G)||[\"\"],j=b.length;while(j--)if(h=oa.exec(b[j])||[],o=q=h[1],p=(h[2]||\"\").split(\".\").sort(),o){l=n.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,m=k[o]||[],h=h[2]\u0026\u0026new RegExp(\"(^|\\\\.)\"+p.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"),i=f=m.length;while(f--)g=m[f],!e\u0026\u0026q!==g.origType||c\u0026\u0026c.guid!==g.guid||h\u0026\u0026!h.test(g.namespace)||d\u0026\u0026d!==g.selector\u0026\u0026(\"**\"!==d||!g.selector)||(m.splice(f,1),g.selector\u0026\u0026m.delegateCount--,l.remove\u0026\u0026l.remove.call(a,g));i\u0026\u0026!m.length\u0026\u0026(l.teardown\u0026\u0026l.teardown.call(a,p,r.handle)!==!1||n.removeEvent(a,o,r.handle),delete k[o])}else for(o in k)n.event.remove(a,o+b[j],c,d,!0);n.isEmptyObject(k)\u0026\u0026(delete r.handle,n._removeData(a,\"events\"))}},trigger:function(b,c,e,f){var g,h,i,j,l,m,o,p=[e||d],q=k.call(b,\"type\")?b.type:b,r=k.call(b,\"namespace\")?b.namespace.split(\".\"):[];if(i=m=e=e||d,3!==e.nodeType\u0026\u00268!==e.nodeType\u0026\u0026!na.test(q+n.event.triggered)\u0026\u0026(q.indexOf(\".\")-1\u0026\u0026(r=q.split(\".\"),q=r.shift(),r.sort()),h=q.indexOf(\":\")1?j:l.bindType||q,g=(n._data(i,\"events\")||{})[b.type]\u0026\u0026n._data(i,\"handle\"),g\u0026\u0026g.apply(i,c),g=h\u0026\u0026i[h],g\u0026\u0026g.apply\u0026\u0026M(i)\u0026\u0026(b.result=g.apply(i,c),b.result===!1\u0026\u0026b.preventDefault());if(b.type=q,!f\u0026\u0026!b.isDefaultPrevented()\u0026\u0026(!l._default||l._default.apply(p.pop(),c)===!1)\u0026\u0026M(e)\u0026\u0026h\u0026\u0026e[q]\u0026\u0026!n.isWindow(e)){m=e[h],m\u0026\u0026(e[h]=null),n.event.triggered=q;try{e[q]()}catch(s){}n.event.triggered=void 0,m\u0026\u0026(e[h]=m)}return b.result}},dispatch:function(a){a=n.event.fix(a);var b,c,d,f,g,h=[],i=e.call(arguments),j=(n._data(this,\"events\")||{})[a.type]||[],k=n.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=n.event.handlers.call(this,a,j),b=0;while((f=h[b++])\u0026\u0026!a.isPropagationStopped()){a.currentTarget=f.elem,c=0;while((g=f.handlers[c++])\u0026\u0026!a.isImmediatePropagationStopped())a.rnamespace\u0026\u0026!a.rnamespace.test(g.namespace)||(a.handleObj=g,a.data=g.data,d=((n.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==d\u0026\u0026(a.result=d)===!1\u0026\u0026(a.preventDefault(),a.stopPropagation()))}return k.postDispatch\u0026\u0026k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h\u0026\u0026i.nodeType\u0026\u0026(\"click\"!==a.type||isNaN(a.button)||a.buttonc;c++)f=b[c],e=f.selector+\" \",void 0===d[e]\u0026\u0026(d[e]=f.needsContext?n(e,this).index(i)-1:n.find(e,this,null,[i]).length),d[e]\u0026\u0026d.push(f);d.length\u0026\u0026g.push({elem:i,handlers:d})}return h]\",\"i\"),va=/]*)\\//gi,wa=/\\s*$/g,Aa=ca(d),Ba=Aa.appendChild(d.createElement(\"div\"));function Ca(a,b){return n.nodeName(a,\"table\")\u0026\u0026n.nodeName(11!==b.nodeType?b:b.firstChild,\"tr\")?a.getElementsByTagName(\"tbody\")[0]||a.appendChild(a.ownerDocument.createElement(\"tbody\")):a}function Da(a){return a.type=(null!==n.find.attr(a,\"type\"))+\"/\"+a.type,a}function Ea(a){var b=ya.exec(a.type);return b?a.type=b[1]:a.removeAttribute(\"type\"),a}function Fa(a,b){if(1===b.nodeType\u0026\u0026n.hasData(a)){var c,d,e,f=n._data(a),g=n._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;ed;d++)n.event.add(b,c,h[c][d])}g.data\u0026\u0026(g.data=n.extend({},g.data))}}function Ga(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!l.noCloneEvent\u0026\u0026b[n.expando]){e=n._data(b);for(d in e.events)n.removeEvent(b,d,e.handle);b.removeAttribute(n.expando)}\"script\"===c\u0026\u0026b.text!==a.text?(Da(b).text=a.text,Ea(b)):\"object\"===c?(b.parentNode\u0026\u0026(b.outerHTML=a.outerHTML),l.html5Clone\u0026\u0026a.innerHTML\u0026\u0026!n.trim(b.innerHTML)\u0026\u0026(b.innerHTML=a.innerHTML)):\"input\"===c\u0026\u0026Z.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value\u0026\u0026(b.value=a.value)):\"option\"===c?b.defaultSelected=b.selected=a.defaultSelected:\"input\"!==c\u0026\u0026\"textarea\"!==c||(b.defaultValue=a.defaultValue)}}function Ha(a,b,c,d){b=f.apply([],b);var e,g,h,i,j,k,m=0,o=a.length,p=o-1,q=b[0],r=n.isFunction(q);if(r||o1\u0026\u0026\"string\"==typeof q\u0026\u0026!l.checkClone\u0026\u0026xa.test(q))return a.each(function(e){var f=a.eq(e);r\u0026\u0026(b[0]=q.call(this,e,f.html())),Ha(f,b,c,d)});if(o\u0026\u0026(k=ja(b,a[0].ownerDocument,!1,a,d),e=k.firstChild,1===k.childNodes.length\u0026\u0026(k=e),e||d)){for(i=n.map(ea(k,\"script\"),Da),h=i.length;om;m++)g=k,m!==p\u0026\u0026(g=n.clone(g,!0,!0),h\u0026\u0026n.merge(i,ea(g,\"script\"))),c.call(a[m],g,m);if(h)for(j=i[i.length-1].ownerDocument,n.map(i,Ea),m=0;hm;m++)g=i[m],_.test(g.type||\"\")\u0026\u0026!n._data(g,\"globalEval\")\u0026\u0026n.contains(j,g)\u0026\u0026(g.src?n._evalUrl\u0026\u0026n._evalUrl(g.src):n.globalEval((g.text||g.textContent||g.innerHTML||\"\").replace(za,\"\")));k=e=null}return a}function Ia(a,b,c){for(var d,e=b?n.filter(b,a):a,f=0;null!=(d=e[f]);f++)c||1!==d.nodeType||n.cleanData(ea(d)),d.parentNode\u0026\u0026(c\u0026\u0026n.contains(d.ownerDocument,d)\u0026\u0026fa(ea(d,\"script\")),d.parentNode.removeChild(d));return a}n.extend({htmlPrefilter:function(a){return a.replace(va,\"\")},clone:function(a,b,c){var d,e,f,g,h,i=n.contains(a.ownerDocument,a);if(l.html5Clone||n.isXMLDoc(a)||!ua.test(\"\")?f=a.cloneNode(!0):(Ba.innerHTML=a.outerHTML,Ba.removeChild(f=Ba.firstChild)),!(l.noCloneEvent\u0026\u0026l.noCloneChecked||1!==a.nodeType\u0026\u002611!==a.nodeType||n.isXMLDoc(a)))for(d=ea(f),h=ea(a),g=0;null!=(e=h[g]);++g)d[g]\u0026\u0026Ga(e,d[g]);if(b)if(c)for(h=h||ea(a),d=d||ea(f),g=0;null!=(e=h[g]);g++)Fa(e,d[g]);else Fa(a,f);return d=ea(f,\"script\"),d.length0\u0026\u0026fa(d,!i\u0026\u0026ea(a,\"script\")),d=h=e=null,f},cleanData:function(a,b){for(var d,e,f,g,h=0,i=n.expando,j=n.cache,k=l.attributes,m=n.event.special;null!=(d=a[h]);h++)if((b||M(d))\u0026\u0026(f=d[i],g=f\u0026\u0026j[f])){if(g.events)for(e in g.events)m[e]?n.event.remove(d,e):n.removeEvent(d,e,g.handle);j[f]\u0026\u0026(delete j[f],k||\"undefined\"==typeof d.removeAttribute?d[i]=void 0:d.removeAttribute(i),c.push(f))}}}),n.fn.extend({domManip:Ha,detach:function(a){return Ia(this,a,!0)},remove:function(a){return Ia(this,a)},text:function(a){return Y(this,function(a){return void 0===a?n.text(this):this.empty().append((this[0]\u0026\u0026this[0].ownerDocument||d).createTextNode(a))},null,a,arguments.length)},append:function(){return Ha(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=Ca(this,a);b.appendChild(a)}})},prepend:function(){return Ha(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=Ca(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return Ha(this,arguments,function(a){this.parentNode\u0026\u0026this.parentNode.insertBefore(a,this)})},after:function(){return Ha(this,arguments,function(a){this.parentNode\u0026\u0026this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){1===a.nodeType\u0026\u0026n.cleanData(ea(a,!1));while(a.firstChild)a.removeChild(a.firstChild);a.options\u0026\u0026n.nodeName(a,\"select\")\u0026\u0026(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return n.clone(this,a,b)})},html:function(a){return Y(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a)return 1===b.nodeType?b.innerHTML.replace(ta,\"\"):void 0;if(\"string\"==typeof a\u0026\u0026!wa.test(a)\u0026\u0026(l.htmlSerialize||!ua.test(a))\u0026\u0026(l.leadingWhitespace||!aa.test(a))\u0026\u0026!da[($.exec(a)||[\"\",\"\"])[1].toLowerCase()]){a=n.htmlPrefilter(a);try{for(;dc;c++)b=this[c]||{},1===b.nodeType\u0026\u0026(n.cleanData(ea(b,!1)),b.innerHTML=a);b=0}catch(e){}}b\u0026\u0026this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return Ha(this,arguments,function(b){var c=this.parentNode;n.inArray(this,a)=d;d++)c=d===h?this:this.clone(!0),n(f[d])[b](c),g.apply(e,c.get());return this.pushStack(e)}});var Ja,Ka={HTML:\"block\",BODY:\"block\"};function La(a,b){var c=n(b.createElement(a)).appendTo(b.body),d=n.css(c[0],\"display\");return c.detach(),d}function Ma(a){var b=d,c=Ka[a];return c||(c=La(a,b),\"none\"!==c\u0026\u0026c||(Ja=(Ja||n(\"\")).appendTo(b.documentElement),b=(Ja[0].contentWindow||Ja[0].contentDocument).document,b.write(),b.close(),c=La(a,b),Ja.detach()),Ka[a]=c),c}var Na=/^margin/,Oa=new RegExp(\"^(\"+T+\")(?!px)[a-z%]+$\",\"i\"),Pa=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e},Qa=d.documentElement;!function(){var b,c,e,f,g,h,i=d.createElement(\"div\"),j=d.createElement(\"div\");if(j.style){j.style.cssText=\"float:left;opacity:.5\",l.opacity=\"0.5\"===j.style.opacity,l.cssFloat=!!j.style.cssFloat,j.style.backgroundClip=\"content-box\",j.cloneNode(!0).style.backgroundClip=\"\",l.clearCloneStyle=\"content-box\"===j.style.backgroundClip,i=d.createElement(\"div\"),i.style.cssText=\"border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute\",j.innerHTML=\"\",i.appendChild(j),l.boxSizing=\"\"===j.style.boxSizing||\"\"===j.style.MozBoxSizing||\"\"===j.style.WebkitBoxSizing,n.extend(l,{reliableHiddenOffsets:function(){return null==b\u0026\u0026k(),f},boxSizingReliable:function(){return null==b\u0026\u0026k(),e},pixelMarginRight:function(){return null==b\u0026\u0026k(),c},pixelPosition:function(){return null==b\u0026\u0026k(),b},reliableMarginRight:function(){return null==b\u0026\u0026k(),g},reliableMarginLeft:function(){return null==b\u0026\u0026k(),h}});function k(){var k,l,m=d.documentElement;m.appendChild(i),j.style.cssText=\"-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%\",b=e=h=!1,c=g=!0,a.getComputedStyle\u0026\u0026(l=a.getComputedStyle(j),b=\"1%\"!==(l||{}).top,h=\"2px\"===(l||{}).marginLeft,e=\"4px\"===(l||{width:\"4px\"}).width,j.style.marginRight=\"50%\",c=\"4px\"===(l||{marginRight:\"4px\"}).marginRight,k=j.appendChild(d.createElement(\"div\")),k.style.cssText=j.style.cssText=\"-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0\",k.style.marginRight=k.style.width=\"0\",j.style.width=\"1px\",g=!parseFloat((a.getComputedStyle(k)||{}).marginRight),j.removeChild(k)),j.style.display=\"none\",f=0===j.getClientRects().length,f\u0026\u0026(j.style.display=\"\",j.innerHTML=\"t\",j.childNodes[0].style.borderCollapse=\"separate\",k=j.getElementsByTagName(\"td\"),k[0].style.cssText=\"margin:0;border:0;padding:0;display:none\",f=0===k[0].offsetHeight,f\u0026\u0026(k[0].style.display=\"\",k[1].style.display=\"none\",f=0===k[0].offsetHeight)),m.removeChild(i)}}}();var Ra,Sa,Ta=/^(top|right|bottom|left)$/;a.getComputedStyle?(Ra=function(b){var c=b.ownerDocument.defaultView;return c\u0026\u0026c.opener||(c=a),c.getComputedStyle(b)},Sa=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ra(a),g=c?c.getPropertyValue(b)||c[b]:void 0,\"\"!==g\u0026\u0026void 0!==g||n.contains(a.ownerDocument,a)||(g=n.style(a,b)),c\u0026\u0026!l.pixelMarginRight()\u0026\u0026Oa.test(g)\u0026\u0026Na.test(b)\u0026\u0026(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f),void 0===g?g:g+\"\"}):Qa.currentStyle\u0026\u0026(Ra=function(a){return a.currentStyle},Sa=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ra(a),g=c?c[b]:void 0,null==g\u0026\u0026h\u0026\u0026h[b]\u0026\u0026(g=h[b]),Oa.test(g)\u0026\u0026!Ta.test(b)\u0026\u0026(d=h.left,e=a.runtimeStyle,f=e\u0026\u0026e.left,f\u0026\u0026(e.left=a.currentStyle.left),h.left=\"fontSize\"===b?\"1em\":g,g=h.pixelLeft+\"px\",h.left=d,f\u0026\u0026(e.left=f)),void 0===g?g:g+\"\"||\"auto\"});function Ua(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}var Va=/alpha\\([^)]*\\)/i,Wa=/opacity\\s*=\\s*([^)]*)/i,Xa=/^(none|table(?!-c[ea]).+)/,Ya=new RegExp(\"^(\"+T+\")(.*)$\",\"i\"),Za={position:\"absolute\",visibility:\"hidden\",display:\"block\"},$a={letterSpacing:\"0\",fontWeight:\"400\"},_a=[\"Webkit\",\"O\",\"Moz\",\"ms\"],ab=d.createElement(\"div\").style;function bb(a){if(a in ab)return a;var b=a.charAt(0).toUpperCase()+a.slice(1),c=_a.length;while(c--)if(a=_a[c]+b,a in ab)return a}function cb(a,b){for(var c,d,e,f=[],g=0,h=a.length;hg;g++)d=a[g],d.style\u0026\u0026(f[g]=n._data(d,\"olddisplay\"),c=d.style.display,b?(f[g]||\"none\"!==c||(d.style.display=\"\"),\"\"===d.style.display\u0026\u0026W(d)\u0026\u0026(f[g]=n._data(d,\"olddisplay\",Ma(d.nodeName)))):(e=W(d),(c\u0026\u0026\"none\"!==c||!e)\u0026\u0026n._data(d,\"olddisplay\",e?c:n.css(d,\"display\"))));for(g=0;hg;g++)d=a[g],d.style\u0026\u0026(b\u0026\u0026\"none\"!==d.style.display\u0026\u0026\"\"!==d.style.display||(d.style.display=b?f[g]||\"\":\"none\"));return a}function db(a,b,c){var d=Ya.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||\"px\"):b}function eb(a,b,c,d,e){for(var f=c===(d?\"border\":\"content\")?4:\"width\"===b?1:0,g=0;4f;f+=2)\"margin\"===c\u0026\u0026(g+=n.css(a,c+V[f],!0,e)),d?(\"content\"===c\u0026\u0026(g-=n.css(a,\"padding\"+V[f],!0,e)),\"margin\"!==c\u0026\u0026(g-=n.css(a,\"border\"+V[f]+\"Width\",!0,e))):(g+=n.css(a,\"padding\"+V[f],!0,e),\"padding\"!==c\u0026\u0026(g+=n.css(a,\"border\"+V[f]+\"Width\",!0,e)));return g}function fb(a,b,c){var d=!0,e=\"width\"===b?a.offsetWidth:a.offsetHeight,f=Ra(a),g=l.boxSizing\u0026\u0026\"border-box\"===n.css(a,\"boxSizing\",!1,f);if(0=e||null==e){if(e=Sa(a,b,f),(0e||null==e)\u0026\u0026(e=a.style[b]),Oa.test(e))return e;d=g\u0026\u0026(l.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+eb(a,b,c||(g?\"border\":\"content\"),d,f)+\"px\"}n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Sa(a,\"opacity\");return\"\"===c?\"1\":c}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{\"float\":l.cssFloat?\"cssFloat\":\"styleFloat\"},style:function(a,b,c,d){if(a\u0026\u00263!==a.nodeType\u0026\u00268!==a.nodeType\u0026\u0026a.style){var e,f,g,h=n.camelCase(b),i=a.style;if(b=n.cssProps[h]||(n.cssProps[h]=bb(h)||h),g=n.cssHooks[b]||n.cssHooks[h],void 0===c)return g\u0026\u0026\"get\"in g\u0026\u0026void 0!==(e=g.get(a,!1,d))?e:i[b];if(f=typeof c,\"string\"===f\u0026\u0026(e=U.exec(c))\u0026\u0026e[1]\u0026\u0026(c=X(a,b,e),f=\"number\"),null!=c\u0026\u0026c===c\u0026\u0026(\"number\"===f\u0026\u0026(c+=e\u0026\u0026e[3]||(n.cssNumber[h]?\"\":\"px\")),l.clearCloneStyle||\"\"!==c||0!==b.indexOf(\"background\")||(i[b]=\"inherit\"),!(g\u0026\u0026\"set\"in g\u0026\u0026void 0===(c=g.set(a,c,d)))))try{i[b]=c}catch(j){}}},css:function(a,b,c,d){var e,f,g,h=n.camelCase(b);return b=n.cssProps[h]||(n.cssProps[h]=bb(h)||h),g=n.cssHooks[b]||n.cssHooks[h],g\u0026\u0026\"get\"in g\u0026\u0026(f=g.get(a,!0,c)),void 0===f\u0026\u0026(f=Sa(a,b,d)),\"normal\"===f\u0026\u0026b in $a\u0026\u0026(f=$a[b]),\"\"===c||c?(e=parseFloat(f),c===!0||isFinite(e)?e||0:f):f}}),n.each([\"height\",\"width\"],function(a,b){n.cssHooks[b]={get:function(a,c,d){return c?Xa.test(n.css(a,\"display\"))\u0026\u00260===a.offsetWidth?Pa(a,Za,function(){return fb(a,b,d)}):fb(a,b,d):void 0},set:function(a,c,d){var e=d\u0026\u0026Ra(a);return db(a,c,d?eb(a,b,d,l.boxSizing\u0026\u0026\"border-box\"===n.css(a,\"boxSizing\",!1,e),e):0)}}}),l.opacity||(n.cssHooks.opacity={get:function(a,b){return Wa.test((b\u0026\u0026a.currentStyle?a.currentStyle.filter:a.style.filter)||\"\")?.01*parseFloat(RegExp.$1)+\"\":b?\"1\":\"\"},set:function(a,b){var c=a.style,d=a.currentStyle,e=n.isNumeric(b)?\"alpha(opacity=\"+100*b+\")\":\"\",f=d\u0026\u0026d.filter||c.filter||\"\";c.zoom=1,(b=1||\"\"===b)\u0026\u0026\"\"===n.trim(f.replace(Va,\"\"))\u0026\u0026c.removeAttribute\u0026\u0026(c.removeAttribute(\"filter\"),\"\"===b||d\u0026\u0026!d.filter)||(c.filter=Va.test(f)?f.replace(Va,e):f+\" \"+e)}}),n.cssHooks.marginRight=Ua(l.reliableMarginRight,function(a,b){return b?Pa(a,{display:\"inline-block\"},Sa,[a,\"marginRight\"]):void 0}),n.cssHooks.marginLeft=Ua(l.reliableMarginLeft,function(a,b){return b?(parseFloat(Sa(a,\"marginLeft\"))||(n.contains(a.ownerDocument,a)?a.getBoundingClientRect().left-Pa(a,{ marginLeft:0},function(){return a.getBoundingClientRect().left}):0))+\"px\":void 0}),n.each({margin:\"\",padding:\"\",border:\"Width\"},function(a,b){n.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f=\"string\"==typeof c?c.split(\" \"):[c];4d;d++)e[a+V[d]+b]=f[d]||f[d-2]||f[0];return e}},Na.test(a)||(n.cssHooks[a+b].set=db)}),n.fn.extend({css:function(a,b){return Y(this,function(a,b,c){var d,e,f={},g=0;if(n.isArray(b)){for(d=Ra(a),e=b.length;eg;g++)f[b[g]]=n.css(a,b[g],!1,d);return f}return void 0!==c?n.style(a,b,c):n.css(a,b)},a,b,arguments.length1)},show:function(){return cb(this,!0)},hide:function(){return cb(this)},toggle:function(a){return\"boolean\"==typeof a?a?this.show():this.hide():this.each(function(){W(this)?n(this).show():n(this).hide()})}});function gb(a,b,c,d,e){return new gb.prototype.init(a,b,c,d,e)}n.Tween=gb,gb.prototype={constructor:gb,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||n.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(n.cssNumber[c]?\"\":\"px\")},cur:function(){var a=gb.propHooks[this.prop];return a\u0026\u0026a.get?a.get(this):gb.propHooks._default.get(this)},run:function(a){var b,c=gb.propHooks[this.prop];return this.options.duration?this.pos=b=n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step\u0026\u0026this.options.step.call(this.elem,this.now,this),c\u0026\u0026c.set?c.set(this):gb.propHooks._default.set(this),this}},gb.prototype.init.prototype=gb.prototype,gb.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]\u0026\u0026null==a.elem.style[a.prop]?a.elem[a.prop]:(b=n.css(a.elem,a.prop,\"\"),b\u0026\u0026\"auto\"!==b?b:0)},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[n.cssProps[a.prop]]\u0026\u0026!n.cssHooks[a.prop]?a.elem[a.prop]=a.now:n.style(a.elem,a.prop,a.now+a.unit)}}},gb.propHooks.scrollTop=gb.propHooks.scrollLeft={set:function(a){a.elem.nodeType\u0026\u0026a.elem.parentNode\u0026\u0026(a.elem[a.prop]=a.now)}},n.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:\"swing\"},n.fx=gb.prototype.init,n.fx.step={};var hb,ib,jb=/^(?:toggle|show|hide)$/,kb=/queueHooks$/;function lb(){return a.setTimeout(function(){hb=void 0}),hb=n.now()}function mb(a,b){var c,d={height:a},e=0;for(b=b?1:0;4e;e+=2-b)c=V[e],d[\"margin\"+c]=d[\"padding\"+c]=a;return b\u0026\u0026(d.opacity=d.width=a),d}function nb(a,b,c){for(var d,e=(qb.tweeners[b]||[]).concat(qb.tweeners[\"*\"]),f=0,g=e.length;gf;f++)if(d=e[f].call(c,b,a))return d}function ob(a,b,c){var d,e,f,g,h,i,j,k,m=this,o={},p=a.style,q=a.nodeType\u0026\u0026W(a),r=n._data(a,\"fxshow\");c.queue||(h=n._queueHooks(a,\"fx\"),null==h.unqueued\u0026\u0026(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,m.always(function(){m.always(function(){h.unqueued--,n.queue(a,\"fx\").length||h.empty.fire()})})),1===a.nodeType\u0026\u0026(\"height\"in b||\"width\"in b)\u0026\u0026(c.overflow=[p.overflow,p.overflowX,p.overflowY],j=n.css(a,\"display\"),k=\"none\"===j?n._data(a,\"olddisplay\")||Ma(a.nodeName):j,\"inline\"===k\u0026\u0026\"none\"===n.css(a,\"float\")\u0026\u0026(l.inlineBlockNeedsLayout\u0026\u0026\"inline\"!==Ma(a.nodeName)?p.zoom=1:p.display=\"inline-block\")),c.overflow\u0026\u0026(p.overflow=\"hidden\",l.shrinkWrapBlocks()||m.always(function(){p.overflow=c.overflow[0],p.overflowX=c.overflow[1],p.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],jb.exec(e)){if(delete b[d],f=f||\"toggle\"===e,e===(q?\"hide\":\"show\")){if(\"show\"!==e||!r||void 0===r[d])continue;q=!0}o[d]=r\u0026\u0026r[d]||n.style(a,d)}else j=void 0;if(n.isEmptyObject(o))\"inline\"===(\"none\"===j?Ma(a.nodeName):j)\u0026\u0026(p.display=j);else{r?\"hidden\"in r\u0026\u0026(q=r.hidden):r=n._data(a,\"fxshow\",{}),f\u0026\u0026(r.hidden=!q),q?n(a).show():m.done(function(){n(a).hide()}),m.done(function(){var b;n._removeData(a,\"fxshow\");for(b in o)n.style(a,b,o[b])});for(d in o)g=nb(q?r[d]:0,d,m),d in r||(r[d]=g.start,q\u0026\u0026(g.end=g.start,g.start=\"width\"===d||\"height\"===d?1:0))}}function pb(a,b){var c,d,e,f,g;for(c in a)if(d=n.camelCase(c),e=b[d],f=a[c],n.isArray(f)\u0026\u0026(e=f[1],f=a[c]=f[0]),c!==d\u0026\u0026(a[d]=f,delete a[c]),g=n.cssHooks[d],g\u0026\u0026\"expand\"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function qb(a,b,c){var d,e,f=0,g=qb.prefilters.length,h=n.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=hb||lb(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;ig;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1f\u0026\u0026i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{},easing:n.easing._default},c),originalProperties:b,originalOptions:c,startTime:hb||lb(),duration:c.duration,tweens:[],createTween:function(b,c){var d=n.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;dc;c++)j.tweens[c].run(1);return b?(h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j,b])):h.rejectWith(a,[j,b]),this}}),k=j.props;for(pb(k,j.opts.specialEasing);gf;f++)if(d=qb.prefilters[f].call(j,a,k,j.opts))return n.isFunction(d.stop)\u0026\u0026(n._queueHooks(j.elem,j.opts.queue).stop=n.proxy(d.stop,d)),d;return n.map(k,nb,j),n.isFunction(j.opts.start)\u0026\u0026j.opts.start.call(a,j),n.fx.timer(n.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}n.Animation=n.extend(qb,{tweeners:{\"*\":[function(a,b){var c=this.createTween(a,b);return X(c.elem,a,U.exec(b),c),c}]},tweener:function(a,b){n.isFunction(a)?(b=a,a=[\"*\"]):a=a.match(G);for(var c,d=0,e=a.length;ed;d++)c=a[d],qb.tweeners[c]=qb.tweeners[c]||[],qb.tweeners[c].unshift(b)},prefilters:[ob],prefilter:function(a,b){b?qb.prefilters.unshift(a):qb.prefilters.push(a)}}),n.speed=function(a,b,c){var d=a\u0026\u0026\"object\"==typeof a?n.extend({},a):{complete:c||!c\u0026\u0026b||n.isFunction(a)\u0026\u0026a,duration:a,easing:c\u0026\u0026b||b\u0026\u0026!n.isFunction(b)\u0026\u0026b};return d.duration=n.fx.off?0:\"number\"==typeof d.duration?d.duration:d.duration in n.fx.speeds?n.fx.speeds[d.duration]:n.fx.speeds._default,null!=d.queue\u0026\u0026d.queue!==!0||(d.queue=\"fx\"),d.old=d.complete,d.complete=function(){n.isFunction(d.old)\u0026\u0026d.old.call(this),d.queue\u0026\u0026n.dequeue(this,d.queue)},d},n.fn.extend({fadeTo:function(a,b,c,d){return this.filter(W).css(\"opacity\",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=n.isEmptyObject(a),f=n.speed(b,c,d),g=function(){var b=qb(this,n.extend({},a),f);(e||n._data(this,\"finish\"))\u0026\u0026b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return\"string\"!=typeof a\u0026\u0026(c=b,b=a,a=void 0),b\u0026\u0026a!==!1\u0026\u0026this.queue(a||\"fx\",[]),this.each(function(){var b=!0,e=null!=a\u0026\u0026a+\"queueHooks\",f=n.timers,g=n._data(this);if(e)g[e]\u0026\u0026g[e].stop\u0026\u0026d(g[e]);else for(e in g)g[e]\u0026\u0026g[e].stop\u0026\u0026kb.test(e)\u0026\u0026d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a\u0026\u0026f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));!b\u0026\u0026c||n.dequeue(this,a)})},finish:function(a){return a!==!1\u0026\u0026(a=a||\"fx\"),this.each(function(){var b,c=n._data(this),d=c[a+\"queue\"],e=c[a+\"queueHooks\"],f=n.timers,g=d?d.length:0;for(c.finish=!0,n.queue(this,a,[]),e\u0026\u0026e.stop\u0026\u0026e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this\u0026\u0026f[b].queue===a\u0026\u0026(f[b].anim.stop(!0),f.splice(b,1));for(b=0;gb;b++)d[b]\u0026\u0026d[b].finish\u0026\u0026d[b].finish.call(this);delete c.finish})}}),n.each([\"toggle\",\"show\",\"hide\"],function(a,b){var c=n.fn[b];n.fn[b]=function(a,d,e){return null==a||\"boolean\"==typeof a?c.apply(this,arguments):this.animate(mb(b,!0),a,d,e)}}),n.each({slideDown:mb(\"show\"),slideUp:mb(\"hide\"),slideToggle:mb(\"toggle\"),fadeIn:{opacity:\"show\"},fadeOut:{opacity:\"hide\"},fadeToggle:{opacity:\"toggle\"}},function(a,b){n.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),n.timers=[],n.fx.tick=function(){var a,b=n.timers,c=0;for(hb=n.now();ca\",a=c.getElementsByTagName(\"a\")[0],b.setAttribute(\"type\",\"checkbox\"),c.appendChild(b),a=c.getElementsByTagName(\"a\")[0],a.style.cssText=\"top:1px\",l.getSetAttribute=\"t\"!==c.className,l.style=/top/.test(a.getAttribute(\"style\")),l.hrefNormalized=\"/a\"===a.getAttribute(\"href\"),l.checkOn=!!b.value,l.optSelected=f.selected,l.enctype=!!d.createElement(\"form\").enctype,e.disabled=!0,l.optDisabled=!f.disabled,b=d.createElement(\"input\"),b.setAttribute(\"value\",\"\"),l.input=\"\"===b.getAttribute(\"value\"),b.value=\"t\",b.setAttribute(\"type\",\"radio\"),l.radioValue=\"t\"===b.value}();var rb=/\\r/g,sb=/[\\x20\\t\\r\\n\\f]+/g;n.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=n.isFunction(a),this.each(function(c){var e;1===this.nodeType\u0026\u0026(e=d?a.call(this,c,n(this).val()):a,null==e?e=\"\":\"number\"==typeof e?e+=\"\":n.isArray(e)\u0026\u0026(e=n.map(e,function(a){return null==a?\"\":a+\"\"})),b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],b\u0026\u0026\"set\"in b\u0026\u0026void 0!==b.set(this,e,\"value\")||(this.value=e))});if(e)return b=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()],b\u0026\u0026\"get\"in b\u0026\u0026void 0!==(c=b.get(e,\"value\"))?c:(c=e.value,\"string\"==typeof c?c.replace(rb,\"\"):null==c?\"\":c)}}}),n.extend({valHooks:{option:{get:function(a){var b=n.find.attr(a,\"value\");return null!=b?b:n.trim(n.text(a)).replace(sb,\" \")}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f=\"select-one\"===a.type||0e,g=f?null:[],h=f?e+1:d.length,i=0e?h:f?e:0;hi;i++)if(c=d[i],(c.selected||i===e)\u0026\u0026(l.optDisabled?!c.disabled:null===c.getAttribute(\"disabled\"))\u0026\u0026(!c.parentNode.disabled||!n.nodeName(c.parentNode,\"optgroup\"))){if(b=n(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=n.makeArray(b),g=e.length;while(g--)if(d=e[g],n.inArray(n.valHooks.option.get(d),f)-1)try{d.selected=c=!0}catch(h){d.scrollHeight}else d.selected=!1;return c||(a.selectedIndex=-1),e}}}}),n.each([\"radio\",\"checkbox\"],function(){n.valHooks[this]={set:function(a,b){return n.isArray(b)?a.checked=n.inArray(n(a).val(),b)-1:void 0}},l.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute(\"value\")?\"on\":a.value})});var tb,ub,vb=n.expr.attrHandle,wb=/^(?:checked|selected)$/i,xb=l.getSetAttribute,yb=l.input;n.fn.extend({attr:function(a,b){return Y(this,n.attr,a,b,arguments.length1)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}}),n.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(3!==f\u0026\u00268!==f\u0026\u00262!==f)return\"undefined\"==typeof a.getAttribute?n.prop(a,b,c):(1===f\u0026\u0026n.isXMLDoc(a)||(b=b.toLowerCase(),e=n.attrHooks[b]||(n.expr.match.bool.test(b)?ub:tb)),void 0!==c?null===c?void n.removeAttr(a,b):e\u0026\u0026\"set\"in e\u0026\u0026void 0!==(d=e.set(a,c,b))?d:(a.setAttribute(b,c+\"\"),c):e\u0026\u0026\"get\"in e\u0026\u0026null!==(d=e.get(a,b))?d:(d=n.find.attr(a,b),null==d?void 0:d))},attrHooks:{type:{set:function(a,b){if(!l.radioValue\u0026\u0026\"radio\"===b\u0026\u0026n.nodeName(a,\"input\")){var c=a.value;return a.setAttribute(\"type\",b),c\u0026\u0026(a.value=c),b}}}},removeAttr:function(a,b){var c,d,e=0,f=b\u0026\u0026b.match(G);if(f\u0026\u00261===a.nodeType)while(c=f[e++])d=n.propFix[c]||c,n.expr.match.bool.test(c)?yb\u0026\u0026xb||!wb.test(c)?a[d]=!1:a[n.camelCase(\"default-\"+c)]=a[d]=!1:n.attr(a,c,\"\"),a.removeAttribute(xb?c:d)}}),ub={set:function(a,b,c){return b===!1?n.removeAttr(a,c):yb\u0026\u0026xb||!wb.test(c)?a.setAttribute(!xb\u0026\u0026n.propFix[c]||c,c):a[n.camelCase(\"default-\"+c)]=a[c]=!0,c}},n.each(n.expr.match.bool.source.match(/\\w+/g),function(a,b){var c=vb[b]||n.find.attr;yb\u0026\u0026xb||!wb.test(b)?vb[b]=function(a,b,d){var e,f;return d||(f=vb[b],vb[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,vb[b]=f),e}:vb[b]=function(a,b,c){return c?void 0:a[n.camelCase(\"default-\"+b)]?b.toLowerCase():null}}),yb\u0026\u0026xb||(n.attrHooks.value={set:function(a,b,c){return n.nodeName(a,\"input\")?void(a.defaultValue=b):tb\u0026\u0026tb.set(a,b,c)}}),xb||(tb={set:function(a,b,c){var d=a.getAttributeNode(c);return d||a.setAttributeNode(d=a.ownerDocument.createAttribute(c)),d.value=b+=\"\",\"value\"===c||b===a.getAttribute(c)?b:void 0}},vb.id=vb.name=vb.coords=function(a,b,c){var d;return c?void 0:(d=a.getAttributeNode(b))\u0026\u0026\"\"!==d.value?d.value:null},n.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);return c\u0026\u0026c.specified?c.value:void 0},set:tb.set},n.attrHooks.contenteditable={set:function(a,b,c){tb.set(a,\"\"===b?!1:b,c)}},n.each([\"width\",\"height\"],function(a,b){n.attrHooks[b]={set:function(a,c){return\"\"===c?(a.setAttribute(b,\"auto\"),c):void 0}}})),l.style||(n.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,b){return a.style.cssText=b+\"\"}});var zb=/^(?:input|select|textarea|button|object)$/i,Ab=/^(?:a|area)$/i;n.fn.extend({prop:function(a,b){return Y(this,n.prop,a,b,arguments.length1)},removeProp:function(a){return a=n.propFix[a]||a,this.each(function(){try{this[a]=void 0,delete this[a]}catch(b){}})}}),n.extend({prop:function(a,b,c){var d,e,f=a.nodeType;if(3!==f\u0026\u00268!==f\u0026\u00262!==f)return 1===f\u0026\u0026n.isXMLDoc(a)||(b=n.propFix[b]||b,e=n.propHooks[b]),void 0!==c?e\u0026\u0026\"set\"in e\u0026\u0026void 0!==(d=e.set(a,c,b))?d:a[b]=c:e\u0026\u0026\"get\"in e\u0026\u0026null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=n.find.attr(a,\"tabindex\");return b?parseInt(b,10):zb.test(a.nodeName)||Ab.test(a.nodeName)\u0026\u0026a.href?0:-1}}},propFix:{\"for\":\"htmlFor\",\"class\":\"className\"}}),l.hrefNormalized||n.each([\"href\",\"src\"],function(a,b){n.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),l.optSelected||(n.propHooks.selected={get:function(a){var b=a.parentNode;return b\u0026\u0026(b.selectedIndex,b.parentNode\u0026\u0026b.parentNode.selectedIndex),null},set:function(a){var b=a.parentNode;b\u0026\u0026(b.selectedIndex,b.parentNode\u0026\u0026b.parentNode.selectedIndex)}}),n.each([\"tabIndex\",\"readOnly\",\"maxLength\",\"cellSpacing\",\"cellPadding\",\"rowSpan\",\"colSpan\",\"useMap\",\"frameBorder\",\"contentEditable\"],function(){n.propFix[this.toLowerCase()]=this}),l.enctype||(n.propFix.enctype=\"encoding\");var Bb=/[\\t\\r\\n\\f]/g;function Cb(a){return n.attr(a,\"class\")||\"\"}n.fn.extend({addClass:function(a){var b,c,d,e,f,g,h,i=0;if(n.isFunction(a))return this.each(function(b){n(this).addClass(a.call(this,b,Cb(this)))});if(\"string\"==typeof a\u0026\u0026a){b=a.match(G)||[];while(c=this[i++])if(e=Cb(c),d=1===c.nodeType\u0026\u0026(\" \"+e+\" \").replace(Bb,\" \")){g=0;while(f=b[g++])d.indexOf(\" \"+f+\" \")-1)d=d.replace(\" \"+f+\" \",\" \");h=n.trim(d),e!==h\u0026\u0026n.attr(c,\"class\",h)}}return this},toggleClass:function(a,b){var c=typeof a;return\"boolean\"==typeof b\u0026\u0026\"string\"===c?b?this.addClass(a):this.removeClass(a):n.isFunction(a)?this.each(function(c){n(this).toggleClass(a.call(this,c,Cb(this),b),b)}):this.each(function(){var b,d,e,f;if(\"string\"===c){d=0,e=n(this),f=a.match(G)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else void 0!==a\u0026\u0026\"boolean\"!==c||(b=Cb(this),b\u0026\u0026n._data(this,\"__className__\",b),n.attr(this,\"class\",b||a===!1?\"\":n._data(this,\"__className__\")||\"\"))})},hasClass:function(a){var b,c,d=0;b=\" \"+a+\" \";while(c=this[d++])if(1===c.nodeType\u0026\u0026(\" \"+Cb(c)+\" \").replace(Bb,\" \").indexOf(b)-1)return!0;return!1}}),n.each(\"blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu\".split(\" \"),function(a,b){n.fn[b]=function(a,c){return arguments.length0?this.on(b,null,a,c):this.trigger(b)}}),n.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});var Db=a.location,Eb=n.now(),Fb=/\\?/,Gb=/(,)|(\\[|{)|(}|])|\"(?:[^\"\\\\\\r\\n]|\\\\[\"\\\\\\/bfnrt]|\\\\u[\\da-fA-F]{4})*\"\\s*:?|true|false|null|-?(?!0\\d)\\d+(?:\\.\\d+|)(?:[eE][+-]?\\d+|)/g;n.parseJSON=function(b){if(a.JSON\u0026\u0026a.JSON.parse)return a.JSON.parse(b+\"\");var c,d=null,e=n.trim(b+\"\");return e\u0026\u0026!n.trim(e.replace(Gb,function(a,b,e,f){return c\u0026\u0026b\u0026\u0026(d=0),0===d?a:(c=e||b,d+=!f-!e,\"\")}))?Function(\"return \"+e)():n.error(\"Invalid JSON: \"+b)},n.parseXML=function(b){var c,d;if(!b||\"string\"!=typeof b)return null;try{a.DOMParser?(d=new a.DOMParser,c=d.parseFromString(b,\"text/xml\")):(c=new a.ActiveXObject(\"Microsoft.XMLDOM\"),c.async=\"false\",c.loadXML(b))}catch(e){c=void 0}return c\u0026\u0026c.documentElement\u0026\u0026!c.getElementsByTagName(\"parsererror\").length||n.error(\"Invalid XML: \"+b),c};var Hb=/#.*$/,Ib=/([?\u0026])_=[^\u0026]*/,Jb=/^(.*?):[ \\t]*([^\\r\\n]*)\\r?$/gm,Kb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Lb=/^(?:GET|HEAD)$/,Mb=/^\\/\\//,Nb=/^([\\w.+-]+:)(?:\\/\\/(?:[^\\/?#]*@|)([^\\/?#:]*)(?::(\\d+)|)|)/,Ob={},Pb={},Qb=\"*/\".concat(\"*\"),Rb=Db.href,Sb=Nb.exec(Rb.toLowerCase())||[];function Tb(a){return function(b,c){\"string\"!=typeof b\u0026\u0026(c=b,b=\"*\");var d,e=0,f=b.toLowerCase().match(G)||[];if(n.isFunction(c))while(d=f[e++])\"+\"===d.charAt(0)?(d=d.slice(1)||\"*\",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function Ub(a,b,c,d){var e={},f=a===Pb;function g(h){var i;return e[h]=!0,n.each(a[h]||[],function(a,h){var j=h(b,c,d);return\"string\"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e[\"*\"]\u0026\u0026g(\"*\")}function Vb(a,b){var c,d,e=n.ajaxSettings.flatOptions||{};for(d in b)void 0!==b[d]\u0026\u0026((e[d]?a:c||(c={}))[d]=b[d]);return c\u0026\u0026n.extend(!0,a,c),a}function Wb(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while(\"*\"===i[0])i.shift(),void 0===e\u0026\u0026(e=a.mimeType||b.getResponseHeader(\"Content-Type\"));if(e)for(g in h)if(h[g]\u0026\u0026h[g].test(e)){i.unshift(g);break}if(i[0]in c)f=i[0];else{for(g in c){if(!i[0]||a.converters[g+\" \"+i[0]]){f=g;break}d||(d=g)}f=f||d}return f?(f!==i[0]\u0026\u0026i.unshift(f),c[f]):void 0}function Xb(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]\u0026\u0026(c[a.responseFields[f]]=b),!i\u0026\u0026d\u0026\u0026a.dataFilter\u0026\u0026(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if(\"*\"===f)f=i;else if(\"*\"!==i\u0026\u0026i!==f){if(g=j[i+\" \"+f]||j[\"* \"+f],!g)for(e in j)if(h=e.split(\" \"),h[1]===f\u0026\u0026(g=j[i+\" \"+h[0]]||j[\"* \"+h[0]])){g===!0?g=j[e]:j[e]!==!0\u0026\u0026(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g\u0026\u0026a[\"throws\"])b=g(b);else try{b=g(b)}catch(l){return{state:\"parsererror\",error:g?l:\"No conversion from \"+i+\" to \"+f}}}return{state:\"success\",data:b}}n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Rb,type:\"GET\",isLocal:Kb.test(Sb[1]),global:!0,processData:!0,async:!0,contentType:\"application/x-www-form-urlencoded; charset=UTF-8\",accepts:{\"*\":Qb,text:\"text/plain\",html:\"text/html\",xml:\"application/xml, text/xml\",json:\"application/json, text/javascript\"},contents:{xml:/\\bxml\\b/,html:/\\bhtml/,json:/\\bjson\\b/},responseFields:{xml:\"responseXML\",text:\"responseText\",json:\"responseJSON\"},converters:{\"* text\":String,\"text html\":!0,\"text json\":n.parseJSON,\"text xml\":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Vb(Vb(a,n.ajaxSettings),b):Vb(n.ajaxSettings,a)},ajaxPrefilter:Tb(Ob),ajaxTransport:Tb(Pb),ajax:function(b,c){\"object\"==typeof b\u0026\u0026(c=b,b=void 0),c=c||{};var d,e,f,g,h,i,j,k,l=n.ajaxSetup({},c),m=l.context||l,o=l.context\u0026\u0026(m.nodeType||m.jquery)?n(m):n.event,p=n.Deferred(),q=n.Callbacks(\"once memory\"),r=l.statusCode||{},s={},t={},u=0,v=\"canceled\",w={readyState:0,getResponseHeader:function(a){var b;if(2===u){if(!k){k={};while(b=Jb.exec(g))k[b[1].toLowerCase()]=b[2]}b=k[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===u?g:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return u||(a=t[c]=t[c]||a,s[a]=b),this},overrideMimeType:function(a){return u||(l.mimeType=a),this},statusCode:function(a){var b;if(a)if(2u)for(b in a)r[b]=[r[b],a[b]];else w.always(a[w.status]);return this},abort:function(a){var b=a||v;return j\u0026\u0026j.abort(b),y(0,b),this}};if(p.promise(w).complete=q.add,w.success=w.done,w.error=w.fail,l.url=((b||l.url||Rb)+\"\").replace(Hb,\"\").replace(Mb,Sb[1]+\"//\"),l.type=c.method||c.type||l.method||l.type,l.dataTypes=n.trim(l.dataType||\"*\").toLowerCase().match(G)||[\"\"],null==l.crossDomain\u0026\u0026(d=Nb.exec(l.url.toLowerCase()),l.crossDomain=!(!d||d[1]===Sb[1]\u0026\u0026d[2]===Sb[2]\u0026\u0026(d[3]||(\"http:\"===d[1]?\"80\":\"443\"))===(Sb[3]||(\"http:\"===Sb[1]?\"80\":\"443\")))),l.data\u0026\u0026l.processData\u0026\u0026\"string\"!=typeof l.data\u0026\u0026(l.data=n.param(l.data,l.traditional)),Ub(Ob,l,c,w),2===u)return w;i=n.event\u0026\u0026l.global,i\u0026\u00260===n.active++\u0026\u0026n.event.trigger(\"ajaxStart\"),l.type=l.type.toUpperCase(),l.hasContent=!Lb.test(l.type),f=l.url,l.hasContent||(l.data\u0026\u0026(f=l.url+=(Fb.test(f)?\"\u0026\":\"?\")+l.data,delete l.data),l.cache===!1\u0026\u0026(l.url=Ib.test(f)?f.replace(Ib,\"$1_=\"+Eb++):f+(Fb.test(f)?\"\u0026\":\"?\")+\"_=\"+Eb++)),l.ifModified\u0026\u0026(n.lastModified[f]\u0026\u0026w.setRequestHeader(\"If-Modified-Since\",n.lastModified[f]),n.etag[f]\u0026\u0026w.setRequestHeader(\"If-None-Match\",n.etag[f])),(l.data\u0026\u0026l.hasContent\u0026\u0026l.contentType!==!1||c.contentType)\u0026\u0026w.setRequestHeader(\"Content-Type\",l.contentType),w.setRequestHeader(\"Accept\",l.dataTypes[0]\u0026\u0026l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+(\"*\"!==l.dataTypes[0]?\", \"+Qb+\"; q=0.01\":\"\"):l.accepts[\"*\"]);for(e in l.headers)w.setRequestHeader(e,l.headers[e]);if(l.beforeSend\u0026\u0026(l.beforeSend.call(m,w,l)===!1||2===u))return w.abort();v=\"abort\";for(e in{success:1,error:1,complete:1})w[e](l[e]);if(j=Ub(Pb,l,c,w)){if(w.readyState=1,i\u0026\u0026o.trigger(\"ajaxSend\",[w,l]),2===u)return w;l.async\u0026\u0026l.timeout0\u0026\u0026(h=a.setTimeout(function(){w.abort(\"timeout\")},l.timeout));try{u=1,j.send(s,y)}catch(x){if(!(2u))throw x;y(-1,x)}}else y(-1,\"No Transport\");function y(b,c,d,e){var k,s,t,v,x,y=c;2!==u\u0026\u0026(u=2,h\u0026\u0026a.clearTimeout(h),j=void 0,g=e||\"\",w.readyState=b0?4:0,k=b=200\u0026\u0026300b||304===b,d\u0026\u0026(v=Wb(l,w,d)),v=Xb(l,v,w,k),k?(l.ifModified\u0026\u0026(x=w.getResponseHeader(\"Last-Modified\"),x\u0026\u0026(n.lastModified[f]=x),x=w.getResponseHeader(\"etag\"),x\u0026\u0026(n.etag[f]=x)),204===b||\"HEAD\"===l.type?y=\"nocontent\":304===b?y=\"notmodified\":(y=v.state,s=v.data,t=v.error,k=!t)):(t=y,!b\u0026\u0026y||(y=\"error\",0b\u0026\u0026(b=0))),w.status=b,w.statusText=(c||y)+\"\",k?p.resolveWith(m,[s,y,w]):p.rejectWith(m,[w,y,t]),w.statusCode(r),r=void 0,i\u0026\u0026o.trigger(k?\"ajaxSuccess\":\"ajaxError\",[w,l,k?s:t]),q.fireWith(m,[w,y]),i\u0026\u0026(o.trigger(\"ajaxComplete\",[w,l]),--n.active||n.event.trigger(\"ajaxStop\")))}return w},getJSON:function(a,b,c){return n.get(a,b,c,\"json\")},getScript:function(a,b){return n.get(a,void 0,b,\"script\")}}),n.each([\"get\",\"post\"],function(a,b){n[b]=function(a,c,d,e){return n.isFunction(c)\u0026\u0026(e=e||d,d=c,c=void 0),n.ajax(n.extend({url:a,type:b,dataType:e,data:c,success:d},n.isPlainObject(a)\u0026\u0026a))}}),n._evalUrl=function(a){return n.ajax({url:a,type:\"GET\",dataType:\"script\",cache:!0,async:!1,global:!1,\"throws\":!0})},n.fn.extend({wrapAll:function(a){if(n.isFunction(a))return this.each(function(b){n(this).wrapAll(a.call(this,b))});if(this[0]){var b=n(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode\u0026\u0026b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild\u0026\u00261===a.firstChild.nodeType)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return n.isFunction(a)?this.each(function(b){n(this).wrapInner(a.call(this,b))}):this.each(function(){var b=n(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(c){n(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,\"body\")||n(this).replaceWith(this.childNodes)}).end()}});function Yb(a){return a.style\u0026\u0026a.style.display||n.css(a,\"display\")}function Zb(a){if(!n.contains(a.ownerDocument||d,a))return!0;while(a\u0026\u00261===a.nodeType){if(\"none\"===Yb(a)||\"hidden\"===a.type)return!0;a=a.parentNode}return!1}n.expr.filters.hidden=function(a){return l.reliableHiddenOffsets()?a.offsetWidth8?hc():/^(get|post|head|put|delete|options)$/i.test(this.type)\u0026\u0026hc()||ic()}:hc;var ec=0,fc={},gc=n.ajaxSettings.xhr();a.attachEvent\u0026\u0026a.attachEvent(\"onunload\",function(){for(var a in fc)fc[a](void 0,!0)}),l.cors=!!gc\u0026\u0026\"withCredentials\"in gc,gc=l.ajax=!!gc,gc\u0026\u0026n.ajaxTransport(function(b){if(!b.crossDomain||l.cors){var c;return{send:function(d,e){var f,g=b.xhr(),h=++ec;if(g.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(f in b.xhrFields)g[f]=b.xhrFields[f];b.mimeType\u0026\u0026g.overrideMimeType\u0026\u0026g.overrideMimeType(b.mimeType),b.crossDomain||d[\"X-Requested-With\"]||(d[\"X-Requested-With\"]=\"XMLHttpRequest\");for(f in d)void 0!==d[f]\u0026\u0026g.setRequestHeader(f,d[f]+\"\");g.send(b.hasContent\u0026\u0026b.data||null),c=function(a,d){var f,i,j;if(c\u0026\u0026(d||4===g.readyState))if(delete fc[h],c=void 0,g.onreadystatechange=n.noop,d)4!==g.readyState\u0026\u0026g.abort();else{j={},f=g.status,\"string\"==typeof g.responseText\u0026\u0026(j.text=g.responseText);try{i=g.statusText}catch(k){i=\"\"}f||!b.isLocal||b.crossDomain?1223===f\u0026\u0026(f=204):f=j.text?200:404}j\u0026\u0026e(f,i,j,g.getAllResponseHeaders())},b.async?4===g.readyState?a.setTimeout(c):g.onreadystatechange=fc[h]=c:c()},abort:function(){c\u0026\u0026c(void 0,!0)}}}});function hc(){try{return new a.XMLHttpRequest}catch(b){}}function ic(){try{return new a.ActiveXObject(\"Microsoft.XMLHTTP\")}catch(b){}}n.ajaxSetup({accepts:{script:\"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript\"},contents:{script:/\\b(?:java|ecma)script\\b/},converters:{\"text script\":function(a){return n.globalEval(a),a}}}),n.ajaxPrefilter(\"script\",function(a){void 0===a.cache\u0026\u0026(a.cache=!1),a.crossDomain\u0026\u0026(a.type=\"GET\",a.global=!1)}),n.ajaxTransport(\"script\",function(a){if(a.crossDomain){var b,c=d.head||n(\"head\")[0]||d.documentElement;return{send:function(e,f){b=d.createElement(\"script\"),b.async=!0,a.scriptCharset\u0026\u0026(b.charset=a.scriptCharset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))\u0026\u0026(b.onload=b.onreadystatechange=null,b.parentNode\u0026\u0026b.parentNode.removeChild(b),b=null,c||f(200,\"success\"))},c.insertBefore(b,c.firstChild)},abort:function(){b\u0026\u0026b.onload(void 0,!0)}}}});var jc=[],kc=/(=)\\?(?=\u0026|$)|\\?\\?/;n.ajaxSetup({jsonp:\"callback\",jsonpCallback:function(){var a=jc.pop()||n.expando+\"_\"+Eb++;return this[a]=!0,a}}),n.ajaxPrefilter(\"json jsonp\",function(b,c,d){var e,f,g,h=b.jsonp!==!1\u0026\u0026(kc.test(b.url)?\"url\":\"string\"==typeof b.data\u0026\u00260===(b.contentType||\"\").indexOf(\"application/x-www-form-urlencoded\")\u0026\u0026kc.test(b.data)\u0026\u0026\"data\");return h||\"jsonp\"===b.dataTypes[0]?(e=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(kc,\"$1\"+e):b.jsonp!==!1\u0026\u0026(b.url+=(Fb.test(b.url)?\"\u0026\":\"?\")+b.jsonp+\"=\"+e),b.converters[\"script json\"]=function(){return g||n.error(e+\" was not called\"),g[0]},b.dataTypes[0]=\"json\",f=a[e],a[e]=function(){g=arguments},d.always(function(){void 0===f?n(a).removeProp(e):a[e]=f,b[e]\u0026\u0026(b.jsonpCallback=c.jsonpCallback,jc.push(e)),g\u0026\u0026n.isFunction(f)\u0026\u0026f(g[0]),g=f=void 0}),\"script\"):void 0}),n.parseHTML=function(a,b,c){if(!a||\"string\"!=typeof a)return null;\"boolean\"==typeof b\u0026\u0026(c=b,b=!1),b=b||d;var e=x.exec(a),f=!c\u0026\u0026[];return e?[b.createElement(e[1])]:(e=ja([a],b,f),f\u0026\u0026f.length\u0026\u0026n(f).remove(),n.merge([],e.childNodes))};var lc=n.fn.load;n.fn.load=function(a,b,c){if(\"string\"!=typeof a\u0026\u0026lc)return lc.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(\" \");return h-1\u0026\u0026(d=n.trim(a.slice(h,a.length)),a=a.slice(0,h)),n.isFunction(b)?(c=b,b=void 0):b\u0026\u0026\"object\"==typeof b\u0026\u0026(e=\"POST\"),g.length0\u0026\u0026n.ajax({url:a,type:e||\"GET\",dataType:\"html\",data:b}).done(function(a){f=arguments,g.html(d?n(\"\").append(n.parseHTML(a)).find(d):a)}).always(c\u0026\u0026function(a,b){g.each(function(){c.apply(this,f||[a.responseText,b,a])})}),this},n.each([\"ajaxStart\",\"ajaxStop\",\"ajaxComplete\",\"ajaxError\",\"ajaxSuccess\",\"ajaxSend\"],function(a,b){n.fn[b]=function(a){return this.on(b,a)}}),n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length};function mc(a){return n.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}n.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=n.css(a,\"position\"),l=n(a),m={};\"static\"===k\u0026\u0026(a.style.position=\"relative\"),h=l.offset(),f=n.css(a,\"top\"),i=n.css(a,\"left\"),j=(\"absolute\"===k||\"fixed\"===k)\u0026\u0026n.inArray(\"auto\",[f,i])-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),n.isFunction(b)\u0026\u0026(b=b.call(a,c,n.extend({},h))),null!=b.top\u0026\u0026(m.top=b.top-h.top+g),null!=b.left\u0026\u0026(m.left=b.left-h.left+e),\"using\"in b?b.using.call(a,m):l.css(m)}},n.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){n.offset.setOffset(this,a,b)});var b,c,d={top:0,left:0},e=this[0],f=e\u0026\u0026e.ownerDocument;if(f)return b=f.documentElement,n.contains(b,e)?(\"undefined\"!=typeof e.getBoundingClientRect\u0026\u0026(d=e.getBoundingClientRect()),c=mc(f),{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}):d},position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return\"fixed\"===n.css(d,\"position\")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),n.nodeName(a[0],\"html\")||(c=a.offset()),c.top+=n.css(a[0],\"borderTopWidth\",!0),c.left+=n.css(a[0],\"borderLeftWidth\",!0)),{top:b.top-c.top-n.css(d,\"marginTop\",!0),left:b.left-c.left-n.css(d,\"marginLeft\",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent;while(a\u0026\u0026!n.nodeName(a,\"html\")\u0026\u0026\"static\"===n.css(a,\"position\"))a=a.offsetParent;return a||Qa})}}),n.each({scrollLeft:\"pageXOffset\",scrollTop:\"pageYOffset\"},function(a,b){var c=/Y/.test(b);n.fn[a]=function(d){return Y(this,function(a,d,e){var f=mc(a);return void 0===e?f?b in f?f[b]:f.document.documentElement[d]:a[d]:void(f?f.scrollTo(c?n(f).scrollLeft():e,c?e:n(f).scrollTop()):a[d]=e)},a,d,arguments.length,null)}}),n.each([\"top\",\"left\"],function(a,b){n.cssHooks[b]=Ua(l.pixelPosition,function(a,c){return c?(c=Sa(a,b),Oa.test(c)?n(a).position()[b]+\"px\":c):void 0})}),n.each({Height:\"height\",Width:\"width\"},function(a,b){n.each({ padding:\"inner\"+a,content:b,\"\":\"outer\"+a},function(c,d){n.fn[d]=function(d,e){var f=arguments.length\u0026\u0026(c||\"boolean\"!=typeof d),g=c||(d===!0||e===!0?\"margin\":\"border\");return Y(this,function(b,c,d){var e;return n.isWindow(b)?b.document.documentElement[\"client\"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body[\"scroll\"+a],e[\"scroll\"+a],b.body[\"offset\"+a],e[\"offset\"+a],e[\"client\"+a])):void 0===d?n.css(b,c,g):n.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),n.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,\"**\"):this.off(b,a||\"**\",c)}}),n.fn.size=function(){return this.length},n.fn.andSelf=n.fn.addBack,\"function\"==typeof define\u0026\u0026define.amd\u0026\u0026define(\"jquery\",[],function(){return n});var nc=a.jQuery,oc=a.$;return n.noConflict=function(b){return a.$===n\u0026\u0026(a.$=oc),b\u0026\u0026a.jQuery===n\u0026\u0026(a.jQuery=nc),n},b||(a.jQuery=a.$=n),n});  .leaflet-pane,.leaflet-tile,.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-tile-container,.leaflet-pane  svg,.leaflet-pane  canvas,.leaflet-zoom-box,.leaflet-image-layer,.leaflet-layer {position: absolute;left: 0;top: 0;}.leaflet-container {overflow: hidden;}.leaflet-tile,.leaflet-marker-icon,.leaflet-marker-shadow {-webkit-user-select: none;-moz-user-select: none;user-select: none;-webkit-user-drag: none;}.leaflet-safari .leaflet-tile {image-rendering: -webkit-optimize-contrast;}.leaflet-safari .leaflet-tile-container {width: 1600px;height: 1600px;-webkit-transform-origin: 0 0;}.leaflet-marker-icon,.leaflet-marker-shadow {display: block;}.leaflet-container .leaflet-overlay-pane svg,.leaflet-container .leaflet-marker-pane img,.leaflet-container .leaflet-shadow-pane img,.leaflet-container .leaflet-tile-pane img,.leaflet-container img.leaflet-image-layer {max-width: none !important;max-height: none !important;}.leaflet-container.leaflet-touch-zoom {-ms-touch-action: pan-x pan-y;touch-action: pan-x pan-y;}.leaflet-container.leaflet-touch-drag {-ms-touch-action: pinch-zoom;touch-action: none;touch-action: pinch-zoom;}.leaflet-container.leaflet-touch-drag.leaflet-touch-zoom {-ms-touch-action: none;touch-action: none;}.leaflet-container {-webkit-tap-highlight-color: transparent;}.leaflet-container a {-webkit-tap-highlight-color: rgba(51, 181, 229, 0.4);}.leaflet-tile {filter: inherit;visibility: hidden;}.leaflet-tile-loaded {visibility: inherit;}.leaflet-zoom-box {width: 0;height: 0;-moz-box-sizing: border-box;box-sizing: border-box;z-index: 800;}.leaflet-overlay-pane svg {-moz-user-select: none;}.leaflet-pane { z-index: 400; }.leaflet-tile-pane { z-index: 200; }.leaflet-overlay-pane { z-index: 400; }.leaflet-shadow-pane { z-index: 500; }.leaflet-marker-pane { z-index: 600; }.leaflet-tooltip-pane { z-index: 650; }.leaflet-popup-pane { z-index: 700; }.leaflet-map-pane canvas { z-index: 100; }.leaflet-map-pane svg { z-index: 200; }.leaflet-vml-shape {width: 1px;height: 1px;}.lvml {behavior: url(#default#VML);display: inline-block;position: absolute;}.leaflet-control {position: relative;z-index: 800;pointer-events: visiblePainted; pointer-events: auto;}.leaflet-top,.leaflet-bottom {position: absolute;z-index: 1000;pointer-events: none;}.leaflet-top {top: 0;}.leaflet-right {right: 0;}.leaflet-bottom {bottom: 0;}.leaflet-left {left: 0;}.leaflet-control {float: left;clear: both;}.leaflet-right .leaflet-control {float: right;}.leaflet-top .leaflet-control {margin-top: 10px;}.leaflet-bottom .leaflet-control {margin-bottom: 10px;}.leaflet-left .leaflet-control {margin-left: 10px;}.leaflet-right .leaflet-control {margin-right: 10px;}.leaflet-fade-anim .leaflet-tile {will-change: opacity;}.leaflet-fade-anim .leaflet-popup {opacity: 0;-webkit-transition: opacity 0.2s linear;-moz-transition: opacity 0.2s linear;-o-transition: opacity 0.2s linear;transition: opacity 0.2s linear;}.leaflet-fade-anim .leaflet-map-pane .leaflet-popup {opacity: 1;}.leaflet-zoom-animated {-webkit-transform-origin: 0 0;-ms-transform-origin: 0 0;transform-origin: 0 0;}.leaflet-zoom-anim .leaflet-zoom-animated {will-change: transform;}.leaflet-zoom-anim .leaflet-zoom-animated {-webkit-transition: -webkit-transform 0.25s cubic-bezier(0,0,0.25,1);-moz-transition: -moz-transform 0.25s cubic-bezier(0,0,0.25,1);-o-transition: -o-transform 0.25s cubic-bezier(0,0,0.25,1);transition: transform 0.25s cubic-bezier(0,0,0.25,1);}.leaflet-zoom-anim .leaflet-tile,.leaflet-pan-anim .leaflet-tile {-webkit-transition: none;-moz-transition: none;-o-transition: none;transition: none;}.leaflet-zoom-anim .leaflet-zoom-hide {visibility: hidden;}.leaflet-interactive {cursor: pointer;}.leaflet-grab {cursor: -webkit-grab;cursor: -moz-grab;}.leaflet-crosshair,.leaflet-crosshair .leaflet-interactive {cursor: crosshair;}.leaflet-popup-pane,.leaflet-control {cursor: auto;}.leaflet-dragging .leaflet-grab,.leaflet-dragging .leaflet-grab .leaflet-interactive,.leaflet-dragging .leaflet-marker-draggable {cursor: move;cursor: -webkit-grabbing;cursor: -moz-grabbing;}.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-image-layer,.leaflet-pane  svg path,.leaflet-tile-container {pointer-events: none;}.leaflet-marker-icon.leaflet-interactive,.leaflet-image-layer.leaflet-interactive,.leaflet-pane  svg path.leaflet-interactive {pointer-events: visiblePainted; pointer-events: auto;}.leaflet-container {background: #ddd;outline: 0;}.leaflet-container a {color: #0078A8;}.leaflet-container a.leaflet-active {outline: 2px solid orange;}.leaflet-zoom-box {border: 2px dotted #38f;background: rgba(255,255,255,0.5);}.leaflet-container {font: 12px/1.5 \"Helvetica Neue\", Arial, Helvetica, sans-serif;}.leaflet-bar {box-shadow: 0 1px 5px rgba(0,0,0,0.65);border-radius: 4px;}.leaflet-bar a,.leaflet-bar a:hover {background-color: #fff;border-bottom: 1px solid #ccc;width: 26px;height: 26px;line-height: 26px;display: block;text-align: center;text-decoration: none;color: black;}.leaflet-bar a,.leaflet-control-layers-toggle {background-position: 50% 50%;background-repeat: no-repeat;display: block;}.leaflet-bar a:hover {background-color: #f4f4f4;}.leaflet-bar a:first-child {border-top-left-radius: 4px;border-top-right-radius: 4px;}.leaflet-bar a:last-child {border-bottom-left-radius: 4px;border-bottom-right-radius: 4px;border-bottom: none;}.leaflet-bar a.leaflet-disabled {cursor: default;background-color: #f4f4f4;color: #bbb;}.leaflet-touch .leaflet-bar a {width: 30px;height: 30px;line-height: 30px;}.leaflet-touch .leaflet-bar a:first-child {border-top-left-radius: 2px;border-top-right-radius: 2px;}.leaflet-touch .leaflet-bar a:last-child {border-bottom-left-radius: 2px;border-bottom-right-radius: 2px;}.leaflet-control-zoom-in,.leaflet-control-zoom-out {font: bold 18px 'Lucida Console', Monaco, monospace;text-indent: 1px;}.leaflet-touch .leaflet-control-zoom-in, .leaflet-touch .leaflet-control-zoom-out {font-size: 22px;}.leaflet-control-layers {box-shadow: 0 1px 5px rgba(0,0,0,0.4);background: #fff;border-radius: 5px;}.leaflet-control-layers-toggle {background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAQAAAADQ4RFAAACf0lEQVR4AY1UM3gkARTePdvdoTxXKc+qTl3aU5U6b2Kbkz3Gtq3Zw6ziLGNPzrYx7946Tr6/ee/XeCQ4D3ykPtL5tHno4n0d/h3+xfuWHGLX81cn7r0iTNzjr7LrlxCqPtkbTQEHeqOrTy4Yyt3VCi/IOB0v7rVC7q45Q3Gr5K6jt+3Gl5nCoDD4MtO+j96Wu8atmhGqcNGHObuf8OM/x3AMx38+4Z2sPqzCxRFK2aF2e5Jol56XTLyggAMTL56XOMoS1W4pOyjUcGGQdZxU6qRh7B9Zp+PfpOFlqt0zyDZckPi1ttmIp03jX8gyJ8a/PG2yutpS/Vol7peZIbZcKBAEEheEIAgFbDkz5H6Zrkm2hVWGiXKiF4Ycw0RWKdtC16Q7qe3X4iOMxruonzegJzWaXFrU9utOSsLUmrc0YjeWYjCW4PDMADElpJSSQ0vQvA1Tm6/JlKnqFs1EGyZiFCqnRZTEJJJiKRYzVYzJck2Rm6P4iH+cmSY0YzimYa8l0EtTODFWhcMIMVqdsI2uiTvKmTisIDHJ3od5GILVhBCarCfVRmo4uTjkhrhzkiBV7SsaqS+TzrzM1qpGGUFt28pIySQHR6h7F6KSwGWm97ay+Z+ZqMcEjEWebE7wxCSQwpkhJqoZA5ivCdZDjJepuJ9IQjGGUmuXJdBFUygxVqVsxFsLMbDe8ZbDYVCGKxs+W080max1hFCarCfV+C1KATwcnvE9gRRuMP2prdbWGowm1KB1y+zwMMENkM755cJ2yPDtqhTI6ED1M/82yIDtC/4j4BijjeObflpO9I9MwXTCsSX8jWAFeHr05WoLTJ5G8IQVS/7vwR6ohirYM7f6HzYpogfS3R2OAAAAAElFTkSuQmCC);width: 36px;height: 36px;}.leaflet-retina .leaflet-control-layers-toggle {background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAQAAABvcdNgAAAEsklEQVR4AWL4TydIhpZK1kpWOlg0w3ZXP6D2soBtG42jeI6ZmQTHzAxiTbSJsYLjO9HhP+WOmcuhciVnmHVQcJnp7DFvScowZorad/+V/fVzMdMT2g9Cv9guXGv/7pYOrXh2U+RRR3dSd9JRx6bIFc/ekqHI29JC6pJ5ZEh1yWkhkbcFeSjxgx3L2m1cb1C7bceyxA+CNjT/Ifff+/kDk2u/w/33/IeCMOSaWZ4glosqT3DNnNZQ7Cs58/3Ce5HL78iZH/vKVIaYlqzfdLu8Vi7dnvUbEza5Idt36tquZFldl6N5Z/POLof0XLK61mZCmJSWjVF9tEjUluu74IUXvgttuVIHE7YxSkaYhJZam7yiM9Pv82JYfl9nptxZaxMJE4YSPty+vF0+Y2up9d3wwijfjZbabqm/3bZ9ecKHsiGmRflnn1MW4pjHf9oLufyn2z3y1D6n8g8TZhxyzipLNPnAUpsOiuWimg52psrTZYnOWYNDTMuWBWa0tJb4rgq1UvmutpaYEbZlwU3CLJm/ayYjHW5/h7xWLn9Hh1vepDkyf7dE7MtT5LR4e7yYpHrkhOUpEfssBLq2pPhAqoSWKUkk7EDqkmK6RrCEzqDjhNDWNE+XSMvkJRDWlZTmCW0l0PHQGRZY5t1L83kT0Y3l2SItk5JAWHl2dCOBm+fPu3fo5/3v61RMCO9Jx2EEYYhb0rmNQMX/vm7gqOEJLcXTGw3CAuRNeyaPWwjR8PRqKQ1PDA/dpv+on9Shox52WFnx0KY8onHayrJzm87i5h9xGw/tfkev0jGsQizqezUKjk12hBMKJ4kbCqGPVNXudyyrShovGw5CgxsRICxF6aRmSjlBnHRzg7Gx8fKqEubI2rahQYdR1YgDIRQO7JvQyD52hoIQx0mxa0ODtW2Iozn1le2iIRdzwWewedyZzewidueOGqlsn1MvcnQpuVwLGG3/IR1hIKxCjelIDZ8ldqWz25jWAsnldEnK0Zxro19TGVb2ffIZEsIO89EIEDvKMPrzmBOQcKQ+rroye6NgRRxqR4U8EAkz0CL6uSGOm6KQCdWjvjRiSP1BPalCRS5iQYiEIvxuBMJEWgzSoHADcVMuN7IuqqTeyUPq22qFimFtxDyBBJEwNyt6TM88blFHao/6tWWhuuOM4SAK4EI4QmFHA+SEyWlp4EQoJ13cYGzMu7yszEIBOm2rVmHUNqwAIQabISNMRstmdhNWcFLsSm+0tjJH1MdRxO5Nx0WDMhCtgD6OKgZeljJqJKc9po8juskR9XN0Y1lZ3mWjLR9JCO1jRDMd0fpYC2VnvjBSEFg7wBENc0R9HFlb0xvF1+TBEpF68d+DHR6IOWVv2BECtxo46hOFUBd/APU57WIoEwJhIi2CdpyZX0m93BZicktMj1AS9dClteUFAUNUIEygRZCtik5zSxI9MubTBH1GOiHsiLJ3OCoSZkILa9PxiN0EbvhsAo8tdAf9Seepd36lGWHmtNANTv5Jd0z4QYyeo/UEJqxKRpg5LZx6btLPsOaEmdMyxYdlc8LMaJnikDlhclqmPiQnTEpLUIZEwkRagjYkEibQErwhkTAKCLQEbUgkzJQWc/0PstHHcfEdQ+UAAAAASUVORK5CYII=);background-size: 26px 26px;}.leaflet-touch .leaflet-control-layers-toggle {width: 44px;height: 44px;}.leaflet-control-layers .leaflet-control-layers-list,.leaflet-control-layers-expanded .leaflet-control-layers-toggle {display: none;}.leaflet-control-layers-expanded .leaflet-control-layers-list {display: block;position: relative;}.leaflet-control-layers-expanded {padding: 6px 10px 6px 6px;color: #333;background: #fff;}.leaflet-control-layers-scrollbar {overflow-y: scroll;overflow-x: hidden;padding-right: 5px;}.leaflet-control-layers-selector {margin-top: 2px;position: relative;top: 1px;}.leaflet-control-layers label {display: block;}.leaflet-control-layers-separator {height: 0;border-top: 1px solid #ddd;margin: 5px -10px 5px -6px;}.leaflet-default-icon-path {background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=);}.leaflet-container .leaflet-control-attribution {background: #fff;background: rgba(255, 255, 255, 0.7);margin: 0;}.leaflet-control-attribution,.leaflet-control-scale-line {padding: 0 5px;color: #333;}.leaflet-control-attribution a {text-decoration: none;}.leaflet-control-attribution a:hover {text-decoration: underline;}.leaflet-container .leaflet-control-attribution,.leaflet-container .leaflet-control-scale {font-size: 11px;}.leaflet-left .leaflet-control-scale {margin-left: 5px;}.leaflet-bottom .leaflet-control-scale {margin-bottom: 5px;}.leaflet-control-scale-line {border: 2px solid #777;border-top: none;line-height: 1.1;padding: 2px 5px 1px;font-size: 11px;white-space: nowrap;overflow: hidden;-moz-box-sizing: border-box;box-sizing: border-box;background: #fff;background: rgba(255, 255, 255, 0.5);}.leaflet-control-scale-line:not(:first-child) {border-top: 2px solid #777;border-bottom: none;margin-top: -2px;}.leaflet-control-scale-line:not(:first-child):not(:last-child) {border-bottom: 2px solid #777;}.leaflet-touch .leaflet-control-attribution,.leaflet-touch .leaflet-control-layers,.leaflet-touch .leaflet-bar {box-shadow: none;}.leaflet-touch .leaflet-control-layers,.leaflet-touch .leaflet-bar {border: 2px solid rgba(0,0,0,0.2);background-clip: padding-box;}.leaflet-popup {position: absolute;text-align: center;margin-bottom: 20px;}.leaflet-popup-content-wrapper {padding: 1px;text-align: left;border-radius: 12px;}.leaflet-popup-content {margin: 13px 19px;line-height: 1.4;}.leaflet-popup-content p {margin: 18px 0;}.leaflet-popup-tip-container {width: 40px;height: 20px;position: absolute;left: 50%;margin-left: -20px;overflow: hidden;pointer-events: none;}.leaflet-popup-tip {width: 17px;height: 17px;padding: 1px;margin: -10px auto 0;-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);-ms-transform: rotate(45deg);-o-transform: rotate(45deg);transform: rotate(45deg);}.leaflet-popup-content-wrapper,.leaflet-popup-tip {background: white;color: #333;box-shadow: 0 3px 14px rgba(0,0,0,0.4);}.leaflet-container a.leaflet-popup-close-button {position: absolute;top: 0;right: 0;padding: 4px 4px 0 0;border: none;text-align: center;width: 18px;height: 14px;font: 16px/14px Tahoma, Verdana, sans-serif;color: #c3c3c3;text-decoration: none;font-weight: bold;background: transparent;}.leaflet-container a.leaflet-popup-close-button:hover {color: #999;}.leaflet-popup-scrolled {overflow: auto;border-bottom: 1px solid #ddd;border-top: 1px solid #ddd;}.leaflet-oldie .leaflet-popup-content-wrapper {zoom: 1;}.leaflet-oldie .leaflet-popup-tip {width: 24px;margin: 0 auto;-ms-filter: \"progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678)\";filter: progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678);}.leaflet-oldie .leaflet-popup-tip-container {margin-top: -1px;}.leaflet-oldie .leaflet-control-zoom,.leaflet-oldie .leaflet-control-layers,.leaflet-oldie .leaflet-popup-content-wrapper,.leaflet-oldie .leaflet-popup-tip {border: 1px solid #999;}.leaflet-div-icon {background: #fff;border: 1px solid #666;}.leaflet-tooltip {position: absolute;padding: 6px;background-color: #fff;border: 1px solid #fff;border-radius: 3px;color: #222;white-space: nowrap;-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;pointer-events: none;box-shadow: 0 1px 3px rgba(0,0,0,0.4);}.leaflet-tooltip.leaflet-clickable {cursor: pointer;pointer-events: auto;}.leaflet-tooltip-top:before,.leaflet-tooltip-bottom:before,.leaflet-tooltip-left:before,.leaflet-tooltip-right:before {position: absolute;pointer-events: none;border: 6px solid transparent;background: transparent;content: \"\";}.leaflet-tooltip-bottom {margin-top: 6px;}.leaflet-tooltip-top {margin-top: -6px;}.leaflet-tooltip-bottom:before,.leaflet-tooltip-top:before {left: 50%;margin-left: -6px;}.leaflet-tooltip-top:before {bottom: 0;margin-bottom: -12px;border-top-color: #fff;}.leaflet-tooltip-bottom:before {top: 0;margin-top: -12px;margin-left: -6px;border-bottom-color: #fff;}.leaflet-tooltip-left {margin-left: -6px;}.leaflet-tooltip-right {margin-left: 6px;}.leaflet-tooltip-left:before,.leaflet-tooltip-right:before {top: 50%;margin-top: -6px;}.leaflet-tooltip-left:before {right: 0;margin-right: -12px;border-left-color: #fff;}.leaflet-tooltip-right:before {left: 0;margin-left: -12px;border-right-color: #fff;} /* @preserve * Leaflet 1.3.1+Detached: ba6f97fff8647e724e4dfe66d2ed7da11f908989.ba6f97f, a JS library for interactive maps. http://leafletjs.com * (c) 2010-2017 Vladimir Agafonkin, (c) 2010-2011 CloudMade */ !function(t,i){\"object\"==typeof exports\u0026\u0026\"undefined\"!=typeof module?i(exports):\"function\"==typeof define\u0026\u0026define.amd?define([\"exports\"],i):i(t.L={})}(this,function(t){\"use strict\";function i(t){var i,e,n,o;for(e=1,n=arguments.length;e=0}function I(t,i,e,n){return\"touchstart\"===i?O(t,e,n):\"touchmove\"===i?W(t,e,n):\"touchend\"===i\u0026\u0026H(t,e,n),this}function B(t,i,e){var n=t[\"_leaflet_\"+i+e];return\"touchstart\"===i?t.removeEventListener(Qi,n,!1):\"touchmove\"===i?t.removeEventListener(te,n,!1):\"touchend\"===i\u0026\u0026(t.removeEventListener(ie,n,!1),t.removeEventListener(ee,n,!1)),this}function O(t,i,n){var o=e(function(t){if(\"mouse\"!==t.pointerType\u0026\u0026t.MSPOINTER_TYPE_MOUSE\u0026\u0026t.pointerType!==t.MSPOINTER_TYPE_MOUSE){if(!(ne.indexOf(t.target.tagName)1)){var e=Date.now(),n=e-(s||e);r=t.touches?t.touches[0]:t,a=n0\u0026\u0026n100\u0026\u0026n0\u0026\u0026new RegExp(\"(^|\\\\s)\"+i+\"(\\\\s|$)\").test(e)}function pt(t,i){if(void 0!==t.classList)for(var e=u(i),n=0,o=e.length;nh\u0026\u0026(s=r,h=a);he\u0026\u0026(i[s]=1,Et(t,i,e,n,s),Et(t,i,e,s,o))}function kt(t,i){for(var e=[t[0]],n=1,o=0,s=t.length;ni\u0026\u0026(e.push(t[n]),o=n);return oi.max.x\u0026\u0026(e|=2),t.yi.max.y\u0026\u0026(e|=8),e}function Ot(t,i){var e=i.x-t.x,n=i.y-t.y;return e*e+n*n}function Rt(t,i,e,n){var o,s=i.x,r=i.y,a=e.x-s,h=e.y-r,u=a*a+h*h;return u0\u0026\u0026((o=((t.x-s)*a+(t.y-r)*h)/u)1?(s=e.x,r=e.y):o0\u0026\u0026(s+=a*o,r+=h*o)),a=t.x-s,h=t.y-r,n?a*a+h*h:new x(s,r)}function Dt(t){return!ei(t[0])||\"object\"!=typeof t[0][0]\u0026\u0026void 0!==t[0][0]}function Nt(t){return console.warn(\"Deprecated use of _flat, please use L.LineUtil.isFlat instead.\"),Dt(t)}function jt(t,i,e){var n,o,s,r,a,h,u,l,c,_=[1,4,2,8];for(o=0,u=t.length;o0?Math.floor(t):Math.ceil(t)};x.prototype={clone:function(){return new x(this.x,this.y)},add:function(t){return this.clone()._add(w(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(w(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new x(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new x(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=li(this.x),this.y=li(this.y),this},distanceTo:function(t){var i=(t=w(t)).x-this.x,e=t.y-this.y;return Math.sqrt(i*i+e*e)},equals:function(t){return(t=w(t)).x===this.x\u0026\u0026t.y===this.y},contains:function(t){return t=w(t),Math.abs(t.x)=this.min.x\u0026\u0026e.x=this.min.y\u0026\u0026e.y=i.x\u0026\u0026n.x=i.y\u0026\u0026n.yi.x\u0026\u0026n.xi.y\u0026\u0026n.y=n.lat\u0026\u0026e.lat=n.lng\u0026\u0026e.lng=i.lat\u0026\u0026n.lat=i.lng\u0026\u0026n.lngi.lat\u0026\u0026n.lati.lng\u0026\u0026n.lng1,Yi=!!document.createElement(\"canvas\").getContext,Xi=!(!document.createElementNS||!E(\"svg\").createSVGRect),Ji=!Xi\u0026\u0026function(){try{var t=document.createElement(\"div\");t.innerHTML='';var i=t.firstChild;return i.style.behavior=\"url(#default#VML)\",i\u0026\u0026\"object\"==typeof i.adj}catch(t){return!1}}(),$i=(Object.freeze||Object)({ie:wi,ielt9:Li,edge:Pi,webkit:bi,android:Ti,android23:zi,androidStock:Ci,opera:Zi,chrome:Si,gecko:Ei,safari:ki,phantom:Ai,opera12:Ii,win:Bi,ie3d:Oi,webkit3d:Ri,gecko3d:Di,any3d:Ni,mobile:ji,mobileWebkit:Wi,mobileWebkit3d:Hi,msPointer:Fi,pointer:Ui,touch:Vi,mobileOpera:qi,mobileGecko:Gi,retina:Ki,canvas:Yi,svg:Xi,vml:Ji}),Qi=Fi?\"MSPointerDown\":\"pointerdown\",te=Fi?\"MSPointerMove\":\"pointermove\",ie=Fi?\"MSPointerUp\":\"pointerup\",ee=Fi?\"MSPointerCancel\":\"pointercancel\",ne=[\"INPUT\",\"SELECT\",\"OPTION\"],oe={},se=!1,re=0,ae=Fi?\"MSPointerDown\":Ui?\"pointerdown\":\"touchstart\",he=Fi?\"MSPointerUp\":Ui?\"pointerup\":\"touchend\",ue=\"_leaflet_\",le=\"_leaflet_events\",ce=Bi\u0026\u0026Si?2*window.devicePixelRatio:Ei?window.devicePixelRatio:1,_e={},de=(Object.freeze||Object)({on:V,off:q,stopPropagation:Y,disableScrollPropagation:X,disableClickPropagation:J,preventDefault:$,stop:Q,getMousePosition:tt,getWheelDelta:it,fakeStop:et,skipped:nt,isExternalTarget:ot,addListener:V,removeListener:q}),pe=xt([\"transform\",\"WebkitTransform\",\"OTransform\",\"MozTransform\",\"msTransform\"]),me=xt([\"webkitTransition\",\"transition\",\"OTransition\",\"MozTransition\",\"msTransition\"]),fe=\"webkitTransition\"===me||\"OTransition\"===me?me+\"End\":\"transitionend\";if(\"onselectstart\"in document)mi=function(){V(window,\"selectstart\",$)},fi=function(){q(window,\"selectstart\",$)};else{var ge=xt([\"userSelect\",\"WebkitUserSelect\",\"OUserSelect\",\"MozUserSelect\",\"msUserSelect\"]);mi=function(){if(ge){var t=document.documentElement.style;gi=t[ge],t[ge]=\"none\"}},fi=function(){ge\u0026\u0026(document.documentElement.style[ge]=gi,gi=void 0)}}var ve,ye,xe=(Object.freeze||Object)({TRANSFORM:pe,TRANSITION:me,TRANSITION_END:fe,get:rt,getStyle:at,create:ht,remove:ut,empty:lt,toFront:ct,toBack:_t,hasClass:dt,addClass:pt,removeClass:mt,setClass:ft,getClass:gt,setOpacity:vt,testProp:xt,setTransform:wt,setPosition:Lt,getPosition:Pt,disableTextSelection:mi,enableTextSelection:fi,disableImageDrag:bt,enableImageDrag:Tt,preventOutline:zt,restoreOutline:Mt}),we=ui.extend({run:function(t,i,e,n){this.stop(),this._el=t,this._inProgress=!0,this._duration=e||.25,this._easeOutPower=1/Math.max(n||.5,.2),this._startPos=Pt(t),this._offset=i.subtract(this._startPos),this._startTime=+new Date,this.fire(\"start\"),this._animate()},stop:function(){this._inProgress\u0026\u0026(this._step(!0),this._complete())},_animate:function(){this._animId=f(this._animate,this),this._step()},_step:function(t){var i=+new Date-this._startTime,e=1e3*this._duration;ithis.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,i){this._enforcingBounds=!0;var e=this.getCenter(),n=this._limitCenter(e,this._zoom,z(t));return e.equals(n)||this.panTo(n,i),this._enforcingBounds=!1,this},invalidateSize:function(t){if(!this._loaded)return this;t=i({animate:!1,pan:!0},!0===t?{animate:!0}:t);var n=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var o=this.getSize(),s=n.divideBy(2).round(),r=o.divideBy(2).round(),a=s.subtract(r);return a.x||a.y?(t.animate\u0026\u0026t.pan?this.panBy(a):(t.pan\u0026\u0026this._rawPanBy(a),this.fire(\"move\"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(e(this.fire,this,\"moveend\"),200)):this.fire(\"moveend\")),this.fire(\"resize\",{oldSize:n,newSize:o})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire(\"viewreset\"),this._stop()},locate:function(t){if(t=this._locateOptions=i({timeout:1e4,watch:!1},t),!(\"geolocation\"in navigator))return this._handleGeolocationError({code:0,message:\"Geolocation not supported.\"}),this;var n=e(this._handleGeolocationResponse,this),o=e(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(n,o,t):navigator.geolocation.getCurrentPosition(n,o,t),this},stopLocate:function(){return navigator.geolocation\u0026\u0026navigator.geolocation.clearWatch\u0026\u0026navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions\u0026\u0026(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var i=t.code,e=t.message||(1===i?\"permission denied\":2===i?\"position unavailable\":\"timeout\");this._locateOptions.setView\u0026\u0026!this._loaded\u0026\u0026this.fitWorld(),this.fire(\"locationerror\",{code:i,message:\"Geolocation error: \"+e+\".\"})},_handleGeolocationResponse:function(t){var i=new M(t.coords.latitude,t.coords.longitude),e=i.toBounds(t.coords.accuracy),n=this._locateOptions;if(n.setView){var o=this.getBoundsZoom(e);this.setView(i,n.maxZoom?Math.min(o,n.maxZoom):o)}var s={latlng:i,bounds:e,timestamp:t.timestamp};for(var r in t.coords)\"number\"==typeof t.coords[r]\u0026\u0026(s[r]=t.coords[r]);this.fire(\"locationfound\",s)},addHandler:function(t,i){if(!i)return this;var e=this[t]=new i(this);return this._handlers.push(e),this.options[t]\u0026\u0026e.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error(\"Map container is being reused by another instance\");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}void 0!==this._locationWatchId\u0026\u0026this.stopLocate(),this._stop(),ut(this._mapPane),this._clearControlPos\u0026\u0026this._clearControlPos(),this._clearHandlers(),this._loaded\u0026\u0026this.fire(\"unload\");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)ut(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,i){var e=ht(\"div\",\"leaflet-pane\"+(t?\" leaflet-\"+t.replace(\"Pane\",\"\")+\"-pane\":\"\"),i||this._mapPane);return t\u0026\u0026(this._panes[t]=e),e},getCenter:function(){return this._checkIfLoaded(),this._lastCenter\u0026\u0026!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new T(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,i,e){t=z(t),e=w(e||[0,0]);var n=this.getZoom()||0,o=this.getMinZoom(),s=this.getMaxZoom(),r=t.getNorthWest(),a=t.getSouthEast(),h=this.getSize().subtract(e),u=b(this.project(a,n),this.project(r,n)).getSize(),l=Ni?this.options.zoomSnap:1,c=h.x/u.x,_=h.y/u.y,d=i?Math.max(c,_):Math.min(c,_);return n=this.getScaleZoom(d,n),l\u0026\u0026(n=Math.round(n/(l/100))*(l/100),n=i?Math.ceil(n/l)*l:Math.floor(n/l)*l),Math.max(o,Math.min(s,n))},getSize:function(){return this._size\u0026\u0026!this._sizeChanged||(this._size=new x(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,i){var e=this._getTopLeftPoint(t,i);return new P(e,e.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return\"string\"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,i){var e=this.options.crs;return i=void 0===i?this._zoom:i,e.scale(t)/e.scale(i)},getScaleZoom:function(t,i){var e=this.options.crs;i=void 0===i?this._zoom:i;var n=e.zoom(t*e.scale(i));return isNaN(n)?1/0:n},project:function(t,i){return i=void 0===i?this._zoom:i,this.options.crs.latLngToPoint(C(t),i)},unproject:function(t,i){return i=void 0===i?this._zoom:i,this.options.crs.pointToLatLng(w(t),i)},layerPointToLatLng:function(t){var i=w(t).add(this.getPixelOrigin());return this.unproject(i)},latLngToLayerPoint:function(t){return this.project(C(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(C(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(z(t))},distance:function(t,i){return this.options.crs.distance(C(t),C(i))},containerPointToLayerPoint:function(t){return w(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return w(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var i=this.containerPointToLayerPoint(w(t));return this.layerPointToLatLng(i)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(C(t)))},mouseEventToContainerPoint:function(t){return tt(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var i=this._container=rt(t);if(!i)throw new Error(\"Map container not found.\");if(i._leaflet_id)throw new Error(\"Map container is already initialized.\");V(i,\"scroll\",this._onScroll,this),this._containerId=n(i)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation\u0026\u0026Ni,pt(t,\"leaflet-container\"+(Vi?\" leaflet-touch\":\"\")+(Ki?\" leaflet-retina\":\"\")+(Li?\" leaflet-oldie\":\"\")+(ki?\" leaflet-safari\":\"\")+(this._fadeAnimated?\" leaflet-fade-anim\":\"\"));var i=at(t,\"position\");\"absolute\"!==i\u0026\u0026\"relative\"!==i\u0026\u0026\"fixed\"!==i\u0026\u0026(t.style.position=\"relative\"),this._initPanes(),this._initControlPos\u0026\u0026this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane(\"mapPane\",this._container),Lt(this._mapPane,new x(0,0)),this.createPane(\"tilePane\"),this.createPane(\"shadowPane\"),this.createPane(\"overlayPane\"),this.createPane(\"markerPane\"),this.createPane(\"tooltipPane\"),this.createPane(\"popupPane\"),this.options.markerZoomAnimation||(pt(t.markerPane,\"leaflet-zoom-hide\"),pt(t.shadowPane,\"leaflet-zoom-hide\"))},_resetView:function(t,i){Lt(this._mapPane,new x(0,0));var e=!this._loaded;this._loaded=!0,i=this._limitZoom(i),this.fire(\"viewprereset\");var n=this._zoom!==i;this._moveStart(n,!1)._move(t,i)._moveEnd(n),this.fire(\"viewreset\"),e\u0026\u0026this.fire(\"load\")},_moveStart:function(t,i){return t\u0026\u0026this.fire(\"zoomstart\"),i||this.fire(\"movestart\"),this},_move:function(t,i,e){void 0===i\u0026\u0026(i=this._zoom);var n=this._zoom!==i;return this._zoom=i,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(n||e\u0026\u0026e.pinch)\u0026\u0026this.fire(\"zoom\",e),this.fire(\"move\",e)},_moveEnd:function(t){return t\u0026\u0026this.fire(\"zoomend\"),this.fire(\"moveend\")},_stop:function(){return g(this._flyToFrame),this._panAnim\u0026\u0026this._panAnim.stop(),this},_rawPanBy:function(t){Lt(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error(\"Set map center and zoom first.\")},_initEvents:function(t){this._targets={},this._targets[n(this._container)]=this;var i=t?q:V;i(this._container,\"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress\",this._handleDOMEvent,this),this.options.trackResize\u0026\u0026i(window,\"resize\",this._onResize,this),Ni\u0026\u0026this.options.transform3DLimit\u0026\u0026(t?this.off:this.on).call(this,\"moveend\",this._onMoveEnd)},_onResize:function(){g(this._resizeRequest),this._resizeRequest=f(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))=this.options.transform3DLimit\u0026\u0026this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,i){for(var e,o=[],s=\"mouseout\"===i||\"mouseover\"===i,r=t.target||t.srcElement,a=!1;r;){if((e=this._targets[n(r)])\u0026\u0026(\"click\"===i||\"preclick\"===i)\u0026\u0026!t._simulated\u0026\u0026this._draggableMoved(e)){a=!0;break}if(e\u0026\u0026e.listens(i,!0)){if(s\u0026\u0026!ot(r,t))break;if(o.push(e),s)break}if(r===this._container)break;r=r.parentNode}return o.length||a||s||!ot(r,t)||(o=[this]),o},_handleDOMEvent:function(t){if(this._loaded\u0026\u0026!nt(t)){var i=t.type;\"mousedown\"!==i\u0026\u0026\"keypress\"!==i||zt(t.target||t.srcElement),this._fireDOMEvent(t,i)}},_mouseEvents:[\"click\",\"dblclick\",\"mouseover\",\"mouseout\",\"contextmenu\"],_fireDOMEvent:function(t,e,n){if(\"click\"===t.type){var o=i({},t);o.type=\"preclick\",this._fireDOMEvent(o,o.type,n)}if(!t._stopped\u0026\u0026(n=(n||[]).concat(this._findEventTargets(t,e))).length){var s=n[0];\"contextmenu\"===e\u0026\u0026s.listens(e,!0)\u0026\u0026$(t);var r={originalEvent:t};if(\"keypress\"!==t.type){var a=s.getLatLng\u0026\u0026(!s._radius||s._radius0?Math.round(t-i)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(i))},_limitZoom:function(t){var i=this.getMinZoom(),e=this.getMaxZoom(),n=Ni?this.options.zoomSnap:1;return n\u0026\u0026(t=Math.round(t/n)*n),Math.max(i,Math.min(e,t))},_onPanTransitionStep:function(){this.fire(\"move\")},_onPanTransitionEnd:function(){mt(this._mapPane,\"leaflet-pan-anim\"),this.fire(\"moveend\")},_tryAnimatedPan:function(t,i){var e=this._getCenterOffset(t)._trunc();return!(!0!==(i\u0026\u0026i.animate)\u0026\u0026!this.getSize().contains(e))\u0026\u0026(this.panBy(e,i),!0)},_createAnimProxy:function(){var t=this._proxy=ht(\"div\",\"leaflet-proxy leaflet-zoom-animated\");this._panes.mapPane.appendChild(t),this.on(\"zoomanim\",function(t){var i=pe,e=this._proxy.style[i];wt(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),e===this._proxy.style[i]\u0026\u0026this._animatingZoom\u0026\u0026this._onZoomTransitionEnd()},this),this.on(\"load moveend\",function(){var t=this.getCenter(),i=this.getZoom();wt(this._proxy,this.project(t,i),this.getZoomScale(i,1))},this),this._on(\"unload\",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ut(this._proxy),delete this._proxy},_catchTransitionEnd:function(t){this._animatingZoom\u0026\u0026t.propertyName.indexOf(\"transform\")=0\u0026\u0026this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName(\"leaflet-zoom-animated\").length},_tryAnimatedZoom:function(t,i,e){if(this._animatingZoom)return!0;if(e=e||{},!this._zoomAnimated||!1===e.animate||this._nothingToAnimate()||Math.abs(i-this._zoom)this.options.zoomAnimationThreshold)return!1;var n=this.getZoomScale(i),o=this._getCenterOffset(t)._divideBy(1-1/n);return!(!0!==e.animate\u0026\u0026!this.getSize().contains(o))\u0026\u0026(f(function(){this._moveStart(!0,!1)._animateZoom(t,i,!0)},this),!0)},_animateZoom:function(t,i,n,o){this._mapPane\u0026\u0026(n\u0026\u0026(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=i,pt(this._mapPane,\"leaflet-zoom-anim\")),this.fire(\"zoomanim\",{center:t,zoom:i,noUpdate:o}),setTimeout(e(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom\u0026\u0026(this._mapPane\u0026\u0026mt(this._mapPane,\"leaflet-zoom-anim\"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),f(function(){this._moveEnd(!0)},this))}}),Pe=v.extend({options:{position:\"topright\"},initialize:function(t){l(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var i=this._map;return i\u0026\u0026i.removeControl(this),this.options.position=t,i\u0026\u0026i.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var i=this._container=this.onAdd(t),e=this.getPosition(),n=t._controlCorners[e];return pt(i,\"leaflet-control\"),-1!==e.indexOf(\"bottom\")?n.insertBefore(i,n.firstChild):n.appendChild(i),this},remove:function(){return this._map?(ut(this._container),this.onRemove\u0026\u0026this.onRemove(this._map),this._map=null,this):this},_refocusOnMap:function(t){this._map\u0026\u0026t\u0026\u0026t.screenX0\u0026\u0026t.screenY0\u0026\u0026this._map.getContainer().focus()}}),be=function(t){return new Pe(t)};Le.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){function t(t,o){var s=e+t+\" \"+e+o;i[t+o]=ht(\"div\",s,n)}var i=this._controlCorners={},e=\"leaflet-\",n=this._controlContainer=ht(\"div\",e+\"control-container\",this._container);t(\"top\",\"left\"),t(\"top\",\"right\"),t(\"bottom\",\"left\"),t(\"bottom\",\"right\")},_clearControlPos:function(){for(var t in this._controlCorners)ut(this._controlCorners[t]);ut(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Te=Pe.extend({options:{collapsed:!0,position:\"topright\",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,i,e,n){return e1,this._baseLayersList.style.display=t?\"\":\"none\"),this._separator.style.display=i\u0026\u0026t?\"\":\"none\",this},_onLayerChange:function(t){this._handlingClick||this._update();var i=this._getLayer(n(t.target)),e=i.overlay?\"add\"===t.type?\"overlayadd\":\"overlayremove\":\"add\"===t.type?\"baselayerchange\":null;e\u0026\u0026this._map.fire(e,i)},_createRadioElement:function(t,i){var e='\",n=document.createElement(\"div\");return n.innerHTML=e,n.firstChild},_addItem:function(t){var i,e=document.createElement(\"label\"),o=this._map.hasLayer(t.layer);t.overlay?((i=document.createElement(\"input\")).type=\"checkbox\",i.className=\"leaflet-control-layers-selector\",i.defaultChecked=o):i=this._createRadioElement(\"leaflet-base-layers\",o),this._layerControlInputs.push(i),i.layerId=n(t.layer),V(i,\"click\",this._onInputClick,this);var s=document.createElement(\"span\");s.innerHTML=\" \"+t.name;var r=document.createElement(\"div\");return e.appendChild(r),r.appendChild(i),r.appendChild(s),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(e),this._checkDisabledLayers(),e},_onInputClick:function(){var t,i,e=this._layerControlInputs,n=[],o=[];this._handlingClick=!0;for(var s=e.length-1;s=0;s--)t=e[s],i=this._getLayer(t.layerId).layer,t.checked?n.push(i):t.checked||o.push(i);for(s=0;s=0;o--)t=e[o],i=this._getLayer(t.layerId).layer,t.disabled=void 0!==i.options.minZoom\u0026\u0026ni.options.maxZoom},_expandIfNotCollapsed:function(){return this._map\u0026\u0026!this.options.collapsed\u0026\u0026this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),ze=Pe.extend({options:{position:\"topleft\",zoomInText:\"+\",zoomInTitle:\"Zoom in\",zoomOutText:\"\u0026#x2212;\",zoomOutTitle:\"Zoom out\"},onAdd:function(t){var i=\"leaflet-control-zoom\",e=ht(\"div\",i+\" leaflet-bar\"),n=this.options;return this._zoomInButton=this._createButton(n.zoomInText,n.zoomInTitle,i+\"-in\",e,this._zoomIn),this._zoomOutButton=this._createButton(n.zoomOutText,n.zoomOutTitle,i+\"-out\",e,this._zoomOut),this._updateDisabled(),t.on(\"zoomend zoomlevelschange\",this._updateDisabled,this),e},onRemove:function(t){t.off(\"zoomend zoomlevelschange\",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled\u0026\u0026this._map._zoomthis._map.getMinZoom()\u0026\u0026this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,i,e,n,o){var s=ht(\"a\",e,n);return s.innerHTML=t,s.href=\"#\",s.title=i,s.setAttribute(\"role\",\"button\"),s.setAttribute(\"aria-label\",i),J(s),V(s,\"click\",Q),V(s,\"click\",o,this),V(s,\"click\",this._refocusOnMap,this),s},_updateDisabled:function(){var t=this._map,i=\"leaflet-disabled\";mt(this._zoomInButton,i),mt(this._zoomOutButton,i),(this._disabled||t._zoom===t.getMinZoom())\u0026\u0026pt(this._zoomOutButton,i),(this._disabled||t._zoom===t.getMaxZoom())\u0026\u0026pt(this._zoomInButton,i)}});Le.mergeOptions({zoomControl:!0}),Le.addInitHook(function(){this.options.zoomControl\u0026\u0026(this.zoomControl=new ze,this.addControl(this.zoomControl))});var Me=Pe.extend({options:{position:\"bottomleft\",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var i=ht(\"div\",\"leaflet-control-scale\"),e=this.options;return this._addScales(e,\"leaflet-control-scale-line\",i),t.on(e.updateWhenIdle?\"moveend\":\"move\",this._update,this),t.whenReady(this._update,this),i},onRemove:function(t){t.off(this.options.updateWhenIdle?\"moveend\":\"move\",this._update,this)},_addScales:function(t,i,e){t.metric\u0026\u0026(this._mScale=ht(\"div\",i,e)),t.imperial\u0026\u0026(this._iScale=ht(\"div\",i,e))},_update:function(){var t=this._map,i=t.getSize().y/2,e=t.distance(t.containerPointToLatLng([0,i]),t.containerPointToLatLng([this.options.maxWidth,i]));this._updateScales(e)},_updateScales:function(t){this.options.metric\u0026\u0026t\u0026\u0026this._updateMetric(t),this.options.imperial\u0026\u0026t\u0026\u0026this._updateImperial(t)},_updateMetric:function(t){var i=this._getRoundNum(t),e=i5280?(i=o/5280,e=this._getRoundNum(i),this._updateScale(this._iScale,e+\" mi\",e/i)):(n=this._getRoundNum(o),this._updateScale(this._iScale,n+\" ft\",n/o))},_updateScale:function(t,i,e){t.style.width=Math.round(this.options.maxWidth*e)+\"px\",t.innerHTML=i},_getRoundNum:function(t){var i=Math.pow(10,(Math.floor(t)+\"\").length-1),e=t/i;return e=e=10?10:e=5?5:e=3?3:e=2?2:1,i*e}}),Ce=Pe.extend({options:{position:\"bottomright\",prefix:'Leaflet'},initialize:function(t){l(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=ht(\"div\",\"leaflet-control-attribution\"),J(this._container);for(var i in t._layers)t._layers[i].getAttribution\u0026\u0026this.addAttribution(t._layers[i].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]\u0026\u0026(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var i in this._attributions)this._attributions[i]\u0026\u0026t.push(i);var e=[];this.options.prefix\u0026\u0026e.push(this.options.prefix),t.length\u0026\u0026e.push(t.join(\", \")),this._container.innerHTML=e.join(\" | \")}}});Le.mergeOptions({attributionControl:!0}),Le.addInitHook(function(){this.options.attributionControl\u0026\u0026(new Ce).addTo(this)});Pe.Layers=Te,Pe.Zoom=ze,Pe.Scale=Me,Pe.Attribution=Ce,be.layers=function(t,i,e){return new Te(t,i,e)},be.zoom=function(t){return new ze(t)},be.scale=function(t){return new Me(t)},be.attribution=function(t){return new Ce(t)};var Ze=v.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ze.addTo=function(t,i){return t.addHandler(i,this),this};var Se,Ee={Events:hi},ke=Vi?\"touchstart mousedown\":\"mousedown\",Ae={mousedown:\"mouseup\",touchstart:\"touchend\",pointerdown:\"touchend\",MSPointerDown:\"touchend\"},Ie={mousedown:\"mousemove\",touchstart:\"touchmove\",pointerdown:\"touchmove\",MSPointerDown:\"touchmove\"},Be=ui.extend({options:{clickTolerance:3},initialize:function(t,i,e,n){l(this,n),this._element=t,this._dragStartTarget=i||t,this._preventOutline=e},enable:function(){this._enabled||(V(this._dragStartTarget,ke,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled\u0026\u0026(Be._dragging===this\u0026\u0026this.finishDrag(),q(this._dragStartTarget,ke,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated\u0026\u0026this._enabled\u0026\u0026(this._moved=!1,!dt(this._element,\"leaflet-zoom-anim\")\u0026\u0026!(Be._dragging||t.shiftKey||1!==t.which\u0026\u00261!==t.button\u0026\u0026!t.touches||(Be._dragging=this,this._preventOutline\u0026\u0026zt(this._element),bt(),mi(),this._moving)))){this.fire(\"down\");var i=t.touches?t.touches[0]:t;this._startPoint=new x(i.clientX,i.clientY),V(document,Ie[t.type],this._onMove,this),V(document,Ae[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated\u0026\u0026this._enabled)if(t.touches\u0026\u0026t.touches.length1)this._moved=!0;else{var i=t.touches\u0026\u00261===t.touches.length?t.touches[0]:t,e=new x(i.clientX,i.clientY).subtract(this._startPoint);(e.x||e.y)\u0026\u0026(Math.abs(e.x)+Math.abs(e.y)1e-7;h++)i=s*Math.sin(a),i=Math.pow((1-i)/(1+i),s/2),a+=u=Math.PI/2-2*Math.atan(r*i)-a;return new M(a*e,t.x*e/n)}},je=(Object.freeze||Object)({LonLat:De,Mercator:Ne,SphericalMercator:di}),We=i({},_i,{code:\"EPSG:3395\",projection:Ne,transformation:function(){var t=.5/(Math.PI*Ne.R);return S(t,.5,-t,.5)}()}),He=i({},_i,{code:\"EPSG:4326\",projection:De,transformation:S(1/180,1,-1/180,.5)}),Fe=i({},ci,{projection:De,transformation:S(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,i){var e=i.lng-t.lng,n=i.lat-t.lat;return Math.sqrt(e*e+n*n)},infinite:!0});ci.Earth=_i,ci.EPSG3395=We,ci.EPSG3857=vi,ci.EPSG900913=yi,ci.EPSG4326=He,ci.Simple=Fe;var Ue=ui.extend({options:{pane:\"overlayPane\",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t\u0026\u0026t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[n(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[n(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var i=t.target;if(i.hasLayer(this)){if(this._map=i,this._zoomAnimated=i._zoomAnimated,this.getEvents){var e=this.getEvents();i.on(e,this),this.once(\"remove\",function(){i.off(e,this)},this)}this.onAdd(i),this.getAttribution\u0026\u0026i.attributionControl\u0026\u0026i.attributionControl.addAttribution(this.getAttribution()),this.fire(\"add\"),i.fire(\"layeradd\",{layer:this})}}});Le.include({addLayer:function(t){if(!t._layerAdd)throw new Error(\"The provided object is not a Layer.\");var i=n(t);return this._layers[i]?this:(this._layers[i]=t,t._mapToAdd=this,t.beforeAdd\u0026\u0026t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var i=n(t);return this._layers[i]?(this._loaded\u0026\u0026t.onRemove(this),t.getAttribution\u0026\u0026this.attributionControl\u0026\u0026this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[i],this._loaded\u0026\u0026(this.fire(\"layerremove\",{layer:t}),t.fire(\"remove\")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t\u0026\u0026n(t)in this._layers},eachLayer:function(t,i){for(var e in this._layers)t.call(i,this._layers[e]);return this},_addLayers:function(t){for(var i=0,e=(t=t?ei(t)?t:[t]:[]).length;ithis._layersMaxZoom\u0026\u0026this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom\u0026\u0026this._layersMinZoom\u0026\u0026this.getZoom()i)return r=(n-i)/e,this._map.layerPointToLatLng([s.x-r*(s.x-o.x),s.y-r*(s.y-o.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,i){return i=i||this._defaultShape(),t=C(t),i.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new T,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Dt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var i=[],e=Dt(t),n=0,o=t.length;n=2\u0026\u0026i[0]instanceof M\u0026\u0026i[0].equals(i[e-1])\u0026\u0026i.pop(),i},_setLatLngs:function(t){tn.prototype._setLatLngs.call(this,t),Dt(this._latlngs)\u0026\u0026(this._latlngs=[this._latlngs])},_defaultShape:function(){return Dt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,i=this.options.weight,e=new x(i,i);if(t=new P(t.min.subtract(e),t.max.add(e)),this._parts=[],this._pxBounds\u0026\u0026this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var n,o=0,s=this._rings.length;ot.y!=n.yt.y\u0026\u0026t.x0?o:[i.src]}else{ei(this._url)||(this._url=[this._url]),i.autoplay=!!this.options.autoplay,i.loop=!!this.options.loop;for(var a=0;ao?(i.height=o+\"px\",pt(t,\"leaflet-popup-scrolled\")):mt(t,\"leaflet-popup-scrolled\"),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),e=this._getAnchor();Lt(this._container,i.add(e))},_adjustPan:function(){if(!(!this.options.autoPan||this._map._panAnim\u0026\u0026this._map._panAnim._inProgress)){var t=this._map,i=parseInt(at(this._container,\"marginBottom\"),10)||0,e=this._container.offsetHeight+i,n=this._containerWidth,o=new x(this._containerLeft,-e-this._containerBottom);o._add(Pt(this._container));var s=t.layerPointToContainerPoint(o),r=w(this.options.autoPanPadding),a=w(this.options.autoPanPaddingTopLeft||r),h=w(this.options.autoPanPaddingBottomRight||r),u=t.getSize(),l=0,c=0;s.x+n+h.xu.x\u0026\u0026(l=s.x+n-u.x+h.x),s.x-l-a.xu.y\u0026\u0026(c=s.y+e-u.y+h.y),s.y-c-a.ythis.options.maxZoom||en\u0026\u0026this._retainParent(o,s,r,n))},_retainChildren:function(t,i,e,n){for(var o=2*t;othis.options.maxZoom||void 0!==this.options.minZoom\u0026\u0026o1)this._setView(t,e);else{for(var c=o.min.y;ce.max.x)||!i.wrapLat\u0026\u0026(t.ye.max.y))return!1}if(!this.options.bounds)return!0;var n=this._tileCoordsToBounds(t);return z(this.options.bounds).overlaps(n)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var i=this._map,e=this.getTileSize(),n=t.scaleBy(e),o=n.add(e);return[i.unproject(n,t.z),i.unproject(o,t.z)]},_tileCoordsToBounds:function(t){var i=this._tileCoordsToNwSe(t),e=new T(i[0],i[1]);return this.options.noWrap||(e=this._map.wrapLatLngBounds(e)),e},_tileCoordsToKey:function(t){return t.x+\":\"+t.y+\":\"+t.z},_keyToTileCoords:function(t){var i=t.split(\":\"),e=new x(+i[0],+i[1]);return e.z=+i[2],e},_removeTile:function(t){var i=this._tiles[t];i\u0026\u0026(Ci||i.el.setAttribute(\"src\",ni),ut(i.el),delete this._tiles[t],this.fire(\"tileunload\",{tile:i.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){pt(t,\"leaflet-tile\");var i=this.getTileSize();t.style.width=i.x+\"px\",t.style.height=i.y+\"px\",t.onselectstart=r,t.onmousemove=r,Li\u0026\u0026this.options.opacity0\u0026\u0026(i.tileSize=Math.floor(i.tileSize/2),i.zoomReverse?(i.zoomOffset--,i.minZoom++):(i.zoomOffset++,i.maxZoom--),i.minZoom=Math.max(0,i.minZoom)),\"string\"==typeof i.subdomains\u0026\u0026(i.subdomains=i.subdomains.split(\"\")),Ti||this.on(\"tileunload\",this._onTileRemove)},setUrl:function(t,i){return this._url=t,i||this.redraw(),this},createTile:function(t,i){var n=document.createElement(\"img\");return V(n,\"load\",e(this._tileOnLoad,this,i,n)),V(n,\"error\",e(this._tileOnError,this,i,n)),this.options.crossOrigin\u0026\u0026(n.crossOrigin=\"\"),n.alt=\"\",n.setAttribute(\"role\",\"presentation\"),n.src=this.getTileUrl(t),n},getTileUrl:function(t){var e={r:Ki?\"@2x\":\"\",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map\u0026\u0026!this._map.options.crs.infinite){var n=this._globalTileRange.max.y-t.y;this.options.tms\u0026\u0026(e.y=n),e[\"-y\"]=n}return _(this._url,i(e,this.options))},_tileOnLoad:function(t,i){Li?setTimeout(e(t,this,null,i),0):t(null,i)},_tileOnError:function(t,i,e){var n=this.options.errorTileUrl;n\u0026\u0026i.getAttribute(\"src\")!==n\u0026\u0026(i.src=n),t(e,i)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,i=this.options.maxZoom,e=this.options.zoomReverse,n=this.options.zoomOffset;return e\u0026\u0026(t=i-t),t+n},_getSubdomain:function(t){var i=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[i]},_abortLoading:function(){var t,i;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom\u0026\u0026((i=this._tiles[t].el).onload=r,i.onerror=r,i.complete||(i.src=ni,ut(i),delete this._tiles[t]))}}),pn=dn.extend({defaultWmsParams:{service:\"WMS\",request:\"GetMap\",layers:\"\",styles:\"\",format:\"image/jpeg\",transparent:!1,version:\"1.1.1\"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var n=i({},this.defaultWmsParams);for(var o in e)o in this.options||(n[o]=e[o]);var s=(e=l(this,e)).detectRetina\u0026\u0026Ki?2:1,r=this.getTileSize();n.width=r.x*s,n.height=r.y*s,this.wmsParams=n},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var i=this._wmsVersion=1.3?\"crs\":\"srs\";this.wmsParams[i]=this._crs.code,dn.prototype.onAdd.call(this,t)},getTileUrl:function(t){var i=this._tileCoordsToNwSe(t),e=this._crs,n=b(e.project(i[0]),e.project(i[1])),o=n.min,s=n.max,r=(this._wmsVersion=1.3\u0026\u0026this._crs===He?[o.y,o.x,s.y,s.x]:[o.x,o.y,s.x,s.y]).join(\",\"),a=L.TileLayer.prototype.getTileUrl.call(this,t);return a+c(this.wmsParams,a,this.options.uppercase)+(this.options.uppercase?\"\u0026BBOX=\":\"\u0026bbox=\")+r},setParams:function(t,e){return i(this.wmsParams,t),e||this.redraw(),this}});dn.WMS=pn,Yt.wms=function(t,i){return new pn(t,i)};var mn=Ue.extend({options:{padding:.1,tolerance:0},initialize:function(t){l(this,t),n(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated\u0026\u0026pt(this._container,\"leaflet-zoom-animated\")),this.getPane().appendChild(this._container),this._update(),this.on(\"update\",this._updatePaths,this)},onRemove:function(){this.off(\"update\",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated\u0026\u0026(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,i){var e=this._map.getZoomScale(i,this._zoom),n=Pt(this._container),o=this._map.getSize().multiplyBy(.5+this.options.padding),s=this._map.project(this._center,i),r=this._map.project(t,i).subtract(s),a=o.multiplyBy(-e).add(n).add(o).subtract(r);Ni?wt(this._container,a,e):Lt(this._container,a)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,i=this._map.getSize(),e=this._map.containerPointToLayerPoint(i.multiplyBy(-t)).round();this._bounds=new P(e,e.add(i.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),fn=mn.extend({getEvents:function(){var t=mn.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){mn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement(\"canvas\");V(t,\"mousemove\",o(this._onMouseMove,32,this),this),V(t,\"click dblclick mousedown mouseup contextmenu\",this._onClick,this),V(t,\"mouseout\",this._handleMouseOut,this),this._ctx=t.getContext(\"2d\")},_destroyContainer:function(){delete this._ctx,ut(this._container),q(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){this._redrawBounds=null;for(var t in this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){this._drawnLayers={},mn.prototype._update.call(this);var t=this._bounds,i=this._container,e=t.getSize(),n=Ki?2:1;Lt(i,t.min),i.width=n*e.x,i.height=n*e.y,i.style.width=e.x+\"px\",i.style.height=e.y+\"px\",Ki\u0026\u0026this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire(\"update\")}},_reset:function(){mn.prototype._reset.call(this),this._postponeUpdatePaths\u0026\u0026(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[n(t)]=t;var i=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast\u0026\u0026(this._drawLast.next=i),this._drawLast=i,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var i=t._order,e=i.next,n=i.prev;e?e.prev=n:this._drawLast=n,n?n.next=e:this._drawFirst=e,delete t._order,delete this._layers[L.stamp(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(t.options.dashArray){var i,e=t.options.dashArray.split(\",\"),n=[];for(i=0;i')}}catch(t){return function(t){return document.createElement(\"')}}}(),vn={_initContainer:function(){this._container=ht(\"div\",\"leaflet-vml-container\")},_update:function(){this._map._animatingZoom||(mn.prototype._update.call(this),this.fire(\"update\"))},_initPath:function(t){var i=t._container=gn(\"shape\");pt(i,\"leaflet-vml-shape \"+(this.options.className||\"\")),i.coordsize=\"1 1\",t._path=gn(\"path\"),i.appendChild(t._path),this._updateStyle(t),this._layers[n(t)]=t},_addPath:function(t){var i=t._container;this._container.appendChild(i),t.options.interactive\u0026\u0026t.addInteractiveTarget(i)},_removePath:function(t){var i=t._container;ut(i),t.removeInteractiveTarget(i),delete this._layers[n(t)]},_updateStyle:function(t){var i=t._stroke,e=t._fill,n=t.options,o=t._container;o.stroked=!!n.stroke,o.filled=!!n.fill,n.stroke?(i||(i=t._stroke=gn(\"stroke\")),o.appendChild(i),i.weight=n.weight+\"px\",i.color=n.color,i.opacity=n.opacity,n.dashArray?i.dashStyle=ei(n.dashArray)?n.dashArray.join(\" \"):n.dashArray.replace(/( *, *)/g,\" \"):i.dashStyle=\"\",i.endcap=n.lineCap.replace(\"butt\",\"flat\"),i.joinstyle=n.lineJoin):i\u0026\u0026(o.removeChild(i),t._stroke=null),n.fill?(e||(e=t._fill=gn(\"fill\")),o.appendChild(e),e.color=n.fillColor||n.color,e.opacity=n.fillOpacity):e\u0026\u0026(o.removeChild(e),t._fill=null)},_updateCircle:function(t){var i=t._point.round(),e=Math.round(t._radius),n=Math.round(t._radiusY||e);this._setPath(t,t._empty()?\"M0 0\":\"AL \"+i.x+\",\"+i.y+\" \"+e+\",\"+n+\" 0,23592600\")},_setPath:function(t,i){t._path.v=i},_bringToFront:function(t){ct(t._container)},_bringToBack:function(t){_t(t._container)}},yn=Ji?gn:E,xn=mn.extend({getEvents:function(){var t=mn.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=yn(\"svg\"),this._container.setAttribute(\"pointer-events\",\"none\"),this._rootGroup=yn(\"g\"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ut(this._container),q(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){mn.prototype._update.call(this);var t=this._bounds,i=t.getSize(),e=this._container;this._svgSize\u0026\u0026this._svgSize.equals(i)||(this._svgSize=i,e.setAttribute(\"width\",i.x),e.setAttribute(\"height\",i.y)),Lt(e,t.min),e.setAttribute(\"viewBox\",[t.min.x,t.min.y,i.x,i.y].join(\" \")),this.fire(\"update\")}},_initPath:function(t){var i=t._path=yn(\"path\");t.options.className\u0026\u0026pt(i,t.options.className),t.options.interactive\u0026\u0026pt(i,\"leaflet-interactive\"),this._updateStyle(t),this._layers[n(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){ut(t._path),t.removeInteractiveTarget(t._path),delete this._layers[n(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var i=t._path,e=t.options;i\u0026\u0026(e.stroke?(i.setAttribute(\"stroke\",e.color),i.setAttribute(\"stroke-opacity\",e.opacity),i.setAttribute(\"stroke-width\",e.weight),i.setAttribute(\"stroke-linecap\",e.lineCap),i.setAttribute(\"stroke-linejoin\",e.lineJoin),e.dashArray?i.setAttribute(\"stroke-dasharray\",e.dashArray):i.removeAttribute(\"stroke-dasharray\"),e.dashOffset?i.setAttribute(\"stroke-dashoffset\",e.dashOffset):i.removeAttribute(\"stroke-dashoffset\")):i.setAttribute(\"stroke\",\"none\"),e.fill?(i.setAttribute(\"fill\",e.fillColor||e.color),i.setAttribute(\"fill-opacity\",e.fillOpacity),i.setAttribute(\"fill-rule\",e.fillRule||\"evenodd\")):i.setAttribute(\"fill\",\"none\"))},_updatePoly:function(t,i){this._setPath(t,k(t._parts,i))},_updateCircle:function(t){var i=t._point,e=Math.max(Math.round(t._radius),1),n=\"a\"+e+\",\"+(Math.max(Math.round(t._radiusY),1)||e)+\" 0 1,0 \",o=t._empty()?\"M0 0\":\"M\"+(i.x-e)+\",\"+i.y+n+2*e+\",0 \"+n+2*-e+\",0 \";this._setPath(t,o)},_setPath:function(t,i){t._path.setAttribute(\"d\",i)},_bringToFront:function(t){ct(t._path)},_bringToBack:function(t){_t(t._path)}});Ji\u0026\u0026xn.include(vn),Le.include({getRenderer:function(t){var i=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return i||(i=this._renderer=this.options.preferCanvas\u0026\u0026Xt()||Jt()),this.hasLayer(i)||this.addLayer(i),i},_getPaneRenderer:function(t){if(\"overlayPane\"===t||void 0===t)return!1;var i=this._paneRenderers[t];return void 0===i\u0026\u0026(i=xn\u0026\u0026Jt({pane:t})||fn\u0026\u0026Xt({pane:t}),this._paneRenderers[t]=i),i}});var wn=en.extend({initialize:function(t,i){en.prototype.initialize.call(this,this._boundsToLatLngs(t),i)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=z(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});xn.create=yn,xn.pointsToPath=k,nn.geometryToLayer=Wt,nn.coordsToLatLng=Ht,nn.coordsToLatLngs=Ft,nn.latLngToCoords=Ut,nn.latLngsToCoords=Vt,nn.getFeature=qt,nn.asFeature=Gt,Le.mergeOptions({boxZoom:!0});var Ln=Ze.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on(\"unload\",this._destroy,this)},addHooks:function(){V(this._container,\"mousedown\",this._onMouseDown,this)},removeHooks:function(){q(this._container,\"mousedown\",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ut(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout\u0026\u0026(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which\u0026\u00261!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),mi(),bt(),this._startPoint=this._map.mouseEventToContainerPoint(t),V(document,{contextmenu:Q,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=ht(\"div\",\"leaflet-zoom-box\",this._container),pt(this._container,\"leaflet-crosshair\"),this._map.fire(\"boxzoomstart\")),this._point=this._map.mouseEventToContainerPoint(t);var i=new P(this._point,this._startPoint),e=i.getSize();Lt(this._box,i.min),this._box.style.width=e.x+\"px\",this._box.style.height=e.y+\"px\"},_finish:function(){this._moved\u0026\u0026(ut(this._box),mt(this._container,\"leaflet-crosshair\")),fi(),Tt(),q(document,{contextmenu:Q,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)\u0026\u0026(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(e(this._resetState,this),0);var i=new T(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(i).fire(\"boxzoomend\",{boxZoomBounds:i})}},_onKeyDown:function(t){27===t.keyCode\u0026\u0026this._finish()}});Le.addInitHook(\"addHandler\",\"boxZoom\",Ln),Le.mergeOptions({doubleClickZoom:!0});var Pn=Ze.extend({addHooks:function(){this._map.on(\"dblclick\",this._onDoubleClick,this)},removeHooks:function(){this._map.off(\"dblclick\",this._onDoubleClick,this)},_onDoubleClick:function(t){var i=this._map,e=i.getZoom(),n=i.options.zoomDelta,o=t.originalEvent.shiftKey?e-n:e+n;\"center\"===i.options.doubleClickZoom?i.setZoom(o):i.setZoomAround(t.containerPoint,o)}});Le.addInitHook(\"addHandler\",\"doubleClickZoom\",Pn),Le.mergeOptions({dragging:!0,inertia:!zi,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var bn=Ze.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new Be(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on(\"predrag\",this._onPreDragLimit,this),t.options.worldCopyJump\u0026\u0026(this._draggable.on(\"predrag\",this._onPreDragWrap,this),t.on(\"zoomend\",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}pt(this._map._container,\"leaflet-grab leaflet-touch-drag\"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){mt(this._map._container,\"leaflet-grab\"),mt(this._map._container,\"leaflet-touch-drag\"),this._draggable.disable()},moved:function(){return this._draggable\u0026\u0026this._draggable._moved},moving:function(){return this._draggable\u0026\u0026this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds\u0026\u0026this._map.options.maxBoundsViscosity){var i=z(this._map.options.maxBounds);this._offsetLimit=b(this._map.latLngToContainerPoint(i.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(i.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire(\"movestart\").fire(\"dragstart\"),t.options.inertia\u0026\u0026(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var i=this._lastTime=+new Date,e=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(e),this._times.push(i),this._prunePositions(i)}this._map.fire(\"move\",t).fire(\"drag\",t)},_prunePositions:function(t){for(;this._positions.length1\u0026\u0026t-this._times[0]50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),i=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=i.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,i){return t-(t-i)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity\u0026\u0026this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),i=this._offsetLimit;t.xi.max.x\u0026\u0026(t.x=this._viscousLimit(t.x,i.max.x)),t.yi.max.y\u0026\u0026(t.y=this._viscousLimit(t.y,i.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,i=Math.round(t/2),e=this._initialWorldOffset,n=this._draggable._newPos.x,o=(n-i+e)%t+i-e,s=(n+i+e)%t-i-e,r=Math.abs(o+e)0?s:-s))-i;this._delta=0,this._startTime=null,r\u0026\u0026(\"center\"===t.options.scrollWheelZoom?t.setZoom(i+r):t.setZoomAround(this._lastMousePos,i+r))}});Le.addInitHook(\"addHandler\",\"scrollWheelZoom\",zn),Le.mergeOptions({tap:!0,tapTolerance:15});var Mn=Ze.extend({addHooks:function(){V(this._map._container,\"touchstart\",this._onDown,this)},removeHooks:function(){q(this._map._container,\"touchstart\",this._onDown,this)},_onDown:function(t){if(t.touches){if($(t),this._fireClick=!0,t.touches.length1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var i=t.touches[0],n=i.target;this._startPos=this._newPos=new x(i.clientX,i.clientY),n.tagName\u0026\u0026\"a\"===n.tagName.toLowerCase()\u0026\u0026pt(n,\"leaflet-active\"),this._holdTimeout=setTimeout(e(function(){this._isTapValid()\u0026\u0026(this._fireClick=!1,this._onUp(),this._simulateEvent(\"contextmenu\",i))},this),1e3),this._simulateEvent(\"mousedown\",i),V(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),q(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick\u0026\u0026t\u0026\u0026t.changedTouches){var i=t.changedTouches[0],e=i.target;e\u0026\u0026e.tagName\u0026\u0026\"a\"===e.tagName.toLowerCase()\u0026\u0026mt(e,\"leaflet-active\"),this._simulateEvent(\"mouseup\",i),this._isTapValid()\u0026\u0026this._simulateEvent(\"click\",i)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)i.getMaxZoom()\u0026\u0026s1)\u0026\u0026(this._zoom=i._limitZoom(this._zoom)),\"center\"===i.options.touchZoom){if(this._center=this._startLatLng,1===s)return}else{var r=n._add(o)._divideBy(2)._subtract(this._centerPoint);if(1===s\u0026\u00260===r.x\u0026\u00260===r.y)return;this._center=i.unproject(i.project(this._pinchStartLatLng,this._zoom).subtract(r),this._zoom)}this._moved||(i._moveStart(!0,!1),this._moved=!0),g(this._animRequest);var a=e(i._move,i,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=f(a,this,!0),$(t)}},_onTouchEnd:function(){this._moved\u0026\u0026this._zooming?(this._zooming=!1,g(this._animRequest),q(document,\"touchmove\",this._onTouchMove),q(document,\"touchend\",this._onTouchEnd),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});Le.addInitHook(\"addHandler\",\"touchZoom\",Cn),Le.BoxZoom=Ln,Le.DoubleClickZoom=Pn,Le.Drag=bn,Le.Keyboard=Tn,Le.ScrollWheelZoom=zn,Le.Tap=Mn,Le.TouchZoom=Cn;var Zn=window.L;window.L=t,Object.freeze=$t,t.version=\"1.3.1+HEAD.ba6f97f\",t.noConflict=function(){return window.L=Zn,this},t.Control=Pe,t.control=be,t.Browser=$i,t.Evented=ui,t.Mixin=Ee,t.Util=ai,t.Class=v,t.Handler=Ze,t.extend=i,t.bind=e,t.stamp=n,t.setOptions=l,t.DomEvent=de,t.DomUtil=xe,t.PosAnimation=we,t.Draggable=Be,t.LineUtil=Oe,t.PolyUtil=Re,t.Point=x,t.point=w,t.Bounds=P,t.bounds=b,t.Transformation=Z,t.transformation=S,t.Projection=je,t.LatLng=M,t.latLng=C,t.LatLngBounds=T,t.latLngBounds=z,t.CRS=ci,t.GeoJSON=nn,t.geoJSON=Kt,t.geoJson=sn,t.Layer=Ue,t.LayerGroup=Ve,t.layerGroup=function(t,i){return new Ve(t,i)},t.FeatureGroup=qe,t.featureGroup=function(t){return new qe(t)},t.ImageOverlay=rn,t.imageOverlay=function(t,i,e){return new rn(t,i,e)},t.VideoOverlay=an,t.videoOverlay=function(t,i,e){return new an(t,i,e)},t.DivOverlay=hn,t.Popup=un,t.popup=function(t,i){return new un(t,i)},t.Tooltip=ln,t.tooltip=function(t,i){return new ln(t,i)},t.Icon=Ge,t.icon=function(t){return new Ge(t)},t.DivIcon=cn,t.divIcon=function(t){return new cn(t)},t.Marker=Xe,t.marker=function(t,i){return new Xe(t,i)},t.TileLayer=dn,t.tileLayer=Yt,t.GridLayer=_n,t.gridLayer=function(t){return new _n(t)},t.SVG=xn,t.svg=Jt,t.Renderer=mn,t.Canvas=fn,t.canvas=Xt,t.Path=Je,t.CircleMarker=$e,t.circleMarker=function(t,i){return new $e(t,i)},t.Circle=Qe,t.circle=function(t,i,e){return new Qe(t,i,e)},t.Polyline=tn,t.polyline=function(t,i){return new tn(t,i)},t.Polygon=en,t.polygon=function(t,i){return new en(t,i)},t.Rectangle=wn,t.rectangle=function(t,i){return new wn(t,i)},t.Map=Le,t.map=function(t,i){return new Le(t,i)}}); img.leaflet-tile { padding: 0; margin: 0; border-radius: 0; border: none; } .info { padding: 6px 8px; font: 14px/16px Arial, Helvetica, sans-serif; background: white; background: rgba(255,255,255,0.8); box-shadow: 0 0 15px rgba(0,0,0,0.2); border-radius: 5px; } .legend { line-height: 18px; color: #555; } .legend svg text { fill: #555; } .legend svg line { stroke: #555; } .legend i { width: 18px; height: 18px; margin-right: 4px; opacity: 0.7; display: inline-block; vertical-align: top; zoom: 1; *display: inline; }  !function(a){if(\"object\"==typeof exports)module.exports=a();else if(\"function\"==typeof define\u0026\u0026define.amd)define(a);else{var b;\"undefined\"!=typeof window?b=window:\"undefined\"!=typeof global?b=global:\"undefined\"!=typeof self\u0026\u0026(b=self),b.proj4=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i=\"function\"==typeof require\u0026\u0026require;if(!h\u0026\u0026i)return i(g,!0);if(f)return f(g,!0);throw new Error(\"Cannot find module '\"+g+\"'\")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f=\"function\"==typeof require\u0026\u0026require,g=0;gf;f++)if(!b||2!==f||void 0!==c.z)switch(0===f?(d=g,e=\"x\"):1===f?(d=h,e=\"y\"):(d=i,e=\"z\"),a.axis[f]){case\"e\":c[e]=d;break;case\"w\":c[e]=-d;break;case\"n\":c[e]=d;break;case\"s\":c[e]=-d;break;case\"u\":void 0!==c[e]\u0026\u0026(c.z=d);break;case\"d\":void 0!==c[e]\u0026\u0026(c.z=-d);break;default:return null}return c}},{}],4:[function(a,b,c){var d=Math.PI/2,e=a(\"./sign\");b.exports=function(a){return Math.abs(a)1\u0026\u0026(a=a1?1:-1),Math.asin(a)}},{}],7:[function(a,b,c){b.exports=function(a){return 1-.25*a*(1+a/16*(3+1.25*a))}},{}],8:[function(a,b,c){b.exports=function(a){return.375*a*(1+.25*a*(1+.46875*a))}},{}],9:[function(a,b,c){b.exports=function(a){return.05859375*a*a*(1+.75*a)}},{}],10:[function(a,b,c){b.exports=function(a){return a*a*a*(35/3072)}},{}],11:[function(a,b,c){b.exports=function(a,b,c){var d=b*c;return a/Math.sqrt(1-d*d)}},{}],12:[function(a,b,c){b.exports=function(a,b,c,d,e){var f,g;f=a/b;for(var h=0;15h;h++)if(g=(a-(b*f-c*Math.sin(2*f)+d*Math.sin(4*f)-e*Math.sin(6*f)))/(b-2*c*Math.cos(2*f)+4*d*Math.cos(4*f)-6*e*Math.cos(6*f)),f+=g,Math.abs(g)b?-1*d:d;for(var e,f,g,h,i=Math.asin(.5*b),j=0;30j;j++)if(f=Math.sin(i),g=Math.cos(i),h=a*f,e=Math.pow(1-h*h,2)/(2*g)*(b/(1-a*a)-f/(1-h*h)+.5/a*Math.log((1-h)/(1+h))),i+=e,Math.abs(e)=h;h++)if(c=a*Math.sin(g),e=d-2*Math.atan(b*Math.pow((1-c)/(1+c),f))-g,g+=e,Math.abs(e)1e-7?(c=a*b,(1-a*a)*(b/(1-c*c)-.5/a*Math.log((1-c)/(1+c)))):2*b}},{}],21:[function(a,b,c){b.exports=function(a){return 0a?-1:1}},{}],22:[function(a,b,c){b.exports=function(a,b){return Math.pow((1-a)/(1+a),b)}},{}],23:[function(a,b,c){b.exports=function(a){var b={x:a[0],y:a[1]};return a.length2\u0026\u0026(b.z=a[2]),a.length3\u0026\u0026(b.m=a[3]),b}},{}],24:[function(a,b,c){var d=Math.PI/2;b.exports=function(a,b,c){var e=a*c,f=.5*a;return e=Math.pow((1-e)/(1+e),f),Math.tan(.5*(d-b))/e}},{}],25:[function(a,b,c){c.wgs84={towgs84:\"0,0,0\",ellipse:\"WGS84\",datumName:\"WGS84\"},c.ch1903={towgs84:\"674.374,15.056,405.346\",ellipse:\"bessel\",datumName:\"swiss\"},c.ggrs87={towgs84:\"-199.87,74.79,246.62\",ellipse:\"GRS80\",datumName:\"Greek_Geodetic_Reference_System_1987\"},c.nad83={towgs84:\"0,0,0\",ellipse:\"GRS80\",datumName:\"North_American_Datum_1983\"},c.nad27={nadgrids:\"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat\",ellipse:\"clrk66\",datumName:\"North_American_Datum_1927\"},c.potsdam={towgs84:\"606.0,23.0,413.0\",ellipse:\"bessel\",datumName:\"Potsdam Rauenberg 1950 DHDN\"},c.carthage={towgs84:\"-263.0,6.0,431.0\",ellipse:\"clark80\",datumName:\"Carthage 1934 Tunisia\"},c.hermannskogel={towgs84:\"653.0,-212.0,449.0\",ellipse:\"bessel\",datumName:\"Hermannskogel\"},c.ire65={towgs84:\"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15\",ellipse:\"mod_airy\",datumName:\"Ireland 1965\"},c.rassadiran={towgs84:\"-133.63,-157.5,-158.62\",ellipse:\"intl\",datumName:\"Rassadiran\"},c.nzgd49={towgs84:\"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993\",ellipse:\"intl\",datumName:\"New Zealand Geodetic Datum 1949\"},c.osgb36={towgs84:\"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894\",ellipse:\"airy\",datumName:\"Airy 1830\"},c.s_jtsk={towgs84:\"589,76,480\",ellipse:\"bessel\",datumName:\"S-JTSK (Ferro)\"},c.beduaram={towgs84:\"-106,-87,188\",ellipse:\"clrk80\",datumName:\"Beduaram\"},c.gunung_segara={towgs84:\"-403,684,41\",ellipse:\"bessel\",datumName:\"Gunung Segara Jakarta\"},c.rnb72={towgs84:\"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1\",ellipse:\"intl\",datumName:\"Reseau National Belge 1972\"}},{}],26:[function(a,b,c){c.MERIT={a:6378137,rf:298.257,ellipseName:\"MERIT 1983\"},c.SGS85={a:6378136,rf:298.257,ellipseName:\"Soviet Geodetic System 85\"},c.GRS80={a:6378137,rf:298.257222101,ellipseName:\"GRS 1980(IUGG, 1980)\"},c.IAU76={a:6378140,rf:298.257,ellipseName:\"IAU 1976\"},c.airy={a:6377563.396,b:6356256.91,ellipseName:\"Airy 1830\"},c.APL4={a:6378137,rf:298.25,ellipseName:\"Appl. Physics. 1965\"},c.NWL9D={a:6378145,rf:298.25,ellipseName:\"Naval Weapons Lab., 1965\"},c.mod_airy={a:6377340.189,b:6356034.446,ellipseName:\"Modified Airy\"},c.andrae={a:6377104.43,rf:300,ellipseName:\"Andrae 1876 (Den., Iclnd.)\"},c.aust_SA={a:6378160,rf:298.25,ellipseName:\"Australian Natl \u0026 S. Amer. 1969\"},c.GRS67={a:6378160,rf:298.247167427,ellipseName:\"GRS 67(IUGG 1967)\"},c.bessel={a:6377397.155,rf:299.1528128,ellipseName:\"Bessel 1841\"},c.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:\"Bessel 1841 (Namibia)\"},c.clrk66={a:6378206.4,b:6356583.8,ellipseName:\"Clarke 1866\"},c.clrk80={a:6378249.145,rf:293.4663,ellipseName:\"Clarke 1880 mod.\"},c.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:\"Clarke 1858\"},c.CPM={a:6375738.7,rf:334.29,ellipseName:\"Comm. des Poids et Mesures 1799\"},c.delmbr={a:6376428,rf:311.5,ellipseName:\"Delambre 1810 (Belgium)\"},c.engelis={a:6378136.05,rf:298.2566,ellipseName:\"Engelis 1985\"},c.evrst30={a:6377276.345,rf:300.8017,ellipseName:\"Everest 1830\"},c.evrst48={a:6377304.063,rf:300.8017,ellipseName:\"Everest 1948\"},c.evrst56={a:6377301.243,rf:300.8017,ellipseName:\"Everest 1956\"},c.evrst69={a:6377295.664,rf:300.8017,ellipseName:\"Everest 1969\"},c.evrstSS={a:6377298.556,rf:300.8017,ellipseName:\"Everest (Sabah \u0026 Sarawak)\"},c.fschr60={a:6378166,rf:298.3,ellipseName:\"Fischer (Mercury Datum) 1960\"},c.fschr60m={a:6378155,rf:298.3,ellipseName:\"Fischer 1960\"},c.fschr68={a:6378150,rf:298.3,ellipseName:\"Fischer 1968\"},c.helmert={a:6378200,rf:298.3,ellipseName:\"Helmert 1906\"},c.hough={a:6378270,rf:297,ellipseName:\"Hough\"},c.intl={a:6378388,rf:297,ellipseName:\"International 1909 (Hayford)\"},c.kaula={a:6378163,rf:298.24,ellipseName:\"Kaula 1961\"},c.lerch={a:6378139,rf:298.257,ellipseName:\"Lerch 1979\"},c.mprts={a:6397300,rf:191,ellipseName:\"Maupertius 1738\"},c.new_intl={a:6378157.5,b:6356772.2,ellipseName:\"New International 1967\"},c.plessis={a:6376523,rf:6355863,ellipseName:\"Plessis 1817 (France)\"},c.krass={a:6378245,rf:298.3,ellipseName:\"Krassovsky, 1942\"},c.SEasia={a:6378155,b:6356773.3205,ellipseName:\"Southeast Asia\"},c.walbeck={a:6376896,b:6355834.8467,ellipseName:\"Walbeck\"},c.WGS60={a:6378165,rf:298.3,ellipseName:\"WGS 60\"},c.WGS66={a:6378145,rf:298.25,ellipseName:\"WGS 66\"},c.WGS7={a:6378135,rf:298.26,ellipseName:\"WGS 72\"},c.WGS84={a:6378137,rf:298.257223563,ellipseName:\"WGS 84\"},c.sphere={a:6370997,b:6370997,ellipseName:\"Normal Sphere (r=6370997)\"}},{}],27:[function(a,b,c){c.greenwich=0,c.lisbon=-9.131906111111,c.paris=2.337229166667,c.bogota=-74.080916666667,c.madrid=-3.687938888889,c.rome=12.452333333333,c.bern=7.439583333333,c.jakarta=106.807719444444,c.ferro=-17.666666666667,c.brussels=4.367975,c.stockholm=18.058277777778,c.athens=23.7163375,c.oslo=10.722916666667},{}],28:[function(a,b,c){c.ft={to_meter:.3048},c[\"us-ft\"]={to_meter:1200/3937}},{}],29:[function(a,b,c){function d(a,b,c){var d;return Array.isArray(c)?(d=g(a,b,c),3===c.length?[d.x,d.y,d.z]:[d.x,d.y]):g(a,b,c)}function e(a){return a instanceof f?a:a.oProj?a.oProj:f(a)}function proj4(a,b,c){a=e(a);var f,g=!1;return\"undefined\"==typeof b?(b=a,a=h,g=!0):(\"undefined\"!=typeof b.x||Array.isArray(b))\u0026\u0026(c=b,b=a,a=h,g=!0),b=e(b),c?d(a,b,c):(f={forward:function(c){return d(a,b,c)},inverse:function(c){return d(b,a,c)}},g\u0026\u0026(f.oProj=b),f)}var f=a(\"./Proj\"),g=a(\"./transform\"),h=f(\"WGS84\");b.exports=proj4},{\"./Proj\":2,\"./transform\":65}],30:[function(a,b,c){var d=Math.PI/2,e=1,f=2,g=3,h=4,i=5,j=484813681109536e-20,k=1.0026,l=.3826834323650898,m=function(a){return this instanceof m?(this.datum_type=h,void(a\u0026\u0026(a.datumCode\u0026\u0026\"none\"===a.datumCode\u0026\u0026(this.datum_type=i),a.datum_params\u0026\u0026(this.datum_params=a.datum_params.map(parseFloat),(0!==this.datum_params[0]||0!==this.datum_params[1]||0!==this.datum_params[2])\u0026\u0026(this.datum_type=e),this.datum_params.length3\u0026\u0026(0!==this.datum_params[3]||0!==this.datum_params[4]||0!==this.datum_params[5]||0!==this.datum_params[6])\u0026\u0026(this.datum_type=f,this.datum_params[3]*=j,this.datum_params[4]*=j,this.datum_params[5]*=j,this.datum_params[6]=this.datum_params[6]/1e6+1)),this.datum_type=a.grids?g:this.datum_type,this.a=a.a,this.b=a.b,this.es=a.es,this.ep2=a.ep2,this.datum_type===g\u0026\u0026(this.grids=a.grids)))):new m(a)};m.prototype={compare_datums:function(a){return this.datum_type!==a.datum_type?!1:this.a!==a.a||Math.abs(this.es-a.es)5e-11?!1:this.datum_type===e?this.datum_params[0]===a.datum_params[0]\u0026\u0026this.datum_params[1]===a.datum_params[1]\u0026\u0026this.datum_params[2]===a.datum_params[2]:this.datum_type===f?this.datum_params[0]===a.datum_params[0]\u0026\u0026this.datum_params[1]===a.datum_params[1]\u0026\u0026this.datum_params[2]===a.datum_params[2]\u0026\u0026this.datum_params[3]===a.datum_params[3]\u0026\u0026this.datum_params[4]===a.datum_params[4]\u0026\u0026this.datum_params[5]===a.datum_params[5]\u0026\u0026this.datum_params[6]===a.datum_params[6]:this.datum_type===g||a.datum_type===g?this.nadgrids===a.nadgrids:!0},geodetic_to_geocentric:function(a){var b,c,e,f,g,h,i,j=a.x,k=a.y,l=a.z?a.z:0,m=0;if(-dk\u0026\u0026k-1.001*d)k=-d;else if(kd\u0026\u00261.001*dk)k=d;else if(-dk||kd)return null;return jMath.PI\u0026\u0026(j-=2*Math.PI),g=Math.sin(k),i=Math.cos(k),h=g*g,f=this.a/Math.sqrt(1-this.es*h),b=(f+l)*i*Math.cos(j),c=(f+l)*i*Math.sin(j),e=(f*(1-this.es)+l)*g,a.x=b,a.y=c,a.z=e,m},geocentric_to_geodetic:function(a){var b,c,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t=1e-12,u=t*t,v=30,w=a.x,x=a.y,y=a.z?a.z:0;if(o=!1,b=Math.sqrt(w*w+x*x),c=Math.sqrt(w*w+x*x+y*y),b/this.au\u0026\u0026vp);return r=Math.atan(m/Math.abs(l)),a.x=q,a.y=r,a.z=s,a},geocentric_to_geodetic_noniter:function(a){var b,c,e,f,g,h,i,j,m,n,o,p,q,r,s,t,u,v=a.x,w=a.y,x=a.z?a.z:0;if(v=parseFloat(v),w=parseFloat(w),x=parseFloat(x),u=!1,0!==v)b=Math.atan2(w,v);else if(w0)b=d;else if(0w)b=-d;else if(u=!0,b=0,x0)c=d;else{if(!(0x))return c=d,void(e=-this.b);c=-d}return g=v*v+w*w,f=Math.sqrt(g),h=x*k,j=Math.sqrt(h*h+g),n=h/j,p=f/j,o=n*n*n,i=x+this.b*this.ep2*o,t=f-this.a*this.es*p*p*p,m=Math.sqrt(i*i+t*t),q=i/m,r=t/m,s=this.a/Math.sqrt(1-this.es*q*q),e=r=l?f/r-s:-l=r?f/-r-s:x/q+s*(this.es-1),u===!1\u0026\u0026(c=Math.atan(q/r)),a.x=b,a.y=c,a.z=e,a},geocentric_to_wgs84:function(a){if(this.datum_type===e)a.x+=this.datum_params[0],a.y+=this.datum_params[1],a.z+=this.datum_params[2];else if(this.datum_type===f){var b=this.datum_params[0],c=this.datum_params[1],d=this.datum_params[2],g=this.datum_params[3],h=this.datum_params[4],i=this.datum_params[5],j=this.datum_params[6],k=j*(a.x-i*a.y+h*a.z)+b,l=j*(i*a.x+a.y-g*a.z)+c,m=j*(-h*a.x+g*a.y+a.z)+d;a.x=k,a.y=l,a.z=m}},geocentric_from_wgs84:function(a){if(this.datum_type===e)a.x-=this.datum_params[0],a.y-=this.datum_params[1],a.z-=this.datum_params[2];else if(this.datum_type===f){var b=this.datum_params[0],c=this.datum_params[1],d=this.datum_params[2],g=this.datum_params[3],h=this.datum_params[4],i=this.datum_params[5],j=this.datum_params[6],k=(a.x-b)/j,l=(a.y-c)/j,m=(a.z-d)/j;a.x=k+i*l-h*m,a.y=-i*k+l+g*m,a.z=h*k-g*l+m}}},b.exports=m},{}],31:[function(a,b,c){var d=1,e=2,f=3,g=5,h=6378137,i=.006694379990141316;b.exports=function(a,b,c){function j(a){return a===d||a===e}var k,l,m;if(a.compare_datums(b))return c;if(a.datum_type===g||b.datum_type===g)return c;var n=a.a,o=a.es,p=b.a,q=b.es,r=a.datum_type;if(r===f)if(0===this.apply_gridshift(a,0,c))a.a=h,a.es=i;else{if(!a.datum_params)return a.a=n,a.es=a.es,c;for(k=1,l=0,m=a.datum_params.length;ml;l++)k*=a.datum_params[l];if(0===k)return a.a=n,a.es=a.es,c;r=a.datum_params.length3?e:d}return b.datum_type===f\u0026\u0026(b.a=h,b.es=i),(a.es!==b.es||a.a!==b.a||j(r)||j(b.datum_type))\u0026\u0026(a.geodetic_to_geocentric(c),j(a.datum_type)\u0026\u0026a.geocentric_to_wgs84(c),j(b.datum_type)\u0026\u0026b.geocentric_from_wgs84(c),b.geocentric_to_geodetic(c)),b.datum_type===f\u0026\u0026this.apply_gridshift(b,1,c),a.a=n,a.es=o,b.a=p,b.es=q,c}},{}],32:[function(a,b,c){function d(a){var b=this;if(2===arguments.length){var c=arguments[1];\"string\"==typeof c?\"+\"===c.charAt(0)?d[a]=f(arguments[1]):d[a]=g(arguments[1]):d[a]=c}else if(1===arguments.length){if(Array.isArray(a))return a.map(function(a){Array.isArray(a)?d.apply(b,a):d(a)});if(\"string\"==typeof a){if(a in d)return d[a]}else\"EPSG\"in a?d[\"EPSG:\"+a.EPSG]=a:\"ESRI\"in a?d[\"ESRI:\"+a.ESRI]=a:\"IAU2000\"in a?d[\"IAU2000:\"+a.IAU2000]=a:console.log(a);return}}var e=a(\"./global\"),f=a(\"./projString\"),g=a(\"./wkt\");e(d),b.exports=d},{\"./global\":35,\"./projString\":38,\"./wkt\":66}],33:[function(a,b,c){var d=a(\"./constants/Datum\"),e=a(\"./constants/Ellipsoid\"),f=a(\"./extend\"),g=a(\"./datum\"),h=1e-10,i=.16666666666666666,j=.04722222222222222,k=.022156084656084655;b.exports=function(a){if(a.datumCode\u0026\u0026\"none\"!==a.datumCode){var b=d[a.datumCode];b\u0026\u0026(a.datum_params=b.towgs84?b.towgs84.split(\",\"):null,a.ellps=b.ellipse,a.datumName=b.datumName?b.datumName:a.datumCode)}if(!a.a){var c=e[a.ellps]?e[a.ellps]:e.WGS84;f(a,c)}return a.rf\u0026\u0026!a.b\u0026\u0026(a.b=(1-1/a.rf)*a.a),(0===a.rf||Math.abs(a.a-a.b)d?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},c.forward=function(a){var b=a.x,c=a.y;this.sin_phi=Math.sin(c),this.cos_phi=Math.cos(c);var d=f(this.e3,this.sin_phi,this.cos_phi),e=this.a*Math.sqrt(this.c-this.ns0*d)/this.ns0,h=this.ns0*g(b-this.long0),i=e*Math.sin(h)+this.x0,j=this.rh-e*Math.cos(h)+this.y0;return a.x=i,a.y=j,a},c.inverse=function(a){var b,c,d,e,f,h;return a.x-=this.x0,a.y=this.rh-a.y+this.y0,this.ns0=0?(b=Math.sqrt(a.x*a.x+a.y*a.y),d=1):(b=-Math.sqrt(a.x*a.x+a.y*a.y),d=-1),e=0,0!==b\u0026\u0026(e=Math.atan2(d*a.x,d*a.y)),d=b*this.ns0/this.a,this.sphere?h=Math.asin((this.c-d*d)/(2*this.ns0)):(c=(this.c-d*d)/this.ns0,h=this.phi1z(this.e3,c)),f=g(e/this.ns0+this.long0),a.x=f,a.y=h,a},c.phi1z=function(a,b){var c,e,f,g,i,j=h(.5*b);if(da)return j;for(var k=a*a,l=1;25=l;l++)if(c=Math.sin(j),e=Math.cos(j),f=a*c,g=1-f*f,i=.5*g*g/e*(b/(1-k)-c/g+.5/a*Math.log((1-f)/(1+f))),j+=i,Math.abs(i)2*e*this.a)return;return c=b/this.a,o=Math.sin(c),p=Math.cos(c),q=this.long0,Math.abs(b)=0?this.long0+Math.atan2(a.x,-a.y):this.long0-Math.atan2(-a.x,a.y):this.long0+Math.atan2(a.x*o,b*this.cos_p12*p-a.y*this.sin_p12*o))),a.x=q,a.y=r,a}return t=h(this.es),u=i(this.es),v=j(this.es),w=k(this.es),Math.abs(this.sin_p12-1)e\u0026\u0026(a.y*=-1),a;var o=i(this.a,this.e,Math.sin(h)),p=o*o*o/this.a/this.a*(1-this.es),q=Math.pow(Math.tan(h),2),r=d*this.a/o,s=r*r;b=h-o*Math.tan(h)/p*r*r*(.5-(1+3*q)*r*r/24),c=r*(1-s*(q/3+(1+3*q)*q*s/15))/Math.cos(h)}return a.x=j(c+this.long0),a.y=k(b),a},c.names=[\"Cassini\",\"Cassini_Soldner\",\"cass\"]},{\"../common/adjust_lat\":4,\"../common/adjust_lon\":5,\"../common/e0fn\":7,\"../common/e1fn\":8,\"../common/e2fn\":9,\"../common/e3fn\":10,\"../common/gN\":11,\"../common/imlfn\":12,\"../common/mlfn\":14}],43:[function(a,b,c){var d=a(\"../common/adjust_lon\"),e=a(\"../common/qsfnz\"),f=a(\"../common/msfnz\"),g=a(\"../common/iqsfnz\");c.init=function(){this.sphere||(this.k0=f(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},c.forward=function(a){var b,c,f=a.x,g=a.y,h=d(f-this.long0);if(this.sphere)b=this.x0+this.a*h*Math.cos(this.lat_ts),c=this.y0+this.a*Math.sin(g)/Math.cos(this.lat_ts);else{var i=e(this.e,Math.sin(g));b=this.x0+this.a*this.k0*h,c=this.y0+this.a*i*.5/this.k0}return a.x=b,a.y=c,a},c.inverse=function(a){a.x-=this.x0,a.y-=this.y0;var b,c;return this.sphere?(b=d(this.long0+a.x/this.a/Math.cos(this.lat_ts)),c=Math.asin(a.y/this.a*Math.cos(this.lat_ts))):(c=g(this.e,2*a.y*this.k0/this.a),b=d(this.long0+a.x/(this.a*this.k0))),a.x=b,a.y=c,a},c.names=[\"cea\"]},{\"../common/adjust_lon\":5,\"../common/iqsfnz\":13,\"../common/msfnz\":15,\"../common/qsfnz\":20}],44:[function(a,b,c){var d=a(\"../common/adjust_lon\"),e=a(\"../common/adjust_lat\");c.init=function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||\"Equidistant Cylindrical (Plate Carre)\",this.rc=Math.cos(this.lat_ts)},c.forward=function(a){var b=a.x,c=a.y,f=d(b-this.long0),g=e(c-this.lat0);return a.x=this.x0+this.a*f*this.rc,a.y=this.y0+this.a*g,a},c.inverse=function(a){var b=a.x,c=a.y;return a.x=d(this.long0+(b-this.x0)/(this.a*this.rc)),a.y=e(this.lat0+(c-this.y0)/this.a),a},c.names=[\"Equirectangular\",\"Equidistant_Cylindrical\",\"eqc\"]},{\"../common/adjust_lat\":4,\"../common/adjust_lon\":5}],45:[function(a,b,c){var d=a(\"../common/e0fn\"),e=a(\"../common/e1fn\"),f=a(\"../common/e2fn\"),g=a(\"../common/e3fn\"),h=a(\"../common/msfnz\"),i=a(\"../common/mlfn\"),j=a(\"../common/adjust_lon\"),k=a(\"../common/adjust_lat\"),l=a(\"../common/imlfn\"),m=1e-10;c.init=function(){Math.abs(this.lat1+this.lat2)=0?(c=Math.sqrt(a.x*a.x+a.y*a.y),b=1):(c=-Math.sqrt(a.x*a.x+a.y*a.y),b=-1);var f=0;if(0!==c\u0026\u0026(f=Math.atan2(b*a.x,b*a.y)),this.sphere)return e=j(this.long0+f/this.ns),d=k(this.g-c/this.a),a.x=e,a.y=d,a;var g=this.g-c/this.a;return d=l(g,this.e0,this.e1,this.e2,this.e3),e=j(this.long0+f/this.ns),a.x=e,a.y=d,a},c.names=[\"Equidistant_Conic\",\"eqdc\"]},{\"../common/adjust_lat\":4,\"../common/adjust_lon\":5,\"../common/e0fn\":7,\"../common/e1fn\":8,\"../common/e2fn\":9,\"../common/e3fn\":10,\"../common/imlfn\":12,\"../common/mlfn\":14,\"../common/msfnz\":15}],46:[function(a,b,c){var d=Math.PI/4,e=a(\"../common/srat\"),f=Math.PI/2,g=20;c.init=function(){var a=Math.sin(this.lat0),b=Math.cos(this.lat0);b*=b,this.rc=Math.sqrt(1-this.es)/(1-this.es*a*a),this.C=Math.sqrt(1+this.es*b*b/(1-this.es)),this.phic0=Math.asin(a/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+d)/(Math.pow(Math.tan(.5*this.lat0+d),this.C)*e(this.e*a,this.ratexp))},c.forward=function(a){var b=a.x,c=a.y;return a.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*c+d),this.C)*e(this.e*Math.sin(c),this.ratexp))-f,a.x=this.C*b,a},c.inverse=function(a){for(var b=1e-14,c=a.x/this.C,h=a.y,i=Math.pow(Math.tan(.5*h+d)/this.K,1/this.C),j=g;j0\u0026\u0026(h=2*Math.atan(i*e(this.e*Math.sin(a.y),-.5*this.e))-f,!(Math.abs(h-a.y)0||Math.abs(i)k);return k=15?null:a},c.names=[\"Krovak\",\"krovak\"]},{\"../common/adjust_lon\":5}],49:[function(a,b,c){var d=Math.PI/2,e=Math.PI/4,f=1e-10,g=a(\"../common/qsfnz\"),h=a(\"../common/adjust_lon\");c.S_POLE=1,c.N_POLE=2,c.EQUIT=3,c.OBLIQ=4,c.init=function(){var a=Math.abs(this.lat0);if(Math.abs(a-d)0){var b;switch(this.qp=g(this.e,1),this.mmf=.5/(1-this.es),this.apa=this.authset(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),b=Math.sin(this.lat0),this.sinb1=g(this.e,b)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*b*b)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}}else this.mode===this.OBLIQ\u0026\u0026(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},c.forward=function(a){var b,c,i,j,k,l,m,n,o,p,q=a.x,r=a.y;if(q=h(q-this.long0),this.sphere){if(k=Math.sin(r),p=Math.cos(r),i=Math.cos(q),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(c=this.mode===this.EQUIT?1+p*i:1+this.sinph0*k+this.cosph0*p*i,f=c)return null;c=Math.sqrt(2/c),b=c*p*Math.sin(q),c*=this.mode===this.EQUIT?k:this.cosph0*k-this.sinph0*p*i}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE\u0026\u0026(i=-i),Math.abs(r+this.phi0)=0?(b=(o=Math.sqrt(l))*j,c=i*(this.mode===this.S_POLE?o:-o)):b=c=0}}return a.x=this.a*b+this.x0,a.y=this.a*c+this.y0,a},c.inverse=function(a){a.x-=this.x0,a.y-=this.y0;var b,c,e,g,i,j,k,l=a.x/this.a,m=a.y/this.a;if(this.sphere){var n,o=0,p=0;if(n=Math.sqrt(l*l+m*m),c=.5*n,c1)return null;switch(c=2*Math.asin(c),(this.mode===this.OBLIQ||this.mode===this.EQUIT)\u0026\u0026(p=Math.sin(c),o=Math.cos(c)),this.mode){case this.EQUIT:c=Math.abs(n)j)return a.x=0,a.y=this.phi0,a;g=2*Math.asin(.5*j/this.rq),e=Math.cos(g),l*=g=Math.sin(g),this.mode===this.OBLIQ?(k=e*this.sinb1+m*g*this.cosb1/j,i=this.qp*k,m=j*this.cosb1*e-m*this.sinb1*g):(k=m*g/j,i=this.qp*k,m=j*e)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE\u0026\u0026(m=-m),i=l*l+m*m,!i)return a.x=0,a.y=this.phi0,a;k=1-i/this.qp,this.mode===this.S_POLE\u0026\u0026(k=-k)}b=Math.atan2(l,m),c=this.authlat(Math.asin(k),this.apa)}return a.x=h(this.long0+b),a.y=c,a},c.P00=.3333333333333333,c.P01=.17222222222222222,c.P02=.10257936507936508,c.P10=.06388888888888888,c.P11=.0664021164021164,c.P20=.016415012942191543,c.authset=function(a){var b,c=[];return c[0]=a*this.P00,b=a*a,c[0]+=b*this.P01,c[1]=b*this.P10,b*=a,c[0]+=b*this.P02,c[1]+=b*this.P11,c[2]=b*this.P20,c},c.authlat=function(a,b){var c=a+a;return a+b[0]*Math.sin(c)+b[1]*Math.sin(c+c)+b[2]*Math.sin(c+c+c)},c.names=[\"Lambert Azimuthal Equal Area\",\"Lambert_Azimuthal_Equal_Area\",\"laea\"]},{\"../common/adjust_lon\":5,\"../common/qsfnz\":20}],50:[function(a,b,c){var d=1e-10,e=a(\"../common/msfnz\"),f=a(\"../common/tsfnz\"),g=Math.PI/2,h=a(\"../common/sign\"),i=a(\"../common/adjust_lon\"),j=a(\"../common/phi2z\");c.init=function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)d?this.ns=Math.log(g/k)/Math.log(h/l):this.ns=b,isNaN(this.ns)\u0026\u0026(this.ns=b),this.f0=g/(this.ns*Math.pow(h,this.ns)),this.rh=this.a*this.f0*Math.pow(m,this.ns),this.title||(this.title=\"Lambert Conformal Conic\")}},c.forward=function(a){var b=a.x,c=a.y;Math.abs(2*Math.abs(c)-Math.PI)d)e=f(this.e,c,Math.sin(c)),j=this.a*this.f0*Math.pow(e,this.ns);else{if(k=c*this.ns,0=k)return null;j=0}var l=this.ns*i(b-this.long0);return a.x=this.k0*(j*Math.sin(l))+this.x0,a.y=this.k0*(this.rh-j*Math.cos(l))+this.y0,a},c.inverse=function(a){var b,c,d,e,f,h=(a.x-this.x0)/this.k0,k=this.rh-(a.y-this.y0)/this.k0;this.ns0?(b=Math.sqrt(h*h+k*k),c=1):(b=-Math.sqrt(h*h+k*k),c=-1);var l=0;if(0!==b\u0026\u0026(l=Math.atan2(c*h,c*k)),0!==b||this.ns0){if(c=1/this.ns,d=Math.pow(b/(this.a*this.f0),c),e=j(this.e,d),-9999===e)return null}else e=-g;return f=i(l/this.ns+this.long0),a.x=f,a.y=e,a},c.names=[\"Lambert Tangential Conformal Conic Projection\",\"Lambert_Conformal_Conic\",\"Lambert_Conformal_Conic_2SP\",\"lcc\"]},{\"../common/adjust_lon\":5,\"../common/msfnz\":15,\"../common/phi2z\":16,\"../common/sign\":21,\"../common/tsfnz\":24}],51:[function(a,b,c){function d(a){return a}c.init=function(){},c.forward=d,c.inverse=d,c.names=[\"longlat\",\"identity\"]},{}],52:[function(a,b,c){var d=a(\"../common/msfnz\"),e=Math.PI/2,f=1e-10,g=57.29577951308232,h=a(\"../common/adjust_lon\"),i=Math.PI/4,j=a(\"../common/tsfnz\"),k=a(\"../common/phi2z\");c.init=function(){var a=this.b/this.a;this.es=1-a*a,\"x0\"in this||(this.x0=0),\"y0\"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=d(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},c.forward=function(a){var b=a.x,c=a.y;if(c*g90\u0026\u0026-90c*g\u0026\u0026b*g180\u0026\u0026-180b*g)return null;var d,k;if(Math.abs(Math.abs(c)-e).999999999999\u0026\u0026(c=.999999999999),b=Math.asin(c);var e=d(this.long0+a.x/(.900316316158*this.a*Math.cos(b)));eMath.PI\u0026\u0026(e=Math.PI),c=(2*b+Math.sin(2*b))/Math.PI,Math.abs(c)1\u0026\u0026(c=1);var f=Math.asin(c);return a.x=e,a.y=f,a},c.names=[\"Mollweide\",\"moll\"]},{\"../common/adjust_lon\":5}],55:[function(a,b,c){var d=484813681109536e-20;c.iterations=1,c.init=function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},c.forward=function(a){var b,c=a.x,e=a.y,f=e-this.lat0,g=c-this.long0,h=f/d*1e-5,i=g,j=1,k=0;for(b=1;10=b;b++)j*=h,k+=this.A[b]*j;var l,m,n=k,o=i,p=1,q=0,r=0,s=0;for(b=1;6=b;b++)l=p*n-q*o,m=q*n+p*o,p=l,q=m,r=r+this.B_re[b]*p-this.B_im[b]*q,s=s+this.B_im[b]*p+this.B_re[b]*q;return a.x=s*this.a+this.x0,a.y=r*this.a+this.y0,a},c.inverse=function(a){var b,c,e,f=a.x,g=a.y,h=f-this.x0,i=g-this.y0,j=i/this.a,k=h/this.a,l=1,m=0,n=0,o=0;for(b=1;6=b;b++)c=l*j-m*k,e=m*j+l*k,l=c,m=e,n=n+this.C_re[b]*l-this.C_im[b]*m,o=o+this.C_im[b]*l+this.C_re[b]*m;for(var p=0;p=b;b++)q=s*n-t*o,r=t*n+s*o,s=q,t=r,u+=(b-1)*(this.B_re[b]*s-this.B_im[b]*t),v+=(b-1)*(this.B_im[b]*s+this.B_re[b]*t);s=1,t=0;var w=this.B_re[1],x=this.B_im[1];for(b=2;6=b;b++)q=s*n-t*o,r=t*n+s*o,s=q,t=r,w+=b*(this.B_re[b]*s-this.B_im[b]*t),x+=b*(this.B_im[b]*s+this.B_re[b]*t);var y=w*w+x*x;n=(u*w+v*x)/y,o=(v*w-u*x)/y}var z=n,A=o,B=1,C=0;for(b=1;9=b;b++)B*=z,C+=this.D[b]*B;var D=this.lat0+C*d*1e5,E=this.long0+A;return a.x=E,a.y=D,a},c.names=[\"New_Zealand_Map_Grid\",\"nzmg\"]},{}],56:[function(a,b,c){var d=a(\"../common/tsfnz\"),e=a(\"../common/adjust_lon\"),f=a(\"../common/phi2z\"),g=Math.PI/2,h=Math.PI/4,i=1e-10;c.init=function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)\u0026\u0026(this.k0=1);var a=Math.sin(this.lat0),b=Math.cos(this.lat0),c=this.e*a;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(b,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-c*c);var f=d(this.e,this.lat0,a),g=this.bl/b*Math.sqrt((1-this.es)/(1-c*c));1g*g\u0026\u0026(g=1);var h,i;if(isNaN(this.longc)){var j=d(this.e,this.lat1,Math.sin(this.lat1)),k=d(this.e,this.lat2,Math.sin(this.lat2));this.lat0=0?this.el=(g+Math.sqrt(g*g-1))*Math.pow(f,this.bl):this.el=(g-Math.sqrt(g*g-1))*Math.pow(f,this.bl);var l=Math.pow(j,this.bl),m=Math.pow(k,this.bl);h=this.el/l,i=.5*(h-1/h);var n=(this.el*this.el-m*l)/(this.el*this.el+m*l),o=(m-l)/(m+l),p=e(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(n*Math.tan(.5*this.bl*p)/o)/this.bl,this.long0=e(this.long0);var q=e(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*q)/i),this.alpha=Math.asin(g*Math.sin(this.gamma0))}else h=this.lat0=0?g+Math.sqrt(g*g-1):g-Math.sqrt(g*g-1),this.el=h*Math.pow(f,this.bl),i=.5*(h-1/h),this.gamma0=Math.asin(Math.sin(this.alpha)/g),this.long0=this.longc-Math.asin(i*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(g*g-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(g*g-1),Math.cos(this.alpha))},c.forward=function(a){var b,c,f,j=a.x,k=a.y,l=e(j-this.long0);if(Math.abs(Math.abs(k)-g)0?-1:1,c=this.al/this.bl*Math.log(Math.tan(h+f*this.gamma0*.5)),b=-1*f*g*this.al/this.bl;else{var m=d(this.e,k,Math.sin(k)),n=this.el/Math.pow(m,this.bl),o=.5*(n-1/n),p=.5*(n+1/n),q=Math.sin(this.bl*l),r=(o*Math.sin(this.gamma0)-q*Math.cos(this.gamma0))/p;c=Math.abs(Math.abs(r)-1)g?(g=Math.sin(b),c=this.long0+a.x*Math.sqrt(1-this.es*g*g)/(this.a*Math.cos(b)),f=d(c)):jg-k\u0026\u0026(f=this.long0)),a.x=f,a.y=b,a},c.names=[\"Sinusoidal\",\"sinu\"]},{\"../common/adjust_lat\":4,\"../common/adjust_lon\":5,\"../common/asinz\":6,\"../common/pj_enfn\":17,\"../common/pj_inv_mlfn\":18,\"../common/pj_mlfn\":19}],59:[function(a,b,c){c.init=function(){var a=this.lat0;this.lambda0=this.long0;var b=Math.sin(a),c=this.a,d=this.rf,e=1/d,f=2*e-Math.pow(e,2),g=this.e=Math.sqrt(f);this.R=this.k0*c*Math.sqrt(1-f)/(1-f*Math.pow(b,2)),this.alpha=Math.sqrt(1+f/(1-f)*Math.pow(Math.cos(a),4)),this.b0=Math.asin(b/this.alpha);var h=Math.log(Math.tan(Math.PI/4+this.b0/2)),i=Math.log(Math.tan(Math.PI/4+a/2)),j=Math.log((1+g*b)/(1-g*b));this.K=h-this.alpha*i+this.alpha*g/2*j},c.forward=function(a){var b=Math.log(Math.tan(Math.PI/4-a.y/2)),c=this.e/2*Math.log((1+this.e*Math.sin(a.y))/(1-this.e*Math.sin(a.y))),d=-this.alpha*(b+c)+this.K,e=2*(Math.atan(Math.exp(d))-Math.PI/4),f=this.alpha*(a.x-this.lambda0),g=Math.atan(Math.sin(f)/(Math.sin(this.b0)*Math.tan(e)+Math.cos(this.b0)*Math.cos(f))),h=Math.asin(Math.cos(this.b0)*Math.sin(e)-Math.sin(this.b0)*Math.cos(e)*Math.cos(f));return a.y=this.R/2*Math.log((1+Math.sin(h))/(1-Math.sin(h)))+this.y0,a.x=this.R*g+this.x0,a},c.inverse=function(a){for(var b=a.x-this.x0,c=a.y-this.y0,d=b/this.R,e=2*(Math.atan(Math.exp(c/this.R))-Math.PI/4),f=Math.asin(Math.cos(this.b0)*Math.sin(e)+Math.sin(this.b0)*Math.cos(e)*Math.cos(d)),g=Math.atan(Math.sin(d)/(Math.cos(this.b0)*Math.cos(d)-Math.sin(this.b0)*Math.tan(e))),h=this.lambda0+g/this.alpha,i=0,j=f,k=-1e3,l=0;Math.abs(j-k)1e-7;){if(++l20)return;i=1/this.alpha*(Math.log(Math.tan(Math.PI/4+f/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(j))/2)),k=j,j=2*Math.atan(Math.exp(i))-Math.PI/2}return a.x=h,a.y=j,a},c.names=[\"somerc\"]},{}],60:[function(a,b,c){var d=Math.PI/2,e=1e-10,f=a(\"../common/sign\"),g=a(\"../common/msfnz\"),h=a(\"../common/tsfnz\"),i=a(\"../common/phi2z\"),j=a(\"../common/adjust_lon\");c.ssfn_=function(a,b,c){return b*=c,Math.tan(.5*(d+a))*Math.pow((1-b)/(1+b),.5*c)},c.init=function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0\u0026\u0026!isNaN(this.lat_ts)\u0026\u0026Math.abs(this.coslat0)0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0\u0026\u0026!isNaN(this.lat_ts)\u0026\u0026Math.abs(this.coslat0)=k?(a.x=b,a.y=c,a):(c=Math.asin(Math.cos(l)*this.sinlat0+a.y*Math.sin(l)*this.coslat0/k),b=j(Math.abs(this.coslat0)0?this.long0+Math.atan2(a.x,-1*a.y):this.long0+Math.atan2(a.x,a.y):this.long0+Math.atan2(a.x*Math.sin(l),k*this.coslat0*Math.cos(l)-a.y*this.sinlat0*Math.sin(l))),a.x=b,a.y=c,a)}if(Math.abs(this.coslat0)=k)return c=this.lat0,b=this.long0,a.x=b,a.y=c,a;a.x*=this.con,a.y*=this.con,f=k*this.cons/(2*this.a*this.k0),c=this.con*i(this.e,f),b=this.con*j(this.con*this.long0+Math.atan2(a.x,-1*a.y))}else g=2*Math.atan(k*this.cosX0/(2*this.a*this.k0*this.ms1)),b=this.long0,e=k?h=this.X0:(h=Math.asin(Math.cos(g)*this.sinX0+a.y*Math.sin(g)*this.cosX0/k),b=j(this.long0+Math.atan2(a.x*Math.sin(g),k*this.cosX0*Math.cos(g)-a.y*this.sinX0*Math.sin(g)))),c=-1*i(this.e,Math.tan(.5*(d+h)));return a.x=b,a.y=c,a},c.names=[\"stere\",\"Stereographic_South_Pole\",\"Polar Stereographic (variant B)\"]},{\"../common/adjust_lon\":5,\"../common/msfnz\":15,\"../common/phi2z\":16,\"../common/sign\":21,\"../common/tsfnz\":24}],61:[function(a,b,c){var d=a(\"./gauss\"),e=a(\"../common/adjust_lon\");c.init=function(){d.init.apply(this),this.rc\u0026\u0026(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title=\"Oblique Stereographic Alternative\"))},c.forward=function(a){var b,c,f,g;return a.x=e(a.x-this.long0),d.forward.apply(this,[a]),b=Math.sin(a.y),c=Math.cos(a.y),f=Math.cos(a.x),g=this.k0*this.R2/(1+this.sinc0*b+this.cosc0*c*f),a.x=g*c*Math.sin(a.x),a.y=g*(this.cosc0*b-this.sinc0*c*f),a.x=this.a*a.x+this.x0,a.y=this.a*a.y+this.y0,a},c.inverse=function(a){var b,c,f,g,h;if(a.x=(a.x-this.x0)/this.a,a.y=(a.y-this.y0)/this.a,a.x/=this.k0,a.y/=this.k0,h=Math.sqrt(a.x*a.x+a.y*a.y)){var i=2*Math.atan2(h,this.R2);b=Math.sin(i),c=Math.cos(i),g=Math.asin(c*this.sinc0+a.y*b*this.cosc0/h),f=Math.atan2(a.x*b,h*this.cosc0*c-a.y*this.sinc0*b)}else g=this.phic0,f=0;return a.x=f,a.y=g,d.inverse.apply(this,[a]),a.x=e(a.x+this.long0),a},c.names=[\"Stereographic_North_Pole\",\"Oblique_Stereographic\",\"Polar_Stereographic\",\"sterea\",\"Oblique Stereographic Alternative\"]},{\"../common/adjust_lon\":5,\"./gauss\":46}],62:[function(a,b,c){var d=a(\"../common/e0fn\"),e=a(\"../common/e1fn\"),f=a(\"../common/e2fn\"),g=a(\"../common/e3fn\"),h=a(\"../common/mlfn\"),i=a(\"../common/adjust_lon\"),j=Math.PI/2,k=1e-10,l=a(\"../common/sign\"),m=a(\"../common/asinz\");c.init=function(){this.e0=d(this.es),this.e1=e(this.es),this.e2=f(this.es),this.e3=g(this.es),this.ml0=this.a*h(this.e0,this.e1,this.e2,this.e3,this.lat0)},c.forward=function(a){var b,c,d,e=a.x,f=a.y,g=i(e-this.long0),j=Math.sin(f),k=Math.cos(f);if(this.sphere){var l=k*Math.sin(g);if(Math.abs(Math.abs(l)-1)f\u0026\u0026(b=-b),d=this.a*this.k0*(b-this.lat0)}else{var m=k*g,n=Math.pow(m,2),o=this.ep2*Math.pow(k,2),p=Math.tan(f),q=Math.pow(p,2);b=1-this.es*Math.pow(j,2);var r=this.a/Math.sqrt(b),s=this.a*h(this.e0,this.e1,this.e2,this.e3,f);c=this.k0*r*m*(1+n/6*(1-q+o+n/20*(5-18*q+Math.pow(q,2)+72*o-58*this.ep2)))+this.x0,d=this.k0*(s-this.ml0+r*p*(n*(.5+n/24*(5-q+9*o+4*Math.pow(o,2)+n/30*(61-58*q+Math.pow(q,2)+600*o-330*this.ep2)))))+this.y0}return a.x=c,a.y=d,a},c.inverse=function(a){var b,c,d,e,f,g,h=6;if(this.sphere){var n=Math.exp(a.x/(this.a*this.k0)),o=.5*(n-1/n),p=this.lat0+a.y/(this.a*this.k0),q=Math.cos(p);b=Math.sqrt((1-q*q)/(1+o*o)),f=m(b),0p\u0026\u0026(f=-f),g=0===o\u0026\u00260===q?this.long0:i(Math.atan2(o,q)+this.long0)}else{var r=a.x-this.x0,s=a.y-this.y0;for(b=(this.ml0+s/this.k0)/this.a,c=b,e=0;!0\u0026\u0026(d=(b+this.e1*Math.sin(2*c)-this.e2*Math.sin(4*c)+this.e3*Math.sin(6*c))/this.e0-c,c+=d,!(Math.abs(d)=h)return 95;if(Math.abs(c)=0?this.y0+Math.PI*this.R*Math.tan(.5*k):this.y0+Math.PI*this.R*-Math.tan(.5*k));var l=.5*Math.abs(Math.PI/j-j/Math.PI),m=l*l,n=Math.sin(k),o=Math.cos(k),p=o/(n+o-1),q=p*p,r=p*(2/n-1),s=r*r,t=Math.PI*this.R*(l*(p-s)+Math.sqrt(m*(p-s)*(p-s)-(s+m)*(q-s)))/(s+m);0j\u0026\u0026(t=-t),b=this.x0+t;var u=m+p;return t=Math.PI*this.R*(r*u-l*Math.sqrt((s+m)*(m+1)-u*u))/(s+m),c=i=0?this.y0+t:this.y0-t,a.x=b,a.y=c,a},c.inverse=function(a){var b,c,e,g,h,i,j,k,l,m,n,o,p;return a.x-=this.x0,a.y-=this.y0,n=Math.PI*this.R,e=a.x/n,g=a.y/n,h=e*e+g*g,i=-Math.abs(g)*(1+h),j=i-2*g*g+e*e,k=-2*i+1+2*g*g+h*h,p=g*g/k+(2*j*j*j/k/k/k-9*i*j/k/k)/27,l=(i-j*j/3/k)/k,m=2*Math.sqrt(-l/3),n=3*p/l/m,Math.abs(n)1\u0026\u0026(n=n=0?1:-1),o=Math.acos(n)/3,c=a.y=0?(-m*Math.cos(o+Math.PI/3)-j/3/k)*Math.PI:-(-m*Math.cos(o+Math.PI/3)-j/3/k)*Math.PI,b=Math.abs(e)-1?(b[c]={name:a[0].toLowerCase(),convert:a[1]},3===a.length\u0026\u0026(b[c].auth=a[2])):\"SPHEROID\"===c?(b[c]={name:a[0],a:a[1],rf:a[2]},4===a.length\u0026\u0026(b[c].auth=a[3])):[\"GEOGCS\",\"GEOCCS\",\"DATUM\",\"VERT_CS\",\"COMPD_CS\",\"LOCAL_CS\",\"FITTED_CS\",\"LOCAL_DATUM\"].indexOf(c)-1?(a[0]=[\"name\",a[0]],d(b,c,a)):a.every(function(a){return Array.isArray(a)})?d(b,c,a):e(a,b[c])):b[c]=!0,void 0):void(b[a]=!0)}function f(a,b){var c=b[0],d=b[1];!(c in a)\u0026\u0026d in a\u0026\u0026(a[c]=a[d],3===b.length\u0026\u0026(a[c]=b[2](a[c])))}function g(a){return a*i}function h(a){function b(b){var c=a.to_meter||1;return parseFloat(b,10)*c}\"GEOGCS\"===a.type?a.projName=\"longlat\":\"LOCAL_CS\"===a.type?(a.projName=\"identity\",a.local=!0):\"object\"==typeof a.PROJECTION?a.projName=Object.keys(a.PROJECTION)[0]:a.projName=a.PROJECTION,a.UNIT\u0026\u0026(a.units=a.UNIT.name.toLowerCase(),\"metre\"===a.units\u0026\u0026(a.units=\"meter\"), a.UNIT.convert\u0026\u0026(\"GEOGCS\"===a.type?a.DATUM\u0026\u0026a.DATUM.SPHEROID\u0026\u0026(a.to_meter=parseFloat(a.UNIT.convert,10)*a.DATUM.SPHEROID.a):a.to_meter=parseFloat(a.UNIT.convert,10))),a.GEOGCS\u0026\u0026(a.GEOGCS.DATUM?a.datumCode=a.GEOGCS.DATUM.name.toLowerCase():a.datumCode=a.GEOGCS.name.toLowerCase(),\"d_\"===a.datumCode.slice(0,2)\u0026\u0026(a.datumCode=a.datumCode.slice(2)),(\"new_zealand_geodetic_datum_1949\"===a.datumCode||\"new_zealand_1949\"===a.datumCode)\u0026\u0026(a.datumCode=\"nzgd49\"),\"wgs_1984\"===a.datumCode\u0026\u0026(\"Mercator_Auxiliary_Sphere\"===a.PROJECTION\u0026\u0026(a.sphere=!0),a.datumCode=\"wgs84\"),\"_ferro\"===a.datumCode.slice(-6)\u0026\u0026(a.datumCode=a.datumCode.slice(0,-6)),\"_jakarta\"===a.datumCode.slice(-8)\u0026\u0026(a.datumCode=a.datumCode.slice(0,-8)),~a.datumCode.indexOf(\"belge\")\u0026\u0026(a.datumCode=\"rnb72\"),a.GEOGCS.DATUM\u0026\u0026a.GEOGCS.DATUM.SPHEROID\u0026\u0026(a.ellps=a.GEOGCS.DATUM.SPHEROID.name.replace(\"_19\",\"\").replace(/[Cc]larke\\_18/,\"clrk\"),\"international\"===a.ellps.toLowerCase().slice(0,13)\u0026\u0026(a.ellps=\"intl\"),a.a=a.GEOGCS.DATUM.SPHEROID.a,a.rf=parseFloat(a.GEOGCS.DATUM.SPHEROID.rf,10)),~a.datumCode.indexOf(\"osgb_1936\")\u0026\u0026(a.datumCode=\"osgb36\")),a.b\u0026\u0026!isFinite(a.b)\u0026\u0026(a.b=a.a);var c=function(b){return f(a,b)},d=[[\"standard_parallel_1\",\"Standard_Parallel_1\"],[\"standard_parallel_2\",\"Standard_Parallel_2\"],[\"false_easting\",\"False_Easting\"],[\"false_northing\",\"False_Northing\"],[\"central_meridian\",\"Central_Meridian\"],[\"latitude_of_origin\",\"Latitude_Of_Origin\"],[\"latitude_of_origin\",\"Central_Parallel\"],[\"scale_factor\",\"Scale_Factor\"],[\"k0\",\"scale_factor\"],[\"latitude_of_center\",\"Latitude_of_center\"],[\"lat0\",\"latitude_of_center\",g],[\"longitude_of_center\",\"Longitude_Of_Center\"],[\"longc\",\"longitude_of_center\",g],[\"x0\",\"false_easting\",b],[\"y0\",\"false_northing\",b],[\"long0\",\"central_meridian\",g],[\"lat0\",\"latitude_of_origin\",g],[\"lat0\",\"standard_parallel_1\",g],[\"lat1\",\"standard_parallel_1\",g],[\"lat2\",\"standard_parallel_2\",g],[\"alpha\",\"azimuth\",g],[\"srsCode\",\"name\"]];d.forEach(c),a.long0||!a.longc||\"Albers_Conic_Equal_Area\"!==a.projName\u0026\u0026\"Lambert_Azimuthal_Equal_Area\"!==a.projName||(a.long0=a.longc),a.lat_ts||!a.lat1||\"Stereographic_South_Pole\"!==a.projName\u0026\u0026\"Polar Stereographic (variant B)\"!==a.projName||(a.lat0=g(a.lat10?90:-90),a.lat_ts=a.lat1)}var i=.017453292519943295,j=a(\"./extend\");b.exports=function(a,b){var c=JSON.parse((\",\"+a).replace(/\\s*\\,\\s*([A-Z_0-9]+?)(\\[)/g,',[\"$1\",').slice(1).replace(/\\s*\\,\\s*([A-Z_0-9]+?)\\]/g,',\"$1\"]').replace(/,\\[\"VERTCS\".+/,\"\")),d=c.shift(),f=c.shift();c.unshift([\"name\",f]),c.unshift([\"type\",d]),c.unshift(\"output\");var g={};return e(c,g),h(g.output),j(b,g.output)}},{\"./extend\":34}],67:[function(a,b,c){function d(a){return a*(Math.PI/180)}function e(a){return 180*(a/Math.PI)}function f(a){var b,c,e,f,g,i,j,k,l,m=a.lat,n=a.lon,o=6378137,p=.00669438,q=.9996,r=d(m),s=d(n);l=Math.floor((n+180)/6)+1,180===n\u0026\u0026(l=60),m=56\u0026\u002664m\u0026\u0026n=3\u0026\u002612n\u0026\u0026(l=32),m=72\u0026\u002684m\u0026\u0026(n=0\u0026\u00269n?l=31:n=9\u0026\u002621n?l=33:n=21\u0026\u002633n?l=35:n=33\u0026\u002642n\u0026\u0026(l=37)),b=6*(l-1)-180+3,k=d(b),c=p/(1-p),e=o/Math.sqrt(1-p*Math.sin(r)*Math.sin(r)),f=Math.tan(r)*Math.tan(r),g=c*Math.cos(r)*Math.cos(r),i=Math.cos(r)*(s-k),j=o*((1-p/4-3*p*p/64-5*p*p*p/256)*r-(3*p/8+3*p*p/32+45*p*p*p/1024)*Math.sin(2*r)+(15*p*p/256+45*p*p*p/1024)*Math.sin(4*r)-35*p*p*p/3072*Math.sin(6*r));var t=q*e*(i+(1-f+g)*i*i*i/6+(5-18*f+f*f+72*g-58*c)*i*i*i*i*i/120)+5e5,u=q*(j+e*Math.tan(r)*(i*i/2+(5-f+9*g+4*g*g)*i*i*i*i/24+(61-58*f+f*f+600*g-330*c)*i*i*i*i*i*i/720));return 0m\u0026\u0026(u+=1e7),{northing:Math.round(u),easting:Math.round(t),zoneNumber:l,zoneLetter:h(m)}}function g(a){var b=a.northing,c=a.easting,d=a.zoneLetter,f=a.zoneNumber;if(0f||f60)return null;var h,i,j,k,l,m,n,o,p,q,r=.9996,s=6378137,t=.00669438,u=(1-Math.sqrt(1-t))/(1+Math.sqrt(1-t)),v=c-5e5,w=b;\"N\"d\u0026\u0026(w-=1e7),o=6*(f-1)-180+3,h=t/(1-t),n=w/r,p=n/(s*(1-t/4-3*t*t/64-5*t*t*t/256)),q=p+(3*u/2-27*u*u*u/32)*Math.sin(2*p)+(21*u*u/16-55*u*u*u*u/32)*Math.sin(4*p)+151*u*u*u/96*Math.sin(6*p),i=s/Math.sqrt(1-t*Math.sin(q)*Math.sin(q)),j=Math.tan(q)*Math.tan(q),k=h*Math.cos(q)*Math.cos(q),l=s*(1-t)/Math.pow(1-t*Math.sin(q)*Math.sin(q),1.5),m=v/(i*r);var x=q-i*Math.tan(q)/l*(m*m/2-(5+3*j+10*k-4*k*k-9*h)*m*m*m*m/24+(61+90*j+298*k+45*j*j-252*h-3*k*k)*m*m*m*m*m*m/720);x=e(x);var y=(m-(1+2*j+k)*m*m*m/6+(5-2*k+28*j-3*k*k+8*h+24*j*j)*m*m*m*m*m/120)/Math.cos(q);y=o+e(y);var z;if(a.accuracy){var A=g({northing:a.northing+a.accuracy,easting:a.easting+a.accuracy,zoneLetter:a.zoneLetter,zoneNumber:a.zoneNumber});z={top:A.lat,right:A.lon,bottom:x,left:y}}else z={lat:x,lon:y};return z}function h(a){var b=\"Z\";return 84=a\u0026\u0026a=72?b=\"X\":72a\u0026\u0026a=64?b=\"W\":64a\u0026\u0026a=56?b=\"V\":56a\u0026\u0026a=48?b=\"U\":48a\u0026\u0026a=40?b=\"T\":40a\u0026\u0026a=32?b=\"S\":32a\u0026\u0026a=24?b=\"R\":24a\u0026\u0026a=16?b=\"Q\":16a\u0026\u0026a=8?b=\"P\":8a\u0026\u0026a=0?b=\"N\":0a\u0026\u0026a=-8?b=\"M\":-8a\u0026\u0026a=-16?b=\"L\":-16a\u0026\u0026a=-24?b=\"K\":-24a\u0026\u0026a=-32?b=\"J\":-32a\u0026\u0026a=-40?b=\"H\":-40a\u0026\u0026a=-48?b=\"G\":-48a\u0026\u0026a=-56?b=\"F\":-56a\u0026\u0026a=-64?b=\"E\":-64a\u0026\u0026a=-72?b=\"D\":-72a\u0026\u0026a=-80\u0026\u0026(b=\"C\"),b}function i(a,b){var c=\"00000\"+a.easting,d=\"00000\"+a.northing;return a.zoneNumber+a.zoneLetter+j(a.easting,a.northing,a.zoneNumber)+c.substr(c.length-5,b)+d.substr(d.length-5,b)}function j(a,b,c){var d=k(c),e=Math.floor(a/1e5),f=Math.floor(b/1e5)%20;return l(e,f,d)}function k(a){var b=a%q;return 0===b\u0026\u0026(b=q),b}function l(a,b,c){var d=c-1,e=r.charCodeAt(d),f=s.charCodeAt(d),g=e+a-1,h=f+b,i=!1;gx\u0026\u0026(g=g-x+t-1,i=!0),(g===u||ue\u0026\u0026gu||(gu||ue)\u0026\u0026i)\u0026\u0026g++,(g===v||ve\u0026\u0026gv||(gv||ve)\u0026\u0026i)\u0026\u0026(g++,g===u\u0026\u0026g++),gx\u0026\u0026(g=g-x+t-1),hw?(h=h-w+t-1,i=!0):i=!1,(h===u||uf\u0026\u0026hu||(hu||uf)\u0026\u0026i)\u0026\u0026h++,(h===v||vf\u0026\u0026hv||(hv||vf)\u0026\u0026i)\u0026\u0026(h++,h===u\u0026\u0026h++),hw\u0026\u0026(h=h-w+t-1);var j=String.fromCharCode(g)+String.fromCharCode(h);return j}function m(a){if(a\u0026\u00260===a.length)throw\"MGRSPoint coverting from nothing\";for(var b,c=a.length,d=null,e=\"\",f=0;!/[A-Z]/.test(b=a.charAt(f));){if(f=2)throw\"MGRSPoint bad conversion from: \"+a;e+=b,f++}var g=parseInt(e,10);if(0===f||f+3c)throw\"MGRSPoint bad conversion from: \"+a;var h=a.charAt(f++);if(\"A\"=h||\"B\"===h||\"Y\"===h||h=\"Z\"||\"I\"===h||\"O\"===h)throw\"MGRSPoint zone letter \"+h+\" not handled: \"+a;d=a.substring(f,f+=2);for(var i=k(g),j=n(d.charAt(0),i),l=o(d.charAt(1),i);l0\u0026\u0026(q=1e5/Math.pow(10,v),r=a.substring(f,f+v),w=parseFloat(r)*q,s=a.substring(f+v),x=parseFloat(s)*q),t=w+j,u=x+l,{easting:t,northing:u,zoneLetter:h,zoneNumber:g,accuracy:q}}function n(a,b){for(var c=r.charCodeAt(b-1),d=1e5,e=!1;c!==a.charCodeAt(0);){if(c++,c===u\u0026\u0026c++,c===v\u0026\u0026c++,cx){if(e)throw\"Bad character: \"+a;c=t,e=!0}d+=1e5}return d}function o(a,b){if(a\"V\")throw\"MGRSPoint given invalid Northing \"+a;for(var c=s.charCodeAt(b-1),d=0,e=!1;c!==a.charCodeAt(0);){if(c++,c===u\u0026\u0026c++,c===v\u0026\u0026c++,cw){if(e)throw\"Bad character: \"+a;c=t,e=!0}d+=1e5}return d}function p(a){var b;switch(a){case\"C\":b=11e5;break;case\"D\":b=2e6;break;case\"E\":b=28e5;break;case\"F\":b=37e5;break;case\"G\":b=46e5;break;case\"H\":b=55e5;break;case\"J\":b=64e5;break;case\"K\":b=73e5;break;case\"L\":b=82e5;break;case\"M\":b=91e5;break;case\"N\":b=0;break;case\"P\":b=8e5;break;case\"Q\":b=17e5;break;case\"R\":b=26e5;break;case\"S\":b=35e5;break;case\"T\":b=44e5;break;case\"U\":b=53e5;break;case\"V\":b=62e5;break;case\"W\":b=7e6;break;case\"X\":b=79e5;break;default:b=-1}if(b=0)return b;throw\"Invalid zone letter: \"+a}var q=6,r=\"AJSAJS\",s=\"AFAFAF\",t=65,u=73,v=79,w=86,x=90;c.forward=function(a,b){return b=b||5,i(f({lat:a[1],lon:a[0]}),b)},c.inverse=function(a){var b=g(m(a.toUpperCase()));return b.lat\u0026\u0026b.lon?[b.lon,b.lat,b.lon,b.lat]:[b.left,b.bottom,b.right,b.top]},c.toPoint=function(a){var b=g(m(a.toUpperCase()));return b.lat\u0026\u0026b.lon?[b.lon,b.lat]:[(b.left+b.right)/2,(b.top+b.bottom)/2]}},{}],68:[function(a,b,c){b.exports={name:\"proj4\",version:\"2.3.14\",description:\"Proj4js is a JavaScript library to transform point coordinates from one coordinate system to another, including datum transformations.\",main:\"lib/index.js\",directories:{test:\"test\",doc:\"docs\"},scripts:{test:\"./node_modules/istanbul/lib/cli.js test ./node_modules/mocha/bin/_mocha test/test.js\"},repository:{type:\"git\",url:\"git://github.com/proj4js/proj4js.git\"},author:\"\",license:\"MIT\",jam:{main:\"dist/proj4.js\",include:[\"dist/proj4.js\",\"README.md\",\"AUTHORS\",\"LICENSE.md\"]},devDependencies:{\"grunt-cli\":\"~0.1.13\",grunt:\"~0.4.2\",\"grunt-contrib-connect\":\"~0.6.0\",\"grunt-contrib-jshint\":\"~0.8.0\",chai:\"~1.8.1\",mocha:\"~1.17.1\",\"grunt-mocha-phantomjs\":\"~0.4.0\",browserify:\"~12.0.1\",\"grunt-browserify\":\"~4.0.1\",\"grunt-contrib-uglify\":\"~0.11.1\",curl:\"git://github.com/cujojs/curl.git\",istanbul:\"~0.2.4\",tin:\"~0.4.0\"},dependencies:{mgrs:\"~0.0.2\"}}},{}],\"./includedProjections\":[function(a,b,c){b.exports=a(\"hTEDpn\")},{}],hTEDpn:[function(a,b,c){var d=[a(\"./lib/projections/tmerc\"),a(\"./lib/projections/utm\"),a(\"./lib/projections/sterea\"),a(\"./lib/projections/stere\"),a(\"./lib/projections/somerc\"),a(\"./lib/projections/omerc\"),a(\"./lib/projections/lcc\"),a(\"./lib/projections/krovak\"),a(\"./lib/projections/cass\"),a(\"./lib/projections/laea\"),a(\"./lib/projections/aea\"),a(\"./lib/projections/gnom\"),a(\"./lib/projections/cea\"),a(\"./lib/projections/eqc\"),a(\"./lib/projections/poly\"),a(\"./lib/projections/nzmg\"),a(\"./lib/projections/mill\"),a(\"./lib/projections/sinu\"),a(\"./lib/projections/moll\"),a(\"./lib/projections/eqdc\"),a(\"./lib/projections/vandg\"),a(\"./lib/projections/aeqd\")];b.exports=function(proj4){d.forEach(function(a){proj4.Proj.projections.add(a)})}},{\"./lib/projections/aea\":40,\"./lib/projections/aeqd\":41,\"./lib/projections/cass\":42,\"./lib/projections/cea\":43,\"./lib/projections/eqc\":44,\"./lib/projections/eqdc\":45,\"./lib/projections/gnom\":47,\"./lib/projections/krovak\":48,\"./lib/projections/laea\":49,\"./lib/projections/lcc\":50,\"./lib/projections/mill\":53,\"./lib/projections/moll\":54,\"./lib/projections/nzmg\":55,\"./lib/projections/omerc\":56,\"./lib/projections/poly\":57,\"./lib/projections/sinu\":58,\"./lib/projections/somerc\":59,\"./lib/projections/stere\":60,\"./lib/projections/sterea\":61,\"./lib/projections/tmerc\":62,\"./lib/projections/utm\":63,\"./lib/projections/vandg\":64}]},{},[36])(36)}); (function (factory) { var L, proj4; if (typeof define === 'function' \u0026\u0026 define.amd) { // AMD define(['leaflet', 'proj4'], factory); } else if (typeof module === 'object' \u0026\u0026 typeof module.exports === \"object\") { // Node/CommonJS L = require('leaflet'); proj4 = require('proj4'); module.exports = factory(L, proj4); } else { // Browser globals if (typeof window.L === 'undefined' || typeof window.proj4 === 'undefined') throw 'Leaflet and proj4 must be loaded first'; factory(window.L, window.proj4); } }(function (L, proj4) { if (proj4.__esModule \u0026\u0026 proj4.default) { // If proj4 was bundled as an ES6 module, unwrap it to get // to the actual main proj4 object. // See discussion in https://github.com/kartena/Proj4Leaflet/pull/147 proj4 = proj4.default; } L.Proj = {}; L.Proj._isProj4Obj = function(a) { return (typeof a.inverse !== 'undefined' \u0026\u0026 typeof a.forward !== 'undefined'); }; L.Proj.Projection = L.Class.extend({ initialize: function(code, def, bounds) { var isP4 = L.Proj._isProj4Obj(code); this._proj = isP4 ? code : this._projFromCodeDef(code, def); this.bounds = isP4 ? def : bounds; }, project: function (latlng) { var point = this._proj.forward([latlng.lng, latlng.lat]); return new L.Point(point[0], point[1]); }, unproject: function (point, unbounded) { var point2 = this._proj.inverse([point.x, point.y]); return new L.LatLng(point2[1], point2[0], unbounded); }, _projFromCodeDef: function(code, def) { if (def) { proj4.defs(code, def); } else if (proj4.defs[code] === undefined) { var urn = code.split(':'); if (urn.length  3) { code = urn[urn.length - 3] + ':' + urn[urn.length - 1]; } if (proj4.defs[code] === undefined) { throw 'No projection definition for code ' + code; } } return proj4(code); } }); L.Proj.CRS = L.Class.extend({ includes: L.CRS, options: { transformation: new L.Transformation(1, 0, -1, 0) }, initialize: function(a, b, c) { var code, proj, def, options; if (L.Proj._isProj4Obj(a)) { proj = a; code = proj.srsCode; options = b || {}; this.projection = new L.Proj.Projection(proj, options.bounds); } else { code = a; def = b; options = c || {}; this.projection = new L.Proj.Projection(code, def, options.bounds); } L.Util.setOptions(this, options); this.code = code; this.transformation = this.options.transformation; if (this.options.origin) { this.transformation = new L.Transformation(1, -this.options.origin[0], -1, this.options.origin[1]); } if (this.options.scales) { this._scales = this.options.scales; } else if (this.options.resolutions) { this._scales = []; for (var i = this.options.resolutions.length - 1; i = 0; i--) { if (this.options.resolutions[i]) { this._scales[i] = 1 / this.options.resolutions[i]; } } } this.infinite = !this.options.bounds; }, scale: function(zoom) { var iZoom = Math.floor(zoom), baseScale, nextScale, scaleDiff, zDiff; if (zoom === iZoom) { return this._scales[zoom]; } else { // Non-integer zoom, interpolate baseScale = this._scales[iZoom]; nextScale = this._scales[iZoom + 1]; scaleDiff = nextScale - baseScale; zDiff = (zoom - iZoom); return baseScale + scaleDiff * zDiff; } }, zoom: function(scale) { // Find closest number in this._scales, down var downScale = this._closestElement(this._scales, scale), downZoom = this._scales.indexOf(downScale), nextScale, nextZoom, scaleDiff; // Check if scale is downScale = return array index if (scale === downScale) { return downZoom; } if (downScale === undefined) { return -Infinity; } // Interpolate nextZoom = downZoom + 1; nextScale = this._scales[nextZoom]; if (nextScale === undefined) { return Infinity; } scaleDiff = nextScale - downScale; return (scale - downScale) / scaleDiff + downZoom; }, distance: L.CRS.Earth.distance, R: L.CRS.Earth.R, /* Get the closest lowest element in an array */ _closestElement: function(array, element) { var low; for (var i = array.length; i--;) { if (array[i] .leaflet-tooltip.leaflet-tooltip-text-only, .leaflet-tooltip.leaflet-tooltip-text-only:before, .leaflet-tooltip.leaflet-tooltip-text-only:after { background: none; border: none; box-shadow: none; } .leaflet-tooltip.leaflet-tooltip-text-only.leaflet-tooltip-left { margin-left: 5px; } .leaflet-tooltip.leaflet-tooltip-text-only.leaflet-tooltip-right { margin-left: -5px; } .leaflet-tooltip:after { border-right: 6px solid transparent; } .leaflet-popup-pane .leaflet-popup-tip-container { pointer-events: all; cursor: pointer; } .leaflet-map-pane { z-index: auto; }  (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"\u0026\u0026require;if(!u\u0026\u0026a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"\u0026\u0026require;for(var o=0;othis.effectiveLength) throw new Error(\"Row argument was out of bounds: \" + row + \"  \" + this.effectiveLength); var colIndex = -1; if (typeof col === \"undefined\") { var _ret = function () { var rowData = {}; _this3.colnames.forEach(function (name, i) { rowData[name] = _this3.columns[i][row % _this3.columns[i].length]; }); return { v: rowData }; }(); if ((typeof _ret === \"undefined\" ? \"undefined\" : _typeof(_ret)) === \"object\") return _ret.v; } else if (typeof col === \"string\") { colIndex = this._colIndex(col); } else if (typeof col === \"number\") { colIndex = col; } if (colIndex this.columns.length) { if (missingOK) return void 0;else throw new Error(\"Unknown column index: \" + col); } return this.columns[colIndex][row % this.columns[colIndex].length]; } }, { key: \"nrow\", value: function nrow() { return this.effectiveLength; } }]); return DataFrame; }(); exports.default = DataFrame; },{\"./util\":17}],5:[function(require,module,exports){ \"use strict\"; var _leaflet = require(\"./global/leaflet\"); var _leaflet2 = _interopRequireDefault(_leaflet); function _interopRequireDefault(obj) { return obj \u0026\u0026 obj.__esModule ? obj : { default: obj }; } // In RMarkdown's self-contained mode, we don't have a way to carry around the // images that Leaflet needs but doesn't load into the page. Instead, we'll set // data URIs for the default marker, and let any others be loaded via CDN. if (typeof _leaflet2.default.Icon.Default.imagePath === \"undefined\") { // if in a local file, support http switch (window.location.protocol) { case \"http:\": // don't force http site to be done with https _leaflet2.default.Icon.Default.imagePath = \"http://cdn.leafletjs.com/leaflet/v1.3.1/images/\"; break; default: // file // https // otherwise use https as it works on files and https _leaflet2.default.Icon.Default.imagePath = \"https://unpkg.com/leaflet@1.3.1/dist/images/\"; break; } // don't know how to make this dataURI work since // will be appended to Defaul.imagePath above /* if (L.Browser.retina) { L.Icon.Default.prototype.options.iconUrl = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABSCAYAAAAWy4frAAAPiElEQVR42t1bCVCU5xkmbabtZJJOO+l0mhgT0yQe0WXZgz2570NB8I6J6UzaTBoORRFEruVGDhWUPRAQRFFREDnVxCtEBRb24DBNE3Waaatpkmluo4m+fd9v999olGVBDu3OPLj+//s+7/W93/f9//6/EwA4/T9g3AlFOUeeUGR2uMqzOyJk2R2x0qyOAmnmkS3SrCPrZJlHlsqzjypcs49OX1Jf//P7KhD885A0u10my2ovQscvybI6wEF8ivI7pFntAV6qkw9PWSBK1bEnZRltm2WZ7R8h4FbI0VG33GPgXXgCAra+A4EIn8KT4JH/FigoiJ/IIz6TZbVVKLLan5u0QESqlkckWW3p0sy2bxDAgZwO13TDytoB+NPe9+zild2DEFGuB7/NpzDodriF55o0o7XIRXXoNxMaiCSj9VU09C8EENxyj0C4thterh2EV+veuwOr6s7Dy3ssoO93k3llzxBE6PTgkXcMOF7EJ9KMtqjR9JFDQnNV9b+QqlqqEECQZ7TBgu1nYdXuIXgVneSwYtcgRFb1Q1iFGULLzRCsM90GOrZghxkiKvthec0grLpFlxCu6cKh1w6cHUSbctPhx8YlEElu4+NSVfNpBBACtpyGlbsGmBOElRhMBDofgk4GobOjQXC5CRZiUC/VDtn4qLrBJZ3A2cNg+nE4P31PgSDBbImq5UNJejMQFqi7cCicZ3iZBTAAQVoTBI4DKKCVGBDHH6nrBRlWxWr7sljVIhlTIDLVoRkS1eH/SNIPgzyzFRZV9NnG++LqQcyoGQLQgfFEIFYpcueAzc6SSiMOtTYgH9CXr+WpTbxRBeKlqn9UktZkRoACZ5PlO81YgfMM4RX9EKAxTSjCdvTjELPYW17dD8rsdiBfEBclSY2POxQIHnlIknroEAJk6U2wpMLISF/aNQShWAV/tWlSEIK2VqBNsr200gRyGmLokyS18cTdFtA7AnFNbcxAACGMrQtDLAjqBT+1cVJBNsk2+bBQ1wOcX5K0xs12A8GyzXRNafgeAYFb3mEkrBI4I/mWGUeNQI1lyp2PoO9j4aDKcH4Ebe0E8g3xgyylcc6wgbimNjSSoFtWK1sTqLRh2BM+SOgIfDGLJL8IG3ZZjUX/ViyvGYLFOwdZn/ljYI7yzsee4TjcsV/IR3FqQ+tdAxEnNSjFyQeBEK7pgRVodEnVIPhsNzqEYK0ZluFsRnq3YjH22KJyA6z4yTmSpZ5zlH8RTvWkt1CrB85PYUqjzx2BuG6sPyfeeAA8sjtwphhiCFSbwXub0S7ISPiOAZvO4h048xSfBM+cDpDieCZOggSz6JHdBv5FJ3CN6LPJR1QMgO9204h2aALgdDxzjlp4kw8YaHKyBSJJPigWb6wHQiRmbxkKL0QDXkhgD94YxGKsGskTQkvfxVnlIHBcBNfkegziwB3HAnHDuGynRXcp/utXZhrRHiWM5CPLjbdwHVDYAhFt3J8rTtoPbpktSDrE4INZ8iw12kUYEpPs4kozeOW0A3EQIovbYcfxITj798vwxbfX4Or1H8B46ROo7fwbvKY9bpNzy2hmiSOOyMrBEe2RT5x/7tjHxCFK2l/4YyBJ+95HQABmibKzEJvRs9RgF4FqE5MleGS3AumLN+6D4lYjfIeOD/e5eROg7sz7oEg7wHRk6Y3Yi/2MJwT7bCS75BvJBuGsSvqID1ggaHyeaAMeQERgyajBg3BG8SgxDAsvJFxUOcBkg7d0Ml3XjfuhCyvg6Ofix1+Al6qB6fpueotxsckFh5A92+QbydHw4vymGJxEG+rWiRL3goJWcSwvwbPECO5bDcMiRGNmchS4a1I9kP62DhOM9tPad4npEhaUdTPOsPJ+u7bJN85PpaqJ6YoT6xKcRIl1pQjwxIukxXhyIY57N1Swh7DyASbrm38MSHdRUStc+/4GjOUTV32acbhlNjNO6pWR7FPTk6xX3lGmK0ys0zrhn0Zhwh7wK3ibnVyg6we3LQa7WFQxyGSpiqRbe/o8jPXTe+EK4xDjECHOxdYRYc8++UhyfgXHma5w/Z5mJ+H63T3ChN3Y6O/guMcxj8NGicLDgYyQ3CKcnsUbMBuoa7j48ZgD+erqdczqbsYTpulj3LSu2POBfCQ58pn0EH1OwoTafwvX1+JV2VmIxEwHlJlBsdkwLHy2mZjcgjI9kJ4Ynbh6/Xu4l09YfhPjCsSJg7hpIbbng/92M5Mjn0kPcdlJGF/7JQJCSrsgAseeHzoqL+4bFnSe5EJKzgHpeaTsg3v9rCrtYFz+hScZdzAGYs8HX84H9Jn0KAYnQfyuIQT4Y5mo0akiMhQeDh44tEguXGcE0iP845MvxxzEjRs3QZ5Ux3hCtnUxbqq6PR/8cRdAcuSz1YfzGEhNm2BdDfjkvw0LcTYKokCK+oaFAolIjiDFBYl02/oujDmQC1c+ZxzC+BoIp2t35HXHPrDnA/lIcuQz6SKOOAnWVqsRbHscjidDNf0gRWF7CNX2M1l3VTOQbmpd55gDqT01xDhkmBTiJMhGsB+isdrPbGe6wrU15RjIzkQEyHB3GqYbYCAiSeHwCMBmI7mAYiwt6grX7QT9h5dHHcQ/P/sKlEm7GYd37lHGGaLut2tbirD5iT6TriCuKsVJsLrCwyWuih2Yj/unMC2VFlfsgr5hodxsZHIEZVoTkP787APw7TXHZy/ac/25rJ3pSpP24tRrZnyeW012bbtZbS9AefKZ+b6mMtjJS6V6GP/zOR3wK+pkQn7bzHbJCCRDsqFlBpz+djHCV7a2wMUr/x0xiM++ugprq45bnFhbhdNoF+MKLOt32C75SvqIb7xUO3/Fdr/8uMqDLmsqwU3VipH2QzA2k3hTr11ICnqZHMn7F+HCFIfZQQ5JfDVUvW1mzv708/V316FV/wF4Je9hsgSv3GOMYz71Jg6bkezS0CN5N1WLhSOussW2jResrnzNZXUFm5PnW0nl2CciVLQHebHBJh9U0g1S3GYQD4eQjH2QWH0C0utw15DXAEIybD0nxoUsYPMZmz4N59HYE+K0SzyC2Mo3bIHw4zTT+Kt33ESAX/FZCMWovUtMIMzvHRFKJA9G+VAGvJ7IPsKGC3HdDYI4qnwzhJQZmQ5l2AODcMSWb6mJ6fgWn+H4bsxbWzX9tmt2l9Xl7fzYcpwJGhl5MI5XESoL8kaGKB9XWww8xOoYIXBrD3hvOgnK9BbEYdypHsctSBcGYLbJ+FMvbupz2AanJ01uAPLVJab88B03H1xidKH8WB0TCCq1KNEM4YgRDm7FRlys+m8L6G6gJLmPkpuqxhJU0st8JF8FMeV+dwTipFL9zDlGewmB1wYdzJh/qRlccntHDcqevBCv6NBZ3xIz+CGP5xYTKIoMIMZzo+UTIAK3WRKgULUB+egcrTs/7A06XpQ20Tlai+O4mm0DKLuSAgPwkWgqIcOkkC+BOBRdVlcC+ciL0kUNG4jodd3vnKM13yHAK/8UBG6nTBrBOUc/pfDBRZJ88cg9DuQbL1rzxdw3yx61exPbOUazi4Rd8VqYMhBIwyunF5yz9VMCUV6vxQ+ECJcH8s05SlMy4t145xi1jAkjfIu7GIESxzYPSacC1Gfkg3fhGbD6ddMlVvuCQz/0oHAfKclSmiAAK0JN75zdC/Oy9JMKanKyTxBvOGAJJEbd4fAvVrxo9UukxMfZwbu4hwWiKDLCXCSfTNAUTba9Cs5x1SD4OBwIm4qjNQOkKE1uBH+aQkssVZmbqZ8UCLAvyS5BnLDf2hvaE6P+MZQfpYngsuBd2A1+W7EqBUZ4MUM/KXAvMjGbHvm23gCXaI1yTD9Po7KezWBJB8EXp0ACD0s+J6NnQkGzJGdPlFDHBdI+5t/Z+dGaQC4bHpvOgg+uznJcIGereiYUykIjs+WW22mrBi9WLbqnJx9wlugkIlHifvBGcgLNKLPQ4ESA+pCzI4jfwy2Ajff8CAduWzy4rLjnnWEGqFdmpfdMCKgaZEOZc5qrxg3nWM28cXmohhetPcqqsn4veG02MczDmWVmWs+4wjmr18YvWFfLBVI3bk8HubxZ5spVRZHTyQzJsSovoPHxhAKrQdyKrFNcED/wo8pnjuvzWrgHayJyIY5bz2ITw1ycJp9P7R4X8LDCHK/L2l0sEH60tmrcHzzjRet4tM9hVck+xQzKNxnGLRDqO+KUZZ7gqnHdZY1mxoQ8QUfjlYwI1taCBy5YBKrKcynd9wTqNwufEfhrqq17Ko16wh4FpPFK45ZtKDNOgnshZjDfAH9M7r4nyPONjEua/hZXjav8NzTTJvThTF6UppJtF+JqwA2NE15U6eFZdGgsmJvRyziUeBXIX7PT2huazRP+lKkgavszeM18jW0oVcfBrYCqYoRnN3aPGlw1iMM17ai1Gtqvnd/Q/H5SnvvF7f12ljkcz0psUmWBpSoz0LnRgKpBugq6L8CuxSkQde6kPcAsWqN7Ao1+yzaUacdAsckI0jwDPJPU5TBmbOxi/UW64pQOrjc+5/1V/dtJfRIbrw0KWFVWV+Hw6GNDZE6aHp7e0OUQ5qTrmY48rw/4sRWW3ojSpk36I+Wzo7Y/7hyl+ZJtXVI7WJ+45hrgacz29A32QTISrCDpiJLbuWp8Oiuh8jGYiof8eTHqDEtVKkCGmZVZqzI9scsuSIZkZXTfKnYHt8NNmLK3FaQxpb9GJz5jVcHMclWhrD+VeHfQsJLkWqohTGrlqnFZ9LrukSl97YIXpU5kVcHMSvDKTppnhNmY8WkJXXcFnSMZSY6e3cO1ruKxU/7+CGUSnbnCti4bWjHbOAvlGOApdPrJ9beDjtE5khFsaOaq8dHzMaW/vC/e6KGMWm4flYMku4cNnVmpPej8udtA1aBzrll47RGjs/aG+vX75tUkyihl1lKVZnDFrIuy+2AaOv9EvAX0nY7ROZeEJq4aF+g3zPvqHStejOYvlvGuA1FmNxtCM1P18AcMgjALv9MxYWaX9WcBktWuuu9eFqPM4mbvAzbEEg5h9tHpLIOtP+g7HeMnNHLVeG/JkvF7YWxc33jDqqy0ZhoEKovzM1P0DPSdjtFvG5ZVXLP0vn19z3KrVTvIHF3fYHHeCvruHN/AbdNN3PO69+17iLgzjrRux8El/SwIMg0M9P3HG9HqsPv+hUrrJXEvczj+AAbRx+AcX88F0v1AvBnKAnlTG8Rln5/6LuLHW5/zorT+D0wg1qq8y5xfu88CSyCnH5h3dW/ZGXve8uOMZRWP0no8cIFY7+YfswURrT36QL09ffsMppHYegW/P7CBWHvlMOGBe5/9jtdjY7R8wkTb+R9meZA6n2oJWAAAAABJRU5ErkJggg==\"; } else { L.Icon.Default.prototype.options.iconUrl = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAGmklEQVRYw7VXeUyTZxjvNnfELFuyIzOabermMZEeQC/OclkO49CpOHXOLJl/CAURuYbQi3KLgEhbrhZ1aDwmaoGqKII6odATmH/scDFbdC7LvFqOCc+e95s2VG50X/LLm/f4/Z7neY/ne18aANCmAr5E/xZf1uDOkTcGcWR6hl9247tT5U7Y6SNvWsKT63P58qbfeLJG8M5qcgTknrvvrdDbsT7Ml+tv82X6vVxJE33aRmgSyYtcWVMqX97Yv2JvW39UhRE2HuyBL+t+gK1116ly06EeWFNlAmHxlQE0OMiV6mQCScusKRlhS3QLeVJdl1+23h5dY4FNB3thrbYboqptEFlphTC1hSpJnbRvxP4NWgsE5Jyz86QNNi/5qSUTGuFk1gu54tN9wuK2wc3o+Wc13RCmsoBwEqzGcZsxsvCSy/9wJKf7UWf1mEY8JWfewc67UUoDbDjQC+FqK4QqLVMGGR9d2wurKzqBk3nqIT/9zLxRRjgZ9bqQgub+DdoeCC03Q8j+0QhFhBHR/eP3U/zCln7Uu+hihJ1+bBNffLIvmkyP0gpBZWYXhKussK6mBz5HT6M1Nqpcp+mBCPXosYQfrekGvrjewd59/GvKCE7TbK/04/ZV5QZYVWmDwH1mF3xa2Q3ra3DBC5vBT1oP7PTj4C0+CcL8c7C2CtejqhuCnuIQHaKHzvcRfZpnylFfXsYJx3pNLwhKzRAwAhEqG0SpusBHfAKkxw3w4627MPhoCH798z7s0ZnBJ/MEJbZSbXPhER2ih7p2ok/zSj2cEJDd4CAe+5WYnBCgR2uruyEw6zRoW6/DWJ/OeAP8pd/BGtzOZKpG8oke0SX6GMmRk6GFlyAc59K32OTEinILRJRchah8HQwND8N435Z9Z0FY1EqtxUg+0SO6RJ/mmXz4VuS+DpxXC3gXmZwIL7dBSH4zKE50wESf8qwVgrP1EIlTO5JP9Igu0aexdh28F1lmAEGJGfh7jE6ElyM5Rw/FDcYJjWhbeiBYoYNIpc2FT/SILivp0F1ipDWk4BIEo2VuodEJUifhbiltnNBIXPUFCMpthtAyqws/BPlEF/VbaIxErdxPphsU7rcCp8DohC+GvBIPJS/tW2jtvTmmAeuNO8BNOYQeG8G/2OzCJ3q+soYB5i6NhMaKr17FSal7GIHheuV3uSCY8qYVuEm1cOzqdWr7ku/R0BDoTT+DT+ohCM6/CCvKLKO4RI+dXPeAuaMqksaKrZ7L3FE5FIFbkIceeOZ2OcHO6wIhTkNo0ffgjRGxEqogXHYUPHfWAC/lADpwGcLRY3aeK4/oRGCKYcZXPVoeX/kelVYY8dUGf8V5EBRbgJXT5QIPhP9ePJi428JKOiEYhYXFBqou2Guh+p/mEB1/RfMw6rY7cxcjTrneI1FrDyuzUSRm9miwEJx8E/gUmqlyvHGkneiwErR21F3tNOK5Tf0yXaT+O7DgCvALTUBXdM4YhC/IawPU+2PduqMvuaR6eoxSwUk75ggqsYJ7VicsnwGIkZBSXKOUww73WGXyqP+J2/b9c+gi1YAg/xpwck3gJuucNrh5JvDPvQr0WFXf0piyt8f8/WI0hV4pRxxkQZdJDfDJNOAmM0Ag8jyT6hz0WGXWuP94Yh2jcfjmXAGvHCMslRimDHYuHuDsy2QtHuIavznhbYURq5R57KpzBBRZKPJi8eQg48h4j8SDdowifdIrEVdU+gbO6QNvRRt4ZBthUaZhUnjlYObNagV3keoeru3rU7rcuceqU1mJBxy+BWZYlNEBH+0eH4vRiB+OYybU2hnblYlTvkHinM4m54YnxSyaZYSF6R3jwgP7udKLGIX6r/lbNa9N6y5MFynjWDtrHd75ZvTYAPO/6RgF0k76mQla3FGq7dO+cH8sKn0Vo7nDllwAhqwLPkxrHwWmHJOo+AKJ4rab5OgrM7rVu8eWb2Pu0Dh4eDgXoOfvp7Y7QeqknRmvcTBEyq9m/HQQSCSz6LHq3z0yzsNySRfMS253wl2KyRDbcZPcfJKjZmSEOjcxyi+Y8dUOtsIEH6R2wNykdqrkYJ0RV92H0W58pkfQk7cKevsLK10Py8SdMGfXNXATY+pPbyJR/ET6n9nIfztNtZYRV9XniQu9IA2vOVgy4ir7GCLVmmd+zjkH0eAF9Po6K61pmCXHxU5rHMYd1ftc3owjwRSVRzLjKvqZEty6cRUD7jGqiOdu5HG6MdHjNcNYGqfDm5YRzLBBCCDl/2bk8a8gdbqcfwECu62Fg/HrggAAAABJRU5ErkJggg==\"; } */ } },{\"./global/leaflet\":10}],6:[function(require,module,exports){ \"use strict\"; var _leaflet = require(\"./global/leaflet\"); var _leaflet2 = _interopRequireDefault(_leaflet); function _interopRequireDefault(obj) { return obj \u0026\u0026 obj.__esModule ? obj : { default: obj }; } // add texxtsize, textOnly, and style _leaflet2.default.Tooltip.prototype.options.textsize = \"10px\"; _leaflet2.default.Tooltip.prototype.options.textOnly = false; _leaflet2.default.Tooltip.prototype.options.style = null; // copy original layout to not completely stomp it. var initLayoutOriginal = _leaflet2.default.Tooltip.prototype._initLayout; _leaflet2.default.Tooltip.prototype._initLayout = function () { initLayoutOriginal.call(this); this._container.style.fontSize = this.options.textsize; if (this.options.textOnly) { _leaflet2.default.DomUtil.addClass(this._container, \"leaflet-tooltip-text-only\"); } if (this.options.style) { for (var property in this.options.style) { this._container.style[property] = this.options.style[property]; } } }; },{\"./global/leaflet\":10}],7:[function(require,module,exports){ \"use strict\"; var _leaflet = require(\"./global/leaflet\"); var _leaflet2 = _interopRequireDefault(_leaflet); function _interopRequireDefault(obj) { return obj \u0026\u0026 obj.__esModule ? obj : { default: obj }; } var protocolRegex = /^\\/\\//; var upgrade_protocol = function upgrade_protocol(urlTemplate) { if (protocolRegex.test(urlTemplate)) { if (window.location.protocol === \"file:\") { // if in a local file, support http // http should auto upgrade if necessary urlTemplate = \"http:\" + urlTemplate; } } return urlTemplate; }; var originalLTileLayerInitialize = _leaflet2.default.TileLayer.prototype.initialize; _leaflet2.default.TileLayer.prototype.initialize = function (urlTemplate, options) { urlTemplate = upgrade_protocol(urlTemplate); originalLTileLayerInitialize.call(this, urlTemplate, options); }; var originalLTileLayerWMSInitialize = _leaflet2.default.TileLayer.WMS.prototype.initialize; _leaflet2.default.TileLayer.WMS.prototype.initialize = function (urlTemplate, options) { urlTemplate = upgrade_protocol(urlTemplate); originalLTileLayerWMSInitialize.call(this, urlTemplate, options); }; },{\"./global/leaflet\":10}],8:[function(require,module,exports){ (function (global){ \"use strict\"; Object.defineProperty(exports, \"__esModule\", { value: true }); exports.default = global.HTMLWidgets; }).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {}) },{}],9:[function(require,module,exports){ (function (global){ \"use strict\"; Object.defineProperty(exports, \"__esModule\", { value: true }); exports.default = global.jQuery; }).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {}) },{}],10:[function(require,module,exports){ (function (global){ \"use strict\"; Object.defineProperty(exports, \"__esModule\", { value: true }); exports.default = global.L; }).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {}) },{}],11:[function(require,module,exports){ (function (global){ \"use strict\"; Object.defineProperty(exports, \"__esModule\", { value: true }); exports.default = global.L.Proj; }).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {}) },{}],12:[function(require,module,exports){ (function (global){ \"use strict\"; Object.defineProperty(exports, \"__esModule\", { value: true }); exports.default = global.Shiny; }).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {}) },{}],13:[function(require,module,exports){ \"use strict\"; var _jquery = require(\"./global/jquery\"); var _jquery2 = _interopRequireDefault(_jquery); var _leaflet = require(\"./global/leaflet\"); var _leaflet2 = _interopRequireDefault(_leaflet); var _shiny = require(\"./global/shiny\"); var _shiny2 = _interopRequireDefault(_shiny); var _htmlwidgets = require(\"./global/htmlwidgets\"); var _htmlwidgets2 = _interopRequireDefault(_htmlwidgets); var _util = require(\"./util\"); var _crs_utils = require(\"./crs_utils\"); var _controlStore = require(\"./control-store\"); var _controlStore2 = _interopRequireDefault(_controlStore); var _layerManager = require(\"./layer-manager\"); var _layerManager2 = _interopRequireDefault(_layerManager); var _methods = require(\"./methods\"); var _methods2 = _interopRequireDefault(_methods); require(\"./fixup-default-icon\"); require(\"./fixup-default-tooltip\"); require(\"./fixup-url-protocol\"); var _dataframe = require(\"./dataframe\"); var _dataframe2 = _interopRequireDefault(_dataframe); var _clusterLayerStore = require(\"./cluster-layer-store\"); var _clusterLayerStore2 = _interopRequireDefault(_clusterLayerStore); function _interopRequireDefault(obj) { return obj \u0026\u0026 obj.__esModule ? obj : { default: obj }; } window.LeafletWidget = {}; window.LeafletWidget.utils = {}; var methods = window.LeafletWidget.methods = _jquery2.default.extend({}, _methods2.default); window.LeafletWidget.DataFrame = _dataframe2.default; window.LeafletWidget.ClusterLayerStore = _clusterLayerStore2.default; window.LeafletWidget.utils.getCRS = _crs_utils.getCRS; // Send updated bounds back to app. Takes a leaflet event object as input. function updateBounds(map) { var id = map.getContainer().id; var bounds = map.getBounds(); _shiny2.default.onInputChange(id + \"_bounds\", { north: bounds.getNorthEast().lat, east: bounds.getNorthEast().lng, south: bounds.getSouthWest().lat, west: bounds.getSouthWest().lng }); _shiny2.default.onInputChange(id + \"_center\", { lng: map.getCenter().lng, lat: map.getCenter().lat }); _shiny2.default.onInputChange(id + \"_zoom\", map.getZoom()); } function preventUnintendedZoomOnScroll(map) { // Prevent unwanted scroll capturing. Similar in purpose to // https://github.com/CliffCloud/Leaflet.Sleep but with a // different set of heuristics. // The basic idea is that when a mousewheel/DOMMouseScroll // event is seen, we disable scroll wheel zooming until the // user moves their mouse cursor or clicks on the map. This // is slightly trickier than just listening for mousemove, // because mousemove is fired when the page is scrolled, // even if the user did not physically move the mouse. We // handle this by examining the mousemove event's screenX // and screenY properties; if they change, we know it's a // \"true\" move. // lastScreen can never be null, but its x and y can. var lastScreen = { x: null, y: null }; (0, _jquery2.default)(document).on(\"mousewheel DOMMouseScroll\", \"*\", function (e) { // Disable zooming (until the mouse moves or click) map.scrollWheelZoom.disable(); // Any mousemove events at this screen position will be ignored. lastScreen = { x: e.originalEvent.screenX, y: e.originalEvent.screenY }; }); (0, _jquery2.default)(document).on(\"mousemove\", \"*\", function (e) { // Did the mouse really move? if (lastScreen.x !== null \u0026\u0026 e.screenX !== lastScreen.x || e.screenY !== lastScreen.y) { // It really moved. Enable zooming. map.scrollWheelZoom.enable(); lastScreen = { x: null, y: null }; } }); (0, _jquery2.default)(document).on(\"mousedown\", \".leaflet\", function (e) { // Clicking always enables zooming. map.scrollWheelZoom.enable(); lastScreen = { x: null, y: null }; }); } _htmlwidgets2.default.widget({ name: \"leaflet\", type: \"output\", factory: function factory(el, width, height) { var map = null; return { // we need to store our map in our returned object. getMap: function getMap() { return map; }, renderValue: function renderValue(data) { // Create an appropriate CRS Object if specified if (data \u0026\u0026 data.options \u0026\u0026 data.options.crs) { data.options.crs = (0, _crs_utils.getCRS)(data.options.crs); } // As per https://github.com/rstudio/leaflet/pull/294#discussion_r79584810 if (map) { map.remove(); map = function () { return; }(); // undefine map } if (data.options.mapFactory \u0026\u0026 typeof data.options.mapFactory === \"function\") { map = data.options.mapFactory(el, data.options); } else { map = _leaflet2.default.map(el, data.options); } preventUnintendedZoomOnScroll(map); // Store some state in the map object map.leafletr = { // Has the map ever rendered successfully? hasRendered: false, // Data to be rendered when resize is called with area != 0 pendingRenderData: null }; // Check if the map is rendered statically (no output binding) if (_htmlwidgets2.default.shinyMode \u0026\u0026 /\\bshiny-bound-output\\b/.test(el.className)) { (function () { map.id = el.id; // Store the map on the element so we can find it later by ID (0, _jquery2.default)(el).data(\"leaflet-map\", map); // When the map is clicked, send the coordinates back to the app map.on(\"click\", function (e) { _shiny2.default.onInputChange(map.id + \"_click\", { lat: e.latlng.lat, lng: e.latlng.lng, \".nonce\": Math.random() // Force reactivity if lat/lng hasn't changed }); }); var groupTimerId = null; map.on(\"moveend\", function (e) { updateBounds(e.target); }).on(\"layeradd layerremove\", function (e) { // If the layer that's coming or going is a group we created, tell // the server. if (map.layerManager.getGroupNameFromLayerGroup(e.layer)) { // But to avoid chattiness, coalesce events if (groupTimerId) { clearTimeout(groupTimerId); groupTimerId = null; } groupTimerId = setTimeout(function () { groupTimerId = null; _shiny2.default.onInputChange(map.id + \"_groups\", map.layerManager.getVisibleGroups()); }, 100); } }); })(); } this.doRenderValue(data, map); }, doRenderValue: function doRenderValue(data, map) { // Leaflet does not behave well when you set up a bunch of layers when // the map is not visible (width/height == 0). Popups get misaligned // relative to their owning markers, and the fitBounds calculations // are off. Therefore we wait until the map is actually showing to // render the value (we rely on the resize() callback being invoked // at the appropriate time). // // There may be an issue with leafletProxy() calls being made while // the map is not being viewed--not sure what the right solution is // there. if (el.offsetWidth === 0 || el.offsetHeight === 0) { map.leafletr.pendingRenderData = data; return; } map.leafletr.pendingRenderData = null; // Merge data options into defaults var options = _jquery2.default.extend({ zoomToLimits: \"always\" }, data.options); if (!map.layerManager) { map.controls = new _controlStore2.default(map); map.layerManager = new _layerManager2.default(map); } else { map.controls.clear(); map.layerManager.clear(); } var explicitView = false; if (data.setView) { explicitView = true; map.setView.apply(map, data.setView); } if (data.fitBounds) { explicitView = true; methods.fitBounds.apply(map, data.fitBounds); } if (data.flyTo) { if (!explicitView \u0026\u0026 !map.leafletr.hasRendered) { // must be done to give a initial starting point map.fitWorld(); } explicitView = true; map.flyTo.apply(map, data.flyTo); } if (data.flyToBounds) { if (!explicitView \u0026\u0026 !map.leafletr.hasRendered) { // must be done to give a initial starting point map.fitWorld(); } explicitView = true; methods.flyToBounds.apply(map, data.flyToBounds); } if (data.options.center) { explicitView = true; } // Returns true if the zoomToLimits option says that the map should be // zoomed to map elements. function needsZoom() { return options.zoomToLimits === \"always\" || options.zoomToLimits === \"first\" \u0026\u0026 !map.leafletr.hasRendered; } if (!explicitView \u0026\u0026 needsZoom() \u0026\u0026 !map.getZoom()) { if (data.limits \u0026\u0026 !_jquery2.default.isEmptyObject(data.limits)) { // Use the natural limits of what's being drawn on the map // If the size of the bounding box is 0, leaflet gets all weird var pad = 0.006; if (data.limits.lat[0] === data.limits.lat[1]) { data.limits.lat[0] = data.limits.lat[0] - pad; data.limits.lat[1] = data.limits.lat[1] + pad; } if (data.limits.lng[0] === data.limits.lng[1]) { data.limits.lng[0] = data.limits.lng[0] - pad; data.limits.lng[1] = data.limits.lng[1] + pad; } map.fitBounds([[data.limits.lat[0], data.limits.lng[0]], [data.limits.lat[1], data.limits.lng[1]]]); } else { map.fitWorld(); } } for (var i = 0; data.calls \u0026\u0026 i : {: layer}} this._byGroup = {}; // {: {: layer}} this._byCategory = {}; // {: layer} this._byLayerId = {}; // {: { // \"group\": , // \"layerId\": , // \"category\": , // \"container\":  // } // } this._byStamp = {}; // {: {: [, , ...], ...}} this._byCrosstalkGroup = {}; // END layer indices // {: L.layerGroup} this._categoryContainers = {}; // {: L.layerGroup} this._groupContainers = {}; } _createClass(LayerManager, [{ key: \"addLayer\", value: function addLayer(layer, category, layerId, group, ctGroup, ctKey) { var _this = this; // Was a group provided? var hasId = typeof layerId === \"string\"; var grouped = typeof group === \"string\"; var stamp = _leaflet2.default.Util.stamp(layer) + \"\"; // This will be the default layer group to add the layer to. // We may overwrite this let before using it (i.e. if a group is assigned). // This one liner creates the _categoryContainers[category] entry if it // doesn't already exist. var container = this._categoryContainers[category] = this._categoryContainers[category] || _leaflet2.default.layerGroup().addTo(this._map); var oldLayer = null; if (hasId) { // First, remove any layer with the same category and layerId var prefixedLayerId = this._layerIdKey(category, layerId); oldLayer = this._byLayerId[prefixedLayerId]; if (oldLayer) { this._removeLayer(oldLayer); } // Update layerId index this._byLayerId[prefixedLayerId] = layer; } // Update group index if (grouped) { this._byGroup[group] = this._byGroup[group] || {}; this._byGroup[group][stamp] = layer; // Since a group is assigned, don't add the layer to the category's layer // group; instead, use the group's layer group. // This one liner creates the _groupContainers[group] entry if it doesn't // already exist. container = this.getLayerGroup(group, true); } // Update category index this._byCategory[category] = this._byCategory[category] || {}; this._byCategory[category][stamp] = layer; // Update stamp index var layerInfo = this._byStamp[stamp] = { layer: layer, group: group, ctGroup: ctGroup, ctKey: ctKey, layerId: layerId, category: category, container: container, hidden: false }; // Update crosstalk group index if (ctGroup) { (function () { if (layer.setStyle) { // Need to save this info so we know what to set opacity to later layer.options.origOpacity = typeof layer.options.opacity !== \"undefined\" ? layer.options.opacity : 0.5; layer.options.origFillOpacity = typeof layer.options.fillOpacity !== \"undefined\" ? layer.options.fillOpacity : 0.2; } var ctg = _this._byCrosstalkGroup[ctGroup]; if (!ctg) { (function () { ctg = _this._byCrosstalkGroup[ctGroup] = {}; var crosstalk = global.crosstalk; var handleFilter = function handleFilter(e) { if (!e.value) { var groupKeys = Object.keys(ctg); for (var i = 0; i = 0) { if (layersForKey.length === 1) { delete ctGroup[layerInfo.ctKey]; } else { layersForKey.splice(idx, 1); } } } } }, { key: \"_layerIdKey\", value: function _layerIdKey(category, layerId) { return category + \"\\n\" + layerId; } }]); return LayerManager; }(); exports.default = LayerManager; }).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {}) },{\"./global/jquery\":9,\"./global/leaflet\":10,\"./util\":17}],15:[function(require,module,exports){ (function (global){ \"use strict\"; Object.defineProperty(exports, \"__esModule\", { value: true }); var _typeof = typeof Symbol === \"function\" \u0026\u0026 typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj \u0026\u0026 typeof Symbol === \"function\" \u0026\u0026 obj.constructor === Symbol ? \"symbol\" : typeof obj; }; var _jquery = require(\"./global/jquery\"); var _jquery2 = _interopRequireDefault(_jquery); var _leaflet = require(\"./global/leaflet\"); var _leaflet2 = _interopRequireDefault(_leaflet); var _shiny = require(\"./global/shiny\"); var _shiny2 = _interopRequireDefault(_shiny); var _htmlwidgets = require(\"./global/htmlwidgets\"); var _htmlwidgets2 = _interopRequireDefault(_htmlwidgets); var _util = require(\"./util\"); var _crs_utils = require(\"./crs_utils\"); var _dataframe = require(\"./dataframe\"); var _dataframe2 = _interopRequireDefault(_dataframe); var _clusterLayerStore = require(\"./cluster-layer-store\"); var _clusterLayerStore2 = _interopRequireDefault(_clusterLayerStore); var _mipmapper = require(\"./mipmapper\"); var _mipmapper2 = _interopRequireDefault(_mipmapper); function _interopRequireDefault(obj) { return obj \u0026\u0026 obj.__esModule ? obj : { default: obj }; } var methods = {}; exports.default = methods; function mouseHandler(mapId, layerId, group, eventName, extraInfo) { return function (e) { if (!_htmlwidgets2.default.shinyMode) return; var latLng = e.target.getLatLng ? e.target.getLatLng() : e.latlng; if (latLng) { // retrieve only lat, lon values to remove prototype // and extra parameters added by 3rd party modules // these objects are for json serialization, not javascript var latLngVal = _leaflet2.default.latLng(latLng); // make sure it has consistent shape latLng = { lat: latLngVal.lat, lng: latLngVal.lng }; } var eventInfo = _jquery2.default.extend({ id: layerId, \".nonce\": Math.random() // force reactivity }, group !== null ? { group: group } : null, latLng, extraInfo); _shiny2.default.onInputChange(mapId + \"_\" + eventName, eventInfo); }; } methods.mouseHandler = mouseHandler; methods.clearGroup = function (group) { var _this = this; _jquery2.default.each((0, _util.asArray)(group), function (i, v) { _this.layerManager.clearGroup(v); }); }; methods.setView = function (center, zoom, options) { this.setView(center, zoom, options); }; methods.fitBounds = function (lat1, lng1, lat2, lng2, options) { this.fitBounds([[lat1, lng1], [lat2, lng2]], options); }; methods.flyTo = function (center, zoom, options) { this.flyTo(center, zoom, options); }; methods.flyToBounds = function (lat1, lng1, lat2, lng2, options) { this.flyToBounds([[lat1, lng1], [lat2, lng2]], options); }; methods.setMaxBounds = function (lat1, lng1, lat2, lng2) { this.setMaxBounds([[lat1, lng1], [lat2, lng2]]); }; methods.addPopups = function (lat, lng, popup, layerId, group, options) { var _this2 = this; var df = new _dataframe2.default().col(\"lat\", lat).col(\"lng\", lng).col(\"popup\", popup).col(\"layerId\", layerId).col(\"group\", group).cbind(options); var _loop = function _loop(i) { if (_jquery2.default.isNumeric(df.get(i, \"lat\")) \u0026\u0026 _jquery2.default.isNumeric(df.get(i, \"lng\"))) { (function () { var popup = _leaflet2.default.popup(df.get(i)).setLatLng([df.get(i, \"lat\"), df.get(i, \"lng\")]).setContent(df.get(i, \"popup\")); var thisId = df.get(i, \"layerId\"); var thisGroup = df.get(i, \"group\"); this.layerManager.addLayer(popup, \"popup\", thisId, thisGroup); }).call(_this2); } }; for (var i = 0; i 0) { var df = new _dataframe2.default().col(\"shapes\", polygons).col(\"layerId\", layerId).col(\"group\", group).col(\"popup\", popup).col(\"popupOptions\", popupOptions).col(\"label\", label).col(\"labelOptions\", labelOptions).col(\"highlightOptions\", highlightOptions).cbind(options); addLayers(this, \"shape\", df, function (df, i) { var shapes = df.get(i, \"shapes\"); shapes = shapes.map(function (shape) { return _htmlwidgets2.default.dataframeToD3(shape[0]); }); if (shapes.length  1) { return _leaflet2.default.polyline(shapes, df.get(i)); } else { return _leaflet2.default.polyline(shapes[0], df.get(i)); } }); } }; methods.removeMarker = function (layerId) { this.layerManager.removeLayer(\"marker\", layerId); }; methods.clearMarkers = function () { this.layerManager.clearLayers(\"marker\"); }; methods.removeMarkerCluster = function (layerId) { this.layerManager.removeLayer(\"cluster\", layerId); }; methods.removeMarkerFromCluster = function (layerId, clusterId) { var cluster = this.layerManager.getLayer(\"cluster\", clusterId); if (!cluster) return; cluster.clusterLayerStore.remove(layerId); }; methods.clearMarkerClusters = function () { this.layerManager.clearLayers(\"cluster\"); }; methods.removeShape = function (layerId) { this.layerManager.removeLayer(\"shape\", layerId); }; methods.clearShapes = function () { this.layerManager.clearLayers(\"shape\"); }; methods.addRectangles = function (lat1, lng1, lat2, lng2, layerId, group, options, popup, popupOptions, label, labelOptions, highlightOptions) { var df = new _dataframe2.default().col(\"lat1\", lat1).col(\"lng1\", lng1).col(\"lat2\", lat2).col(\"lng2\", lng2).col(\"layerId\", layerId).col(\"group\", group).col(\"popup\", popup).col(\"popupOptions\", popupOptions).col(\"label\", label).col(\"labelOptions\", labelOptions).col(\"highlightOptions\", highlightOptions).cbind(options); addLayers(this, \"shape\", df, function (df, i) { if (_jquery2.default.isNumeric(df.get(i, \"lat1\")) \u0026\u0026 _jquery2.default.isNumeric(df.get(i, \"lng1\")) \u0026\u0026 _jquery2.default.isNumeric(df.get(i, \"lat2\")) \u0026\u0026 _jquery2.default.isNumeric(df.get(i, \"lng2\"))) { return _leaflet2.default.rectangle([[df.get(i, \"lat1\"), df.get(i, \"lng1\")], [df.get(i, \"lat2\"), df.get(i, \"lng2\")]], df.get(i)); } else { return null; } }); }; /* * @param lat Array of arrays of latitude coordinates for polygons * @param lng Array of arrays of longitude coordinates for polygons */ methods.addPolygons = function (polygons, layerId, group, options, popup, popupOptions, label, labelOptions, highlightOptions) { if (polygons.length  0) { var df = new _dataframe2.default().col(\"shapes\", polygons).col(\"layerId\", layerId).col(\"group\", group).col(\"popup\", popup).col(\"popupOptions\", popupOptions).col(\"label\", label).col(\"labelOptions\", labelOptions).col(\"highlightOptions\", highlightOptions).cbind(options); addLayers(this, \"shape\", df, function (df, i) { // This code used to use L.multiPolygon, but that caused // double-click on a multipolygon to fail to zoom in on the // map. Surprisingly, putting all the rings in a single // polygon seems to still work; complicated multipolygons // are still rendered correctly. var shapes = df.get(i, \"shapes\").map(function (polygon) { return polygon.map(_htmlwidgets2.default.dataframeToD3); }).reduce(function (acc, val) { return acc.concat(val); }, []); return _leaflet2.default.polygon(shapes, df.get(i)); }); } }; methods.addGeoJSON = function (data, layerId, group, style) { // This time, self is actually needed because the callbacks below need // to access both the inner and outer senses of \"this\" var self = this; if (typeof data === \"string\") { data = JSON.parse(data); } var globalStyle = _jquery2.default.extend({}, style, data.style || {}); var gjlayer = _leaflet2.default.geoJson(data, { style: function style(feature) { if (feature.style || feature.properties.style) { return _jquery2.default.extend({}, globalStyle, feature.style, feature.properties.style); } else { return globalStyle; } }, onEachFeature: function onEachFeature(feature, layer) { var extraInfo = { featureId: feature.id, properties: feature.properties }; var popup = feature.properties.popup; if (typeof popup !== \"undefined\" \u0026\u0026 popup !== null) layer.bindPopup(popup); layer.on(\"click\", mouseHandler(self.id, layerId, group, \"geojson_click\", extraInfo), this); layer.on(\"mouseover\", mouseHandler(self.id, layerId, group, \"geojson_mouseover\", extraInfo), this); layer.on(\"mouseout\", mouseHandler(self.id, layerId, group, \"geojson_mouseout\", extraInfo), this); } }); this.layerManager.addLayer(gjlayer, \"geojson\", layerId, group); }; methods.removeGeoJSON = function (layerId) { this.layerManager.removeLayer(\"geojson\", layerId); }; methods.clearGeoJSON = function () { this.layerManager.clearLayers(\"geojson\"); }; methods.addTopoJSON = function (data, layerId, group, style) { // This time, self is actually needed because the callbacks below need // to access both the inner and outer senses of \"this\" var self = this; if (typeof data === \"string\") { data = JSON.parse(data); } var globalStyle = _jquery2.default.extend({}, style, data.style || {}); var gjlayer = _leaflet2.default.geoJson(null, { style: function style(feature) { if (feature.style || feature.properties.style) { return _jquery2.default.extend({}, globalStyle, feature.style, feature.properties.style); } else { return globalStyle; } }, onEachFeature: function onEachFeature(feature, layer) { var extraInfo = { featureId: feature.id, properties: feature.properties }; var popup = feature.properties.popup; if (typeof popup !== \"undefined\" \u0026\u0026 popup !== null) layer.bindPopup(popup); layer.on(\"click\", mouseHandler(self.id, layerId, group, \"topojson_click\", extraInfo), this); layer.on(\"mouseover\", mouseHandler(self.id, layerId, group, \"topojson_mouseover\", extraInfo), this); layer.on(\"mouseout\", mouseHandler(self.id, layerId, group, \"topojson_mouseout\", extraInfo), this); } }); global.omnivore.topojson.parse(data, null, gjlayer); this.layerManager.addLayer(gjlayer, \"topojson\", layerId, group); }; methods.removeTopoJSON = function (layerId) { this.layerManager.removeLayer(\"topojson\", layerId); }; methods.clearTopoJSON = function () { this.layerManager.clearLayers(\"topojson\"); }; methods.addControl = function (html, position, layerId, classes) { function onAdd(map) { var div = _leaflet2.default.DomUtil.create(\"div\", classes); if (typeof layerId !== \"undefined\" \u0026\u0026 layerId !== null) { div.setAttribute(\"id\", layerId); } this._div = div; // It's possible for window.Shiny to be true but Shiny.initializeInputs to // not be, when a static leaflet widget is included as part of the shiny // UI directly (not through leafletOutput or uiOutput). In this case we // don't do the normal Shiny stuff as that will all happen when Shiny // itself loads and binds the entire doc. if (window.Shiny \u0026\u0026 _shiny2.default.initializeInputs) { _shiny2.default.renderHtml(html, this._div); _shiny2.default.initializeInputs(this._div); _shiny2.default.bindAll(this._div); } else { this._div.innerHTML = html; } return this._div; } function onRemove(map) { if (window.Shiny \u0026\u0026 _shiny2.default.unbindAll) { _shiny2.default.unbindAll(this._div); } } var Control = _leaflet2.default.Control.extend({ options: { position: position }, onAdd: onAdd, onRemove: onRemove }); this.controls.add(new Control(), layerId, html); }; methods.addCustomControl = function (control, layerId) { this.controls.add(control, layerId); }; methods.removeControl = function (layerId) { this.controls.remove(layerId); }; methods.getControl = function (layerId) { this.controls.get(layerId); }; methods.clearControls = function () { this.controls.clear(); }; methods.addLegend = function (options) { var _this5 = this; var legend = _leaflet2.default.control({ position: options.position }); var gradSpan = void 0; legend.onAdd = function (map) { var div = _leaflet2.default.DomUtil.create(\"div\", options.className), colors = options.colors, labels = options.labels, legendHTML = \"\"; if (options.type === \"numeric\") { (function () { // # Formatting constants. var singleBinHeight = 20; // The distance between tick marks, in px var vMargin = 8; // If 1st tick mark starts at top of gradient, how // many extra px are needed for the top half of the // 1st label? (ditto for last tick mark/label) var tickWidth = 4; // How wide should tick marks be, in px? var labelPadding = 6; // How much distance to reserve for tick mark? // (Must be = tickWidth) // # Derived formatting parameters. // What's the height of a single bin, in percentage (of gradient height)? // It might not just be 1/(n-1), if the gradient extends past the tick // marks (which can be the case for pretty cut points). var singleBinPct = (options.extra.p_n - options.extra.p_1) / (labels.length - 1); // Each bin is `singleBinHeight` high. How tall is the gradient? var totalHeight = 1 / singleBinPct * singleBinHeight + 1; // How far should the first tick be shifted down, relative to the top // of the gradient? var tickOffset = singleBinHeight / singleBinPct * options.extra.p_1; gradSpan = (0, _jquery2.default)(\"\").css({ \"background\": \"linear-gradient(\" + colors + \")\", \"opacity\": options.opacity, \"height\": totalHeight + \"px\", \"width\": \"18px\", \"display\": \"block\", \"margin-top\": vMargin + \"px\" }); var leftDiv = (0, _jquery2.default)(\"\").css(\"float\", \"left\"), rightDiv = (0, _jquery2.default)(\"\").css(\"float\", \"left\"); leftDiv.append(gradSpan); (0, _jquery2.default)(div).append(leftDiv).append(rightDiv).append((0, _jquery2.default)(\"\n\")); // Have to attach the div to the body at this early point, so that the // svg text getComputedTextLength() actually works, below. document.body.appendChild(div); var ns = \"http://www.w3.org/2000/svg\"; var svg = document.createElementNS(ns, \"svg\"); rightDiv.append(svg); var g = document.createElementNS(ns, \"g\"); (0, _jquery2.default)(g).attr(\"transform\", \"translate(0, \" + vMargin + \")\"); svg.appendChild(g); // max label width needed to set width of svg, and right-justify text var maxLblWidth = 0; // Create tick marks and labels _jquery2.default.each(labels, function (i, label) { var y = tickOffset + i * singleBinHeight + 0.5; var thisLabel = document.createElementNS(ns, \"text\"); (0, _jquery2.default)(thisLabel).text(labels[i]).attr(\"y\", y).attr(\"dx\", labelPadding).attr(\"dy\", \"0.5ex\"); g.appendChild(thisLabel); maxLblWidth = Math.max(maxLblWidth, thisLabel.getComputedTextLength()); var thisTick = document.createElementNS(ns, \"line\"); (0, _jquery2.default)(thisTick).attr(\"x1\", 0).attr(\"x2\", tickWidth).attr(\"y1\", y).attr(\"y2\", y).attr(\"stroke-width\", 1); g.appendChild(thisTick); }); // Now that we know the max label width, we can right-justify (0, _jquery2.default)(svg).find(\"text\").attr(\"dx\", labelPadding + maxLblWidth).attr(\"text-anchor\", \"end\"); // Final size for  (0, _jquery2.default)(svg).css({ width: maxLblWidth + labelPadding + \"px\", height: totalHeight + vMargin * 2 + \"px\" }); if (options.na_color \u0026\u0026 _jquery2.default.inArray(options.na_label, labels) \" + options.na_label + \"\"); } })(); } else { if (options.na_color \u0026\u0026 _jquery2.default.inArray(options.na_label, labels)  \" + labels[i] + \"\n\"; } div.innerHTML = legendHTML; } if (options.title) (0, _jquery2.default)(div).prepend(\"\" + options.title + \"\"); return div; }; if (options.group) { (function () { // Auto generate a layerID if not provided if (!options.layerId) { options.layerId = _leaflet2.default.Util.stamp(legend); } var map = _this5; map.on(\"overlayadd\", function (e) { if (e.name === options.group) { map.controls.add(legend, options.layerId); } }); map.on(\"overlayremove\", function (e) { if (e.name === options.group) { map.controls.remove(options.layerId); } }); map.on(\"groupadd\", function (e) { if (e.name === options.group) { map.controls.add(legend, options.layerId); } }); map.on(\"groupremove\", function (e) { if (e.name === options.group) { map.controls.remove(options.layerId); } }); })(); } this.controls.add(legend, options.layerId); }; methods.addLayersControl = function (baseGroups, overlayGroups, options) { var _this6 = this; // Only allow one layers control at a time methods.removeLayersControl.call(this); var firstLayer = true; var base = {}; _jquery2.default.each((0, _util.asArray)(baseGroups), function (i, g) { var layer = _this6.layerManager.getLayerGroup(g, true); if (layer) { base[g] = layer; // Check if 1 base layers are visible; if so, hide all but the first one if (_this6.hasLayer(layer)) { if (firstLayer) { firstLayer = false; } else { _this6.removeLayer(layer); } } } }); var overlay = {}; _jquery2.default.each((0, _util.asArray)(overlayGroups), function (i, g) { var layer = _this6.layerManager.getLayerGroup(g, true); if (layer) { overlay[g] = layer; } }); this.currentLayersControl = _leaflet2.default.control.layers(base, overlay, options); this.addControl(this.currentLayersControl); }; methods.removeLayersControl = function () { if (this.currentLayersControl) { this.removeControl(this.currentLayersControl); this.currentLayersControl = null; } }; methods.addScaleBar = function (options) { // Only allow one scale bar at a time methods.removeScaleBar.call(this); var scaleBar = _leaflet2.default.control.scale(options).addTo(this); this.currentScaleBar = scaleBar; }; methods.removeScaleBar = function () { if (this.currentScaleBar) { this.currentScaleBar.remove(); this.currentScaleBar = null; } }; methods.hideGroup = function (group) { var _this7 = this; _jquery2.default.each((0, _util.asArray)(group), function (i, g) { var layer = _this7.layerManager.getLayerGroup(g, true); if (layer) { _this7.removeLayer(layer); } }); }; methods.showGroup = function (group) { var _this8 = this; _jquery2.default.each((0, _util.asArray)(group), function (i, g) { var layer = _this8.layerManager.getLayerGroup(g, true); if (layer) { _this8.addLayer(layer); } }); }; function setupShowHideGroupsOnZoom(map) { if (map.leafletr._hasInitializedShowHideGroups) { return; } map.leafletr._hasInitializedShowHideGroups = true; function setVisibility(layer, visible, group) { if (visible !== map.hasLayer(layer)) { if (visible) { map.addLayer(layer); map.fire(\"groupadd\", { \"name\": group, \"layer\": layer }); } else { map.removeLayer(layer); map.fire(\"groupremove\", { \"name\": group, \"layer\": layer }); } } } function showHideGroupsOnZoom() { if (!map.layerManager) return; var zoom = map.getZoom(); map.layerManager.getAllGroupNames().forEach(function (group) { var layer = map.layerManager.getLayerGroup(group, false); if (layer \u0026\u0026 typeof layer.zoomLevels !== \"undefined\") { setVisibility(layer, layer.zoomLevels === true || layer.zoomLevels.indexOf(zoom) = 0, group); } }); } map.showHideGroupsOnZoom = showHideGroupsOnZoom; map.on(\"zoomend\", showHideGroupsOnZoom); } methods.setGroupOptions = function (group, options) { var _this9 = this; _jquery2.default.each((0, _util.asArray)(group), function (i, g) { var layer = _this9.layerManager.getLayerGroup(g, true); // This slightly tortured check is because 0 is a valid value for zoomLevels if (typeof options.zoomLevels !== \"undefined\" \u0026\u0026 options.zoomLevels !== null) { layer.zoomLevels = (0, _util.asArray)(options.zoomLevels); } }); setupShowHideGroupsOnZoom(this); this.showHideGroupsOnZoom(); }; methods.addRasterImage = function (uri, bounds, opacity, attribution, layerId, group) { // uri is a data URI containing an image. We want to paint this image as a // layer at (top-left) bounds[0] to (bottom-right) bounds[1]. // We can't simply use ImageOverlay, as it uses bilinear scaling which looks // awful as you zoom in (and sometimes shifts positions or disappears). // Instead, we'll use a TileLayer.Canvas to draw pieces of the image. // First, some helper functions. // degree2tile converts latitude, longitude, and zoom to x and y tile // numbers. The tile numbers returned can be non-integral, as there's no // reason to expect that the lat/lng inputs are exactly on the border of two // tiles. // // We'll use this to convert the bounds we got from the server, into coords // in tile-space at a given zoom level. Note that once we do the conversion, // we don't to do any more trigonometry to convert between pixel coordinates // and tile coordinates; the source image pixel coords, destination canvas // pixel coords, and tile coords all can be scaled linearly. function degree2tile(lat, lng, zoom) { // See http://wiki.openstreetmap.org/wiki/Slippy_map_tilenames var latRad = lat * Math.PI / 180; var n = Math.pow(2, zoom); var x = (lng + 180) / 360 * n; var y = (1 - Math.log(Math.tan(latRad) + 1 / Math.cos(latRad)) / Math.PI) / 2 * n; return { x: x, y: y }; } // Given a range [from,to) and either one or two numbers, returns true if // there is any overlap between [x,x1) and the range--or if x1 is omitted, // then returns true if x is within [from,to). function overlap(from, to, x, /* optional */x1) { if (arguments.length == 3) x1 = x; return x = from; } function getCanvasSmoothingProperty(ctx) { var candidates = [\"imageSmoothingEnabled\", \"mozImageSmoothingEnabled\", \"webkitImageSmoothingEnabled\", \"msImageSmoothingEnabled\"]; for (var i = 0; i = 256 \u0026\u0026 imgRes.y = 256) { // Use built-in scaling // Turn off anti-aliasing if necessary if (smoothingProperty) { ctx[smoothingProperty] = imgRes.x = 256 \u0026\u0026 imgRes.y = 256; } // Don't necessarily draw with the full-size image; if we're // downscaling, use the mipmapper to get a pre-downscaled image // (see comments on Mipmapper class for why this matters). mipmapper.getBySize(extent.x * 256, extent.y * 256, function (mip) { // It's possible that the image will go off the edge of the canvas-- // that's OK, the canvas should clip appropriately. ctx.drawImage(mip, // Convert abs tile coords to rel tile coords, then *256 to convert // to rel pixel coords (topLeft.x - tilePoint.x) * 256, (topLeft.y - tilePoint.y) * 256, // Always draw the whole thing and let canvas clip; so we can just // convert from size in tile coords straight to pixels extent.x * 256, extent.y * 256); }); } else { // Use manual nearest-neighbor interpolation // Calculate the source image pixel coordinates that correspond with // the top-left and bottom-right of this tile. (If the source image // only partially overlaps the tile, we use max/min to limit the // sourceStart/End to only reflect the overlapping portion.) var sourceStart = { x: Math.max(0, Math.floor((tilePoint.x - topLeft.x) * imgRes.x)), y: Math.max(0, Math.floor((tilePoint.y - topLeft.y) * imgRes.y)) }; var sourceEnd = { x: Math.min(w, Math.ceil((tilePoint.x + 1 - topLeft.x) * imgRes.x)), y: Math.min(h, Math.ceil((tilePoint.y + 1 - topLeft.y) * imgRes.y)) }; // The size, in dest pixels, that each source pixel should occupy. // This might be greater or less than 1 (e.g. if x and y resolution // are very different). var pixelSize = { x: 256 / imgRes.x, y: 256 / imgRes.y }; // For each pixel in the source image that overlaps the tile... for (var row = sourceStart.y; row length) { dest.splice(length, dest.length - length); } return dest; } function asArray(value) { if (value instanceof Array) return value;else return [value]; } },{}]},{},[13]);     {\"x\":{\"options\":{\"crs\":{\"crsClass\":\"L.CRS.EPSG3857\",\"code\":null,\"proj4def\":null,\"projectedBounds\":null,\"options\":{}}},\"calls\":[{\"method\":\"addTiles\",\"args\":[\"//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",null,null,{\"minZoom\":0,\"maxZoom\":18,\"tileSize\":256,\"subdomains\":\"abc\",\"errorTileUrl\":\"\",\"tms\":false,\"noWrap\":false,\"zoomOffset\":0,\"zoomReverse\":false,\"opacity\":1,\"zIndex\":1,\"detectRetina\":false,\"attribution\":\"\u0026copy; OpenStreetMap contributors, CC-BY-SA\"}]},{\"method\":\"addMarkers\",\"args\":[45.93423,20.40704,null,null,null,{\"interactive\":true,\"draggable\":false,\"keyboard\":true,\"title\":\"\",\"alt\":\"\",\"zIndexOffset\":0,\"opacity\":1,\"riseOnHover\":false,\"riseOffset\":250},\"Ciao!\nMokrin House! üòÄ\",null,null,null,null,{\"interactive\":false,\"permanent\":false,\"direction\":\"auto\",\"opacity\":1,\"offset\":[0,0],\"textsize\":\"10px\",\"textOnly\":false,\"className\":\"\",\"sticky\":true},null]}],\"setView\":[[45.93362,20.41215],15,[]],\"limits\":{\"lat\":[45.93423,45.93423],\"lng\":[20.40704,20.40704]}},\"evals\":[],\"jsHooks\":[]} {\"viewer\":{\"width\":\"100%\",\"height\":400,\"padding\":0,\"fill\":true},\"browser\":{\"width\":\"100%\",\"height\":400,\"padding\":0,\"fill\":true}}   "
}]